"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "components_map-component_tsx";
exports.ids = ["components_map-component_tsx"];
exports.modules = {

/***/ "./components/map-component.tsx":
/*!**************************************!*\
  !*** ./components/map-component.tsx ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_script__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/script */ \"./node_modules/next/script.js\");\n/* harmony import */ var next_script__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_script__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _utils_places_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/utils/places-utils */ \"./utils/places-utils.ts\");\n\n\n\n\nconst MapComponent = ({ city, apiKey })=>{\n    const mapRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [map, setMap] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [markers, setMarkers] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(new Map());\n    const [infoWindow, setInfoWindow] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    const [scriptLoaded, setScriptLoaded] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [selectedPlace, setSelectedPlace] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        console.log(\"MapComponent: Received props:\", {\n            city,\n            apiKeyLength: apiKey?.length\n        });\n        if (!apiKey) {\n            console.error(\"MapComponent: Google Maps API key is missing\");\n            setError(\"Google Maps API key is missing\");\n            setIsLoading(false);\n            return;\n        }\n        if (!scriptLoaded || !mapRef.current) {\n            console.log(\"MapComponent: Waiting for script to load or map ref to be ready...\");\n            return;\n        }\n        console.log(\"MapComponent: Initializing map with city:\", city);\n        const initMap = async ()=>{\n            try {\n                // Import required libraries\n                const { Map: Map1 } = await window.google.maps.importLibrary(\"maps\");\n                const { AdvancedMarkerElement } = await google.maps.importLibrary(\"marker\");\n                const geocoder = new window.google.maps.Geocoder();\n                geocoder.geocode({\n                    address: city\n                }, async (results, status)=>{\n                    console.log(\"Geocoding response:\", {\n                        status,\n                        resultsLength: results?.length\n                    });\n                    if (status !== \"OK\" || !results?.[0]?.geometry?.location) {\n                        console.error(\"Geocoding failed:\", status);\n                        setError(`Could not find location for ${city}`);\n                        setIsLoading(false);\n                        return;\n                    }\n                    try {\n                        const location = results[0].geometry.location;\n                        const newMap = new Map1(mapRef.current, {\n                            center: location,\n                            zoom: 12,\n                            mapId: \"2d604af04a7c7fa8\"\n                        });\n                        setMap(newMap);\n                        const newInfoWindow = new google.maps.InfoWindow({\n                            maxWidth: 400\n                        });\n                        setInfoWindow(newInfoWindow);\n                        const createCityInfoWindowContent = async (city, location)=>{\n                            try {\n                                // Search for the city to get its details including photos\n                                const cityPlace = await (0,_utils_places_utils__WEBPACK_IMPORTED_MODULE_3__.searchPlaceByText)(city, {\n                                    latitude: location.lat(),\n                                    longitude: location.lng()\n                                });\n                                if (!cityPlace) return null;\n                                // Create a photo carousel HTML\n                                const photoCarousel = cityPlace.photos && cityPlace.photos.length > 0 ? `\n                                            <div class=\"relative w-full\" style=\"height: 200px;\">\n                                                <div class=\"carousel-container overflow-hidden w-full h-full\">\n                                                    <div class=\"carousel-track flex transition-transform duration-500\" style=\"height: 100%;\">\n                                                        ${cityPlace.photos.slice(0, 5).map((photo, index)=>`\n                                                            <div class=\"carousel-slide w-full h-full flex-none\">\n                                                                <img src=\"https://places.googleapis.com/v1/${photo.name}/media?maxHeightPx=340&maxWidthPx=340&key=${apiKey}\"\n                                                                    alt=\"${city}\"\n                                                                    class=\"w-full h-full object-cover\"\n                                                                />\n                                                            </div>\n                                                        `).join(\"\")}\n                                                    </div>\n                                                </div>\n                                                <button onclick=\"window.prevSlide()\" class=\"absolute left-2 top-1/2 transform -translate-y-1/2 bg-white/80 rounded-full p-1 shadow-md hover:bg-white\">\n                                                    <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" class=\"w-5 h-5\">\n                                                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M15.75 19.5L8.25 12l7.5-7.5\" />\n                                                    </svg>\n                                                </button>\n                                                <button onclick=\"window.nextSlide()\" class=\"absolute right-2 top-1/2 transform -translate-y-1/2 bg-white/80 rounded-full p-1 shadow-md hover:bg-white\">\n                                                    <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" class=\"w-5 h-5\">\n                                                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M8.25 4.5l7.5 7.5-7.5 7.5\" />\n                                                    </svg>\n                                                </button>\n                                                <div class=\"absolute bottom-2 left-0 right-0 flex justify-center gap-1\">\n                                                    ${cityPlace.photos.slice(0, 5).map((_, index)=>`\n                                                        <button onclick=\"window.goToSlide(${index})\" class=\"w-2 h-2 rounded-full bg-white/80 hover:bg-white shadow-sm carousel-dot\" data-index=\"${index}\">\n                                                        </button>\n                                                    `).join(\"\")}\n                                                </div>\n                                            </div>\n                                        ` : \"\";\n                                // Add carousel control functions to window\n                                if (cityPlace.photos && cityPlace.photos.length > 0) {\n                                    const numSlides = Math.min(cityPlace.photos.length, 5);\n                                    window.currentSlide = 0;\n                                    window.updateCarousel = ()=>{\n                                        const track = document.querySelector(\".carousel-track\");\n                                        if (track) {\n                                            track.style.transform = `translateX(-${window.currentSlide * 100}%)`;\n                                            // Update dots\n                                            document.querySelectorAll(\".carousel-dot\").forEach((dot, index)=>{\n                                                if (index === window.currentSlide) {\n                                                    dot.classList.add(\"bg-white\");\n                                                    dot.classList.remove(\"bg-white/80\");\n                                                } else {\n                                                    dot.classList.remove(\"bg-white\");\n                                                    dot.classList.add(\"bg-white/80\");\n                                                }\n                                            });\n                                        }\n                                    };\n                                    window.nextSlide = ()=>{\n                                        window.currentSlide = (window.currentSlide + 1) % numSlides;\n                                        window.updateCarousel();\n                                    };\n                                    window.prevSlide = ()=>{\n                                        window.currentSlide = (window.currentSlide - 1 + numSlides) % numSlides;\n                                        window.updateCarousel();\n                                    };\n                                    window.goToSlide = (index)=>{\n                                        window.currentSlide = index;\n                                        window.updateCarousel();\n                                    };\n                                }\n                                return `\n                                        <div class=\"bg-white rounded-lg shadow-sm\" style=\"max-width: 340px;\">\n                                            ${photoCarousel}\n                                            <div class=\"p-4\">\n                                                <h2 class=\"text-xl font-semibold text-gray-900 mb-2\">${city}</h2>\n                                                ${cityPlace.formattedAddress ? `<p class=\"text-sm text-gray-500 mb-2\">${cityPlace.formattedAddress}</p>` : \"\"}\n                                            </div>\n                                        </div>\n                                    `;\n                            } catch (error) {\n                                console.error(\"Error creating city info window:\", error);\n                                return null;\n                            }\n                        };\n                        // Create a marker for the city\n                        const cityMarker = new google.maps.marker.AdvancedMarkerElement({\n                            map: newMap,\n                            position: location,\n                            title: city\n                        });\n                        // Add click listener to the marker\n                        cityMarker.addListener(\"click\", async ()=>{\n                            if (infoWindow) {\n                                const content = createCityInfoWindowContent(city, location);\n                                if (content) {\n                                    infoWindow.setContent(await content);\n                                    infoWindow.open(newMap, cityMarker);\n                                }\n                            }\n                        });\n                        markers.set(city, cityMarker);\n                        // Add click listener for future interaction\n                        cityMarker.addListener(\"click\", async ()=>{\n                            const content = await createCityInfoWindowContent(city, location);\n                            if (content) {\n                                newInfoWindow.setContent(content);\n                                newInfoWindow.open({\n                                    anchor: cityMarker,\n                                    map: newMap\n                                });\n                            }\n                        });\n                    } catch (err) {\n                        console.error(\"Error setting up map:\", err);\n                        setError(\"Failed to initialize map\");\n                    }\n                });\n            } catch (err) {\n                console.error(\"Error initializing map:\", err);\n                setError(\"Failed to initialize map\");\n                setIsLoading(false);\n            }\n        };\n        initMap();\n    }, [\n        city,\n        scriptLoaded,\n        apiKey\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!map) return;\n        window.addPlaceToMap = async (placeData)=>{\n            try {\n                // Import both marker and pin libraries\n                const [{ AdvancedMarkerElement }, { PinElement }] = await Promise.all([\n                    google.maps.importLibrary(\"marker\"),\n                    google.maps.importLibrary(\"marker\")\n                ]);\n                // Create a custom pin element\n                const pinElement = new google.maps.marker.PinElement({\n                    // background: \"#FBBC04\",\n                    // borderColor: \"#EA4335\",\n                    // glyphColor: \"#000000\",\n                    scale: 1\n                });\n                const marker = new google.maps.marker.AdvancedMarkerElement({\n                    map,\n                    position: {\n                        lat: placeData.latitude,\n                        lng: placeData.longitude\n                    },\n                    title: placeData.title,\n                    content: pinElement.element,\n                    gmpDraggable: false\n                });\n                // Add click listener\n                marker.addListener(\"click\", ()=>{\n                    if (placeData.place) {\n                        // Your existing click handler logic\n                        const content = createPlaceInfoWindowContent(placeData.place);\n                        if (content && infoWindow) {\n                            infoWindow.setContent(content);\n                            infoWindow.open(map, marker);\n                        }\n                    }\n                });\n                // Store the marker reference\n                markers.set(placeData.title || \"unnamed\", marker);\n            } catch (err) {\n                console.error(\"Error adding place marker:\", err);\n            }\n        };\n        window.clearPlaceMarkers = ()=>{\n            markers.forEach((marker)=>{\n                marker.setMap(null);\n            });\n            markers.clear();\n        };\n        return ()=>{\n            delete window.addPlaceToMap;\n            delete window.clearPlaceMarkers;\n        };\n    }, [\n        map,\n        infoWindow\n    ]);\n    const createPlaceInfoWindowContent = (place)=>{\n        const photoUrl = place.photos && place.photos[0] ? `https://places.googleapis.com/v1/${place.photos[0].name}/media?maxHeightPx=200&maxWidthPx=300&key=${apiKey}` : \"\";\n        return `\n            <div class=\"bg-white rounded-lg shadow-sm\" style=\"max-width: 300px;\">\n                ${photoUrl ? `\n                    <div style=\"height: 150px; width: 100%;\">\n                        <img src=\"${photoUrl}\" \n                            alt=\"${typeof place.displayName === \"string\" ? place.displayName : place.displayName.text}\"\n                            style=\"width: 100%; height: 100%; object-fit: cover; border-top-left-radius: 0.5rem; border-top-right-radius: 0.5rem;\"\n                        />\n                    </div>\n                ` : \"\"}\n                <div class=\"p-3\">\n                    <h3 class=\"text-lg font-semibold text-gray-900 mb-1\">\n                        ${typeof place.displayName === \"string\" ? place.displayName : place.displayName.text}\n                    </h3>\n                    ${place.primaryTypeDisplayName ? `<div class=\"text-sm text-gray-600 mb-1\">\n                            ${place.primaryTypeDisplayName.text}\n                            </div>` : \"\"}\n                    ${place.formattedAddress ? `<p class=\"text-sm text-gray-500\">\n                            ${place.formattedAddress}\n                            </p>` : \"\"}\n                </div>\n            </div>\n        `;\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"relative w-full h-full min-h-[340px]\",\n        children: [\n            apiKey && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((next_script__WEBPACK_IMPORTED_MODULE_2___default()), {\n                src: `https://maps.googleapis.com/maps/api/js?key=${apiKey}&libraries=places,marker&v=beta&callback=Function.prototype`,\n                strategy: \"afterInteractive\",\n                onLoad: ()=>{\n                    console.log(\"Google Maps script loaded\");\n                    setScriptLoaded(true);\n                },\n                onError: (e)=>{\n                    console.error(\"Failed to load Google Maps script:\", e);\n                    setError(\"Failed to load Google Maps\");\n                    setIsLoading(false);\n                }\n            }, void 0, false, {\n                fileName: \"/Users/terrancehah/Documents/terrancehah.com/components/map-component.tsx\",\n                lineNumber: 348,\n                columnNumber: 17\n            }, undefined),\n            error && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"absolute inset-0 flex items-center justify-center bg-gray-100 text-red-500 p-4 text-center\",\n                children: error\n            }, void 0, false, {\n                fileName: \"/Users/terrancehah/Documents/terrancehah.com/components/map-component.tsx\",\n                lineNumber: 363,\n                columnNumber: 17\n            }, undefined),\n            isLoading && !error && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"absolute inset-0 flex items-center justify-center bg-gray-100\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"text-gray-600\",\n                    children: [\n                        \"Loading map...\",\n                        !apiKey && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            children: \"Waiting for API key...\"\n                        }, void 0, false, {\n                            fileName: \"/Users/terrancehah/Documents/terrancehah.com/components/map-component.tsx\",\n                            lineNumber: 371,\n                            columnNumber: 37\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/terrancehah/Documents/terrancehah.com/components/map-component.tsx\",\n                    lineNumber: 369,\n                    columnNumber: 21\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"/Users/terrancehah/Documents/terrancehah.com/components/map-component.tsx\",\n                lineNumber: 368,\n                columnNumber: 17\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                ref: mapRef,\n                className: \"w-full h-full\"\n            }, void 0, false, {\n                fileName: \"/Users/terrancehah/Documents/terrancehah.com/components/map-component.tsx\",\n                lineNumber: 375,\n                columnNumber: 13\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/terrancehah/Documents/terrancehah.com/components/map-component.tsx\",\n        lineNumber: 346,\n        columnNumber: 9\n    }, undefined);\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (MapComponent);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QkFDRyw4REFBQ2lHO2dCQUFJQyxXQUFVOzBCQUNWbEc7Ozs7OztZQUdSRSxhQUFhLENBQUNGLHVCQUNYLDhEQUFDaUc7Z0JBQUlDLFdBQVU7MEJBQ1gsNEVBQUNEO29CQUFJQyxXQUFVOzt3QkFBZ0I7d0JBRTFCLENBQUMzRyx3QkFBVSw4REFBQzBHO3NDQUFJOzs7Ozs7Ozs7Ozs7Ozs7OzswQkFJN0IsOERBQUNBO2dCQUFJTyxLQUFLaEg7Z0JBQVEwRyxXQUFVOzs7Ozs7Ozs7Ozs7QUFTeEM7QUFFQSxpRUFBZTdHLFlBQVlBLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90cmF2ZWwtcml6ei8uL2NvbXBvbmVudHMvbWFwLWNvbXBvbmVudC50c3g/MzQwZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgdXNlRWZmZWN0LCB1c2VSZWYsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IFNjcmlwdCBmcm9tICduZXh0L3NjcmlwdCc7XG5pbXBvcnQgeyBQbGFjZSwgc2VhcmNoUGxhY2VCeVRleHQgfSBmcm9tICdAL3V0aWxzL3BsYWNlcy11dGlscyc7XG5cbmludGVyZmFjZSBNYXBDb21wb25lbnRQcm9wcyB7XG4gICAgY2l0eTogc3RyaW5nO1xuICAgIGFwaUtleTogc3RyaW5nO1xufVxuXG5kZWNsYXJlIGdsb2JhbCB7XG4gICAgaW50ZXJmYWNlIFdpbmRvdyB7XG4gICAgICAgIGluaXRNYXA6ICgpID0+IHZvaWQ7XG4gICAgICAgIGN1cnJlbnRTbGlkZTogbnVtYmVyO1xuICAgICAgICB1cGRhdGVDYXJvdXNlbDogKCkgPT4gdm9pZDtcbiAgICAgICAgbmV4dFNsaWRlOiAoKSA9PiB2b2lkO1xuICAgICAgICBwcmV2U2xpZGU6ICgpID0+IHZvaWQ7XG4gICAgICAgIGdvVG9TbGlkZTogKGluZGV4OiBudW1iZXIpID0+IHZvaWQ7XG4gICAgICAgIGdvb2dsZTogdHlwZW9mIGdvb2dsZTtcbiAgICAgICAgYWRkUGxhY2VUb01hcDogKHBsYWNlOiB7IFxuICAgICAgICAgICAgbGF0aXR1ZGU6IG51bWJlcjsgXG4gICAgICAgICAgICBsb25naXR1ZGU6IG51bWJlcjsgXG4gICAgICAgICAgICB0aXRsZT86IHN0cmluZztcbiAgICAgICAgICAgIHBsYWNlPzogUGxhY2U7XG4gICAgICAgIH0pID0+IHZvaWQ7XG4gICAgICAgIGNsZWFyUGxhY2VNYXJrZXJzOiAoKSA9PiB2b2lkO1xuICAgIH1cbn1cblxuZGVjbGFyZSBnbG9iYWwge1xuICAgIG5hbWVzcGFjZSBnb29nbGUubWFwcyB7XG4gICAgICAgIGludGVyZmFjZSBNYXJrZXJMaWJyYXJ5IHtcbiAgICAgICAgICAgIEFkdmFuY2VkTWFya2VyRWxlbWVudDogdHlwZW9mIGdvb2dsZS5tYXBzLm1hcmtlci5BZHZhbmNlZE1hcmtlckVsZW1lbnQ7XG4gICAgICAgICAgICBQaW5FbGVtZW50OiB0eXBlb2YgZ29vZ2xlLm1hcHMubWFya2VyLlBpbkVsZW1lbnQ7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmNvbnN0IE1hcENvbXBvbmVudDogUmVhY3QuRkM8TWFwQ29tcG9uZW50UHJvcHM+ID0gKHsgY2l0eSwgYXBpS2V5IH0pID0+IHtcbiAgICBjb25zdCBtYXBSZWYgPSB1c2VSZWY8SFRNTERpdkVsZW1lbnQ+KG51bGwpO1xuICAgIGNvbnN0IFttYXAsIHNldE1hcF0gPSB1c2VTdGF0ZTxnb29nbGUubWFwcy5NYXAgfCBudWxsPihudWxsKTtcbiAgICBjb25zdCBbbWFya2Vycywgc2V0TWFya2Vyc10gPSB1c2VTdGF0ZTxNYXA8c3RyaW5nLCBnb29nbGUubWFwcy5tYXJrZXIuQWR2YW5jZWRNYXJrZXJFbGVtZW50Pj4obmV3IE1hcCgpKTtcbiAgICBjb25zdCBbaW5mb1dpbmRvdywgc2V0SW5mb1dpbmRvd10gPSB1c2VTdGF0ZTxnb29nbGUubWFwcy5JbmZvV2luZG93IHwgbnVsbD4obnVsbCk7XG4gICAgY29uc3QgW2Vycm9yLCBzZXRFcnJvcl0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcbiAgICBjb25zdCBbaXNMb2FkaW5nLCBzZXRJc0xvYWRpbmddID0gdXNlU3RhdGUodHJ1ZSk7XG4gICAgY29uc3QgW3NjcmlwdExvYWRlZCwgc2V0U2NyaXB0TG9hZGVkXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgICBjb25zdCBbc2VsZWN0ZWRQbGFjZSwgc2V0U2VsZWN0ZWRQbGFjZV0gPSB1c2VTdGF0ZTxQbGFjZSB8IG51bGw+KG51bGwpO1xuXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coJ01hcENvbXBvbmVudDogUmVjZWl2ZWQgcHJvcHM6JywgeyBjaXR5LCBhcGlLZXlMZW5ndGg6IGFwaUtleT8ubGVuZ3RoIH0pO1xuICAgICAgICBcbiAgICAgICAgaWYgKCFhcGlLZXkpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ01hcENvbXBvbmVudDogR29vZ2xlIE1hcHMgQVBJIGtleSBpcyBtaXNzaW5nJyk7XG4gICAgICAgICAgICBzZXRFcnJvcignR29vZ2xlIE1hcHMgQVBJIGtleSBpcyBtaXNzaW5nJyk7XG4gICAgICAgICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFzY3JpcHRMb2FkZWQgfHwgIW1hcFJlZi5jdXJyZW50KSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnTWFwQ29tcG9uZW50OiBXYWl0aW5nIGZvciBzY3JpcHQgdG8gbG9hZCBvciBtYXAgcmVmIHRvIGJlIHJlYWR5Li4uJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zb2xlLmxvZygnTWFwQ29tcG9uZW50OiBJbml0aWFsaXppbmcgbWFwIHdpdGggY2l0eTonLCBjaXR5KTtcbiAgICAgICAgY29uc3QgaW5pdE1hcCA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgLy8gSW1wb3J0IHJlcXVpcmVkIGxpYnJhcmllc1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgTWFwIH0gPSBhd2FpdCB3aW5kb3cuZ29vZ2xlLm1hcHMuaW1wb3J0TGlicmFyeShcIm1hcHNcIikgYXMgZ29vZ2xlLm1hcHMuTWFwc0xpYnJhcnk7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBBZHZhbmNlZE1hcmtlckVsZW1lbnQgfSA9IGF3YWl0IGdvb2dsZS5tYXBzLmltcG9ydExpYnJhcnkoXCJtYXJrZXJcIikgYXMgZ29vZ2xlLm1hcHMuTWFya2VyTGlicmFyeTtcbiAgICAgICAgICAgICAgICBjb25zdCBnZW9jb2RlciA9IG5ldyB3aW5kb3cuZ29vZ2xlLm1hcHMuR2VvY29kZXIoKTtcblxuICAgICAgICAgICAgICAgIGdlb2NvZGVyLmdlb2NvZGUoXG4gICAgICAgICAgICAgICAgICAgIHsgYWRkcmVzczogY2l0eSB9LFxuICAgICAgICAgICAgICAgICAgICBhc3luYyAocmVzdWx0cywgc3RhdHVzKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnR2VvY29kaW5nIHJlc3BvbnNlOicsIHsgc3RhdHVzLCByZXN1bHRzTGVuZ3RoOiByZXN1bHRzPy5sZW5ndGggfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdGF0dXMgIT09ICdPSycgfHwgIXJlc3VsdHM/LlswXT8uZ2VvbWV0cnk/LmxvY2F0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignR2VvY29kaW5nIGZhaWxlZDonLCBzdGF0dXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEVycm9yKGBDb3VsZCBub3QgZmluZCBsb2NhdGlvbiBmb3IgJHtjaXR5fWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldElzTG9hZGluZyhmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxvY2F0aW9uID0gcmVzdWx0c1swXS5nZW9tZXRyeS5sb2NhdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdNYXAgPSBuZXcgTWFwKG1hcFJlZi5jdXJyZW50ISwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZW50ZXI6IGxvY2F0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB6b29tOiAxMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFwSWQ6ICcyZDYwNGFmMDRhN2M3ZmE4JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRNYXAobmV3TWFwKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0luZm9XaW5kb3cgPSBuZXcgZ29vZ2xlLm1hcHMuSW5mb1dpbmRvdyh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heFdpZHRoOiA0MDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRJbmZvV2luZG93KG5ld0luZm9XaW5kb3cpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY3JlYXRlQ2l0eUluZm9XaW5kb3dDb250ZW50ID0gYXN5bmMgKGNpdHk6IHN0cmluZywgbG9jYXRpb246IGdvb2dsZS5tYXBzLkxhdExuZykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2VhcmNoIGZvciB0aGUgY2l0eSB0byBnZXQgaXRzIGRldGFpbHMgaW5jbHVkaW5nIHBob3Rvc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY2l0eVBsYWNlID0gYXdhaXQgc2VhcmNoUGxhY2VCeVRleHQoY2l0eSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhdGl0dWRlOiBsb2NhdGlvbi5sYXQoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb25naXR1ZGU6IGxvY2F0aW9uLmxuZygpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjaXR5UGxhY2UpIHJldHVybiBudWxsO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDcmVhdGUgYSBwaG90byBjYXJvdXNlbCBIVE1MXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwaG90b0Nhcm91c2VsID0gY2l0eVBsYWNlLnBob3RvcyAmJiBjaXR5UGxhY2UucGhvdG9zLmxlbmd0aCA+IDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInJlbGF0aXZlIHctZnVsbFwiIHN0eWxlPVwiaGVpZ2h0OiAyMDBweDtcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXJvdXNlbC1jb250YWluZXIgb3ZlcmZsb3ctaGlkZGVuIHctZnVsbCBoLWZ1bGxcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2Fyb3VzZWwtdHJhY2sgZmxleCB0cmFuc2l0aW9uLXRyYW5zZm9ybSBkdXJhdGlvbi01MDBcIiBzdHlsZT1cImhlaWdodDogMTAwJTtcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtjaXR5UGxhY2UucGhvdG9zLnNsaWNlKDAsIDUpLm1hcCgocGhvdG8sIGluZGV4KSA9PiBgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2Fyb3VzZWwtc2xpZGUgdy1mdWxsIGgtZnVsbCBmbGV4LW5vbmVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cImh0dHBzOi8vcGxhY2VzLmdvb2dsZWFwaXMuY29tL3YxLyR7cGhvdG8ubmFtZX0vbWVkaWE/bWF4SGVpZ2h0UHg9MzQwJm1heFdpZHRoUHg9MzQwJmtleT0ke2FwaUtleX1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbHQ9XCIke2NpdHl9XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJ3LWZ1bGwgaC1mdWxsIG9iamVjdC1jb3ZlclwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgKS5qb2luKCcnKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPVwid2luZG93LnByZXZTbGlkZSgpXCIgY2xhc3M9XCJhYnNvbHV0ZSBsZWZ0LTIgdG9wLTEvMiB0cmFuc2Zvcm0gLXRyYW5zbGF0ZS15LTEvMiBiZy13aGl0ZS84MCByb3VuZGVkLWZ1bGwgcC0xIHNoYWRvdy1tZCBob3ZlcjpiZy13aGl0ZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGZpbGw9XCJub25lXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIHN0cm9rZS13aWR0aD1cIjEuNVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIGNsYXNzPVwidy01IGgtNVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBzdHJva2UtbGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIiBkPVwiTTE1Ljc1IDE5LjVMOC4yNSAxMmw3LjUtNy41XCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPVwid2luZG93Lm5leHRTbGlkZSgpXCIgY2xhc3M9XCJhYnNvbHV0ZSByaWdodC0yIHRvcC0xLzIgdHJhbnNmb3JtIC10cmFuc2xhdGUteS0xLzIgYmctd2hpdGUvODAgcm91bmRlZC1mdWxsIHAtMSBzaGFkb3ctbWQgaG92ZXI6Ymctd2hpdGVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBmaWxsPVwibm9uZVwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBzdHJva2Utd2lkdGg9XCIxLjVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBjbGFzcz1cInctNSBoLTVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCIgZD1cIk04LjI1IDQuNWw3LjUgNy41LTcuNSA3LjVcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYWJzb2x1dGUgYm90dG9tLTIgbGVmdC0wIHJpZ2h0LTAgZmxleCBqdXN0aWZ5LWNlbnRlciBnYXAtMVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7Y2l0eVBsYWNlLnBob3Rvcy5zbGljZSgwLCA1KS5tYXAoKF8sIGluZGV4KSA9PiBgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz1cIndpbmRvdy5nb1RvU2xpZGUoJHtpbmRleH0pXCIgY2xhc3M9XCJ3LTIgaC0yIHJvdW5kZWQtZnVsbCBiZy13aGl0ZS84MCBob3ZlcjpiZy13aGl0ZSBzaGFkb3ctc20gY2Fyb3VzZWwtZG90XCIgZGF0YS1pbmRleD1cIiR7aW5kZXh9XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGApLmpvaW4oJycpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICcnO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGQgY2Fyb3VzZWwgY29udHJvbCBmdW5jdGlvbnMgdG8gd2luZG93XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2l0eVBsYWNlLnBob3RvcyAmJiBjaXR5UGxhY2UucGhvdG9zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBudW1TbGlkZXMgPSBNYXRoLm1pbihjaXR5UGxhY2UucGhvdG9zLmxlbmd0aCwgNSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmN1cnJlbnRTbGlkZSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LnVwZGF0ZUNhcm91c2VsID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0cmFjayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJvdXNlbC10cmFjaycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0cmFjayBhcyBIVE1MRWxlbWVudCkuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZVgoLSR7d2luZG93LmN1cnJlbnRTbGlkZSAqIDEwMH0lKWA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgZG90c1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNhcm91c2VsLWRvdCcpLmZvckVhY2goKGRvdCwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXggPT09IHdpbmRvdy5jdXJyZW50U2xpZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG90LmNsYXNzTGlzdC5hZGQoJ2JnLXdoaXRlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvdC5jbGFzc0xpc3QucmVtb3ZlKCdiZy13aGl0ZS84MCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvdC5jbGFzc0xpc3QucmVtb3ZlKCdiZy13aGl0ZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb3QuY2xhc3NMaXN0LmFkZCgnYmctd2hpdGUvODAnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubmV4dFNsaWRlID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuY3VycmVudFNsaWRlID0gKHdpbmRvdy5jdXJyZW50U2xpZGUgKyAxKSAlIG51bVNsaWRlcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LnVwZGF0ZUNhcm91c2VsKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5wcmV2U2xpZGUgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5jdXJyZW50U2xpZGUgPSAod2luZG93LmN1cnJlbnRTbGlkZSAtIDEgKyBudW1TbGlkZXMpICUgbnVtU2xpZGVzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cudXBkYXRlQ2Fyb3VzZWwoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmdvVG9TbGlkZSA9IChpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuY3VycmVudFNsaWRlID0gaW5kZXg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy51cGRhdGVDYXJvdXNlbCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImJnLXdoaXRlIHJvdW5kZWQtbGcgc2hhZG93LXNtXCIgc3R5bGU9XCJtYXgtd2lkdGg6IDM0MHB4O1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke3Bob3RvQ2Fyb3VzZWx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwLTRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMiBjbGFzcz1cInRleHQteGwgZm9udC1zZW1pYm9sZCB0ZXh0LWdyYXktOTAwIG1iLTJcIj4ke2NpdHl9PC9oMj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7Y2l0eVBsYWNlLmZvcm1hdHRlZEFkZHJlc3MgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBgPHAgY2xhc3M9XCJ0ZXh0LXNtIHRleHQtZ3JheS01MDAgbWItMlwiPiR7Y2l0eVBsYWNlLmZvcm1hdHRlZEFkZHJlc3N9PC9wPmBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICcnfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBjaXR5IGluZm8gd2luZG93OicsIGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBhIG1hcmtlciBmb3IgdGhlIGNpdHlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjaXR5TWFya2VyID0gbmV3IGdvb2dsZS5tYXBzLm1hcmtlci5BZHZhbmNlZE1hcmtlckVsZW1lbnQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXA6IG5ld01hcCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGxvY2F0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogY2l0eVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWRkIGNsaWNrIGxpc3RlbmVyIHRvIHRoZSBtYXJrZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaXR5TWFya2VyLmFkZExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluZm9XaW5kb3cpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBjcmVhdGVDaXR5SW5mb1dpbmRvd0NvbnRlbnQoY2l0eSwgbG9jYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmZvV2luZG93LnNldENvbnRlbnQoYXdhaXQgY29udGVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5mb1dpbmRvdy5vcGVuKG5ld01hcCwgY2l0eU1hcmtlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtlcnMuc2V0KGNpdHksIGNpdHlNYXJrZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFkZCBjbGljayBsaXN0ZW5lciBmb3IgZnV0dXJlIGludGVyYWN0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2l0eU1hcmtlci5hZGRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCBjcmVhdGVDaXR5SW5mb1dpbmRvd0NvbnRlbnQoY2l0eSwgbG9jYXRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29udGVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3SW5mb1dpbmRvdy5zZXRDb250ZW50KGNvbnRlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3SW5mb1dpbmRvdy5vcGVuKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmNob3I6IGNpdHlNYXJrZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFwOiBuZXdNYXBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNldHRpbmcgdXAgbWFwOicsIGVycik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0RXJyb3IoJ0ZhaWxlZCB0byBpbml0aWFsaXplIG1hcCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluaXRpYWxpemluZyBtYXA6JywgZXJyKTtcbiAgICAgICAgICAgICAgICBzZXRFcnJvcignRmFpbGVkIHRvIGluaXRpYWxpemUgbWFwJyk7XG4gICAgICAgICAgICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBpbml0TWFwKCk7XG4gICAgfSwgW2NpdHksIHNjcmlwdExvYWRlZCwgYXBpS2V5XSk7XG5cbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBpZiAoIW1hcCkgcmV0dXJuO1xuXG4gICAgICAgIHdpbmRvdy5hZGRQbGFjZVRvTWFwID0gYXN5bmMgKHBsYWNlRGF0YSkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAvLyBJbXBvcnQgYm90aCBtYXJrZXIgYW5kIHBpbiBsaWJyYXJpZXNcbiAgICAgICAgICAgICAgICBjb25zdCBbeyBBZHZhbmNlZE1hcmtlckVsZW1lbnQgfSwgeyBQaW5FbGVtZW50IH1dID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgICAgICAgICAgICAgICBnb29nbGUubWFwcy5pbXBvcnRMaWJyYXJ5KFwibWFya2VyXCIpIGFzIFByb21pc2U8Z29vZ2xlLm1hcHMuTWFya2VyTGlicmFyeT4sXG4gICAgICAgICAgICAgICAgICAgIGdvb2dsZS5tYXBzLmltcG9ydExpYnJhcnkoXCJtYXJrZXJcIikgYXMgUHJvbWlzZTxnb29nbGUubWFwcy5NYXJrZXJMaWJyYXJ5PlxuICAgICAgICAgICAgICAgIF0pO1xuXG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGEgY3VzdG9tIHBpbiBlbGVtZW50XG4gICAgICAgICAgICAgICAgY29uc3QgcGluRWxlbWVudCA9IG5ldyBnb29nbGUubWFwcy5tYXJrZXIuUGluRWxlbWVudCh7XG4gICAgICAgICAgICAgICAgICAgIC8vIGJhY2tncm91bmQ6IFwiI0ZCQkMwNFwiLFxuICAgICAgICAgICAgICAgICAgICAvLyBib3JkZXJDb2xvcjogXCIjRUE0MzM1XCIsXG4gICAgICAgICAgICAgICAgICAgIC8vIGdseXBoQ29sb3I6IFwiIzAwMDAwMFwiLFxuICAgICAgICAgICAgICAgICAgICBzY2FsZTogMVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgbWFya2VyID0gbmV3IGdvb2dsZS5tYXBzLm1hcmtlci5BZHZhbmNlZE1hcmtlckVsZW1lbnQoe1xuICAgICAgICAgICAgICAgICAgICBtYXAsXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYXQ6IHBsYWNlRGF0YS5sYXRpdHVkZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxuZzogcGxhY2VEYXRhLmxvbmdpdHVkZVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogcGxhY2VEYXRhLnRpdGxlLFxuICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBwaW5FbGVtZW50LmVsZW1lbnQsXG4gICAgICAgICAgICAgICAgICAgIGdtcERyYWdnYWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAvLyBBZGQgY2xpY2sgbGlzdGVuZXJcbiAgICAgICAgICAgICAgICBtYXJrZXIuYWRkTGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAocGxhY2VEYXRhLnBsYWNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBZb3VyIGV4aXN0aW5nIGNsaWNrIGhhbmRsZXIgbG9naWNcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBjcmVhdGVQbGFjZUluZm9XaW5kb3dDb250ZW50KHBsYWNlRGF0YS5wbGFjZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29udGVudCAmJiBpbmZvV2luZG93KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5mb1dpbmRvdy5zZXRDb250ZW50KGNvbnRlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZm9XaW5kb3cub3BlbihtYXAsIG1hcmtlcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIC8vIFN0b3JlIHRoZSBtYXJrZXIgcmVmZXJlbmNlXG4gICAgICAgICAgICAgICAgbWFya2Vycy5zZXQocGxhY2VEYXRhLnRpdGxlIHx8ICd1bm5hbWVkJywgbWFya2VyKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGFkZGluZyBwbGFjZSBtYXJrZXI6JywgZXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB3aW5kb3cuY2xlYXJQbGFjZU1hcmtlcnMgPSAoKSA9PiB7XG4gICAgICAgICAgICBtYXJrZXJzLmZvckVhY2gobWFya2VyID0+IHtcbiAgICAgICAgICAgICAgICBtYXJrZXIuc2V0TWFwKG51bGwpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBtYXJrZXJzLmNsZWFyKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIGRlbGV0ZSB3aW5kb3cuYWRkUGxhY2VUb01hcDtcbiAgICAgICAgICAgIGRlbGV0ZSB3aW5kb3cuY2xlYXJQbGFjZU1hcmtlcnM7XG4gICAgICAgIH07XG4gICAgfSwgW21hcCwgaW5mb1dpbmRvd10pO1xuXG4gICAgY29uc3QgY3JlYXRlUGxhY2VJbmZvV2luZG93Q29udGVudCA9IChwbGFjZTogUGxhY2UpID0+IHtcbiAgICAgICAgY29uc3QgcGhvdG9VcmwgPSBwbGFjZS5waG90b3MgJiYgcGxhY2UucGhvdG9zWzBdIFxuICAgICAgICAgICAgPyBgaHR0cHM6Ly9wbGFjZXMuZ29vZ2xlYXBpcy5jb20vdjEvJHtwbGFjZS5waG90b3NbMF0ubmFtZX0vbWVkaWE/bWF4SGVpZ2h0UHg9MjAwJm1heFdpZHRoUHg9MzAwJmtleT0ke2FwaUtleX1gXG4gICAgICAgICAgICA6ICcnO1xuXG4gICAgICAgIHJldHVybiBgXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYmctd2hpdGUgcm91bmRlZC1sZyBzaGFkb3ctc21cIiBzdHlsZT1cIm1heC13aWR0aDogMzAwcHg7XCI+XG4gICAgICAgICAgICAgICAgJHtwaG90b1VybCA/IGBcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT1cImhlaWdodDogMTUwcHg7IHdpZHRoOiAxMDAlO1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCIke3Bob3RvVXJsfVwiIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsdD1cIiR7dHlwZW9mIHBsYWNlLmRpc3BsYXlOYW1lID09PSAnc3RyaW5nJyA/IHBsYWNlLmRpc3BsYXlOYW1lIDogcGxhY2UuZGlzcGxheU5hbWUudGV4dH1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPVwid2lkdGg6IDEwMCU7IGhlaWdodDogMTAwJTsgb2JqZWN0LWZpdDogY292ZXI7IGJvcmRlci10b3AtbGVmdC1yYWRpdXM6IDAuNXJlbTsgYm9yZGVyLXRvcC1yaWdodC1yYWRpdXM6IDAuNXJlbTtcIlxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgYCA6ICcnfVxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwLTNcIj5cbiAgICAgICAgICAgICAgICAgICAgPGgzIGNsYXNzPVwidGV4dC1sZyBmb250LXNlbWlib2xkIHRleHQtZ3JheS05MDAgbWItMVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgJHt0eXBlb2YgcGxhY2UuZGlzcGxheU5hbWUgPT09ICdzdHJpbmcnIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gcGxhY2UuZGlzcGxheU5hbWUgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBwbGFjZS5kaXNwbGF5TmFtZS50ZXh0fVxuICAgICAgICAgICAgICAgICAgICA8L2gzPlxuICAgICAgICAgICAgICAgICAgICAke3BsYWNlLnByaW1hcnlUeXBlRGlzcGxheU5hbWUgXG4gICAgICAgICAgICAgICAgICAgICAgICA/IGA8ZGl2IGNsYXNzPVwidGV4dC1zbSB0ZXh0LWdyYXktNjAwIG1iLTFcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAke3BsYWNlLnByaW1hcnlUeXBlRGlzcGxheU5hbWUudGV4dH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5gXG4gICAgICAgICAgICAgICAgICAgICAgICA6ICcnfVxuICAgICAgICAgICAgICAgICAgICAke3BsYWNlLmZvcm1hdHRlZEFkZHJlc3MgXG4gICAgICAgICAgICAgICAgICAgICAgICA/IGA8cCBjbGFzcz1cInRleHQtc20gdGV4dC1ncmF5LTUwMFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7cGxhY2UuZm9ybWF0dGVkQWRkcmVzc31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+YFxuICAgICAgICAgICAgICAgICAgICAgICAgOiAnJ31cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICBgO1xuICAgIH07XG5cbiAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInJlbGF0aXZlIHctZnVsbCBoLWZ1bGwgbWluLWgtWzM0MHB4XVwiPlxuICAgICAgICAgICAge2FwaUtleSAmJiAoXG4gICAgICAgICAgICAgICAgPFNjcmlwdFxuICAgICAgICAgICAgICAgICAgICBzcmM9e2BodHRwczovL21hcHMuZ29vZ2xlYXBpcy5jb20vbWFwcy9hcGkvanM/a2V5PSR7YXBpS2V5fSZsaWJyYXJpZXM9cGxhY2VzLG1hcmtlciZ2PWJldGEmY2FsbGJhY2s9RnVuY3Rpb24ucHJvdG90eXBlYH1cbiAgICAgICAgICAgICAgICAgICAgc3RyYXRlZ3k9XCJhZnRlckludGVyYWN0aXZlXCJcbiAgICAgICAgICAgICAgICAgICAgb25Mb2FkPXsoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnR29vZ2xlIE1hcHMgc2NyaXB0IGxvYWRlZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0U2NyaXB0TG9hZGVkKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICBvbkVycm9yPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGxvYWQgR29vZ2xlIE1hcHMgc2NyaXB0OicsIGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0RXJyb3IoJ0ZhaWxlZCB0byBsb2FkIEdvb2dsZSBNYXBzJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApfVxuICAgICAgICAgICAge2Vycm9yICYmIChcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFic29sdXRlIGluc2V0LTAgZmxleCBpdGVtcy1jZW50ZXIganVzdGlmeS1jZW50ZXIgYmctZ3JheS0xMDAgdGV4dC1yZWQtNTAwIHAtNCB0ZXh0LWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICB7ZXJyb3J9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApfVxuICAgICAgICAgICAge2lzTG9hZGluZyAmJiAhZXJyb3IgJiYgKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJzb2x1dGUgaW5zZXQtMCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBiZy1ncmF5LTEwMFwiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInRleHQtZ3JheS02MDBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIExvYWRpbmcgbWFwLi4uXG4gICAgICAgICAgICAgICAgICAgICAgICB7IWFwaUtleSAmJiA8ZGl2PldhaXRpbmcgZm9yIEFQSSBrZXkuLi48L2Rpdj59XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDxkaXYgcmVmPXttYXBSZWZ9IGNsYXNzTmFtZT1cInctZnVsbCBoLWZ1bGxcIiAvPlxuICAgICAgICAgICAgey8qIHtzZWxlY3RlZFBsYWNlICYmIChcbiAgICAgICAgICAgICAgICA8U21hbGxQbGFjZUNhcmQgXG4gICAgICAgICAgICAgICAgICAgIHBsYWNlPXtzZWxlY3RlZFBsYWNlfSBcbiAgICAgICAgICAgICAgICAgICAgb25DbG9zZT17KCkgPT4gc2V0U2VsZWN0ZWRQbGFjZShudWxsKX0gXG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICl9ICovfVxuICAgICAgICA8L2Rpdj5cbiAgICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgTWFwQ29tcG9uZW50OyJdLCJuYW1lcyI6WyJSZWFjdCIsInVzZUVmZmVjdCIsInVzZVJlZiIsInVzZVN0YXRlIiwiU2NyaXB0Iiwic2VhcmNoUGxhY2VCeVRleHQiLCJNYXBDb21wb25lbnQiLCJjaXR5IiwiYXBpS2V5IiwibWFwUmVmIiwibWFwIiwic2V0TWFwIiwibWFya2VycyIsInNldE1hcmtlcnMiLCJNYXAiLCJpbmZvV2luZG93Iiwic2V0SW5mb1dpbmRvdyIsImVycm9yIiwic2V0RXJyb3IiLCJpc0xvYWRpbmciLCJzZXRJc0xvYWRpbmciLCJzY3JpcHRMb2FkZWQiLCJzZXRTY3JpcHRMb2FkZWQiLCJzZWxlY3RlZFBsYWNlIiwic2V0U2VsZWN0ZWRQbGFjZSIsImNvbnNvbGUiLCJsb2ciLCJhcGlLZXlMZW5ndGgiLCJsZW5ndGgiLCJjdXJyZW50IiwiaW5pdE1hcCIsIndpbmRvdyIsImdvb2dsZSIsIm1hcHMiLCJpbXBvcnRMaWJyYXJ5IiwiQWR2YW5jZWRNYXJrZXJFbGVtZW50IiwiZ2VvY29kZXIiLCJHZW9jb2RlciIsImdlb2NvZGUiLCJhZGRyZXNzIiwicmVzdWx0cyIsInN0YXR1cyIsInJlc3VsdHNMZW5ndGgiLCJnZW9tZXRyeSIsImxvY2F0aW9uIiwibmV3TWFwIiwiY2VudGVyIiwiem9vbSIsIm1hcElkIiwibmV3SW5mb1dpbmRvdyIsIkluZm9XaW5kb3ciLCJtYXhXaWR0aCIsImNyZWF0ZUNpdHlJbmZvV2luZG93Q29udGVudCIsImNpdHlQbGFjZSIsImxhdGl0dWRlIiwibGF0IiwibG9uZ2l0dWRlIiwibG5nIiwicGhvdG9DYXJvdXNlbCIsInBob3RvcyIsInNsaWNlIiwicGhvdG8iLCJpbmRleCIsIm5hbWUiLCJqb2luIiwiXyIsIm51bVNsaWRlcyIsIk1hdGgiLCJtaW4iLCJjdXJyZW50U2xpZGUiLCJ1cGRhdGVDYXJvdXNlbCIsInRyYWNrIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwic3R5bGUiLCJ0cmFuc2Zvcm0iLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImRvdCIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsIm5leHRTbGlkZSIsInByZXZTbGlkZSIsImdvVG9TbGlkZSIsImZvcm1hdHRlZEFkZHJlc3MiLCJjaXR5TWFya2VyIiwibWFya2VyIiwicG9zaXRpb24iLCJ0aXRsZSIsImFkZExpc3RlbmVyIiwiY29udGVudCIsInNldENvbnRlbnQiLCJvcGVuIiwic2V0IiwiYW5jaG9yIiwiZXJyIiwiYWRkUGxhY2VUb01hcCIsInBsYWNlRGF0YSIsIlBpbkVsZW1lbnQiLCJQcm9taXNlIiwiYWxsIiwicGluRWxlbWVudCIsInNjYWxlIiwiZWxlbWVudCIsImdtcERyYWdnYWJsZSIsInBsYWNlIiwiY3JlYXRlUGxhY2VJbmZvV2luZG93Q29udGVudCIsImNsZWFyUGxhY2VNYXJrZXJzIiwiY2xlYXIiLCJwaG90b1VybCIsImRpc3BsYXlOYW1lIiwidGV4dCIsInByaW1hcnlUeXBlRGlzcGxheU5hbWUiLCJkaXYiLCJjbGFzc05hbWUiLCJzcmMiLCJzdHJhdGVneSIsIm9uTG9hZCIsIm9uRXJyb3IiLCJlIiwicmVmIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./components/map-component.tsx\n");

/***/ }),

/***/ "./managers/types.ts":
/*!***************************!*\
  !*** ./managers/types.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BUDGET_DESCRIPTIONS: () => (/* binding */ BUDGET_DESCRIPTIONS),\n/* harmony export */   BUDGET_OPTIONS: () => (/* binding */ BUDGET_OPTIONS),\n/* harmony export */   BudgetLevel: () => (/* binding */ BudgetLevel),\n/* harmony export */   ComponentType: () => (/* binding */ ComponentType),\n/* harmony export */   LANGUAGE_LABELS: () => (/* binding */ LANGUAGE_LABELS),\n/* harmony export */   LANGUAGE_OPTIONS: () => (/* binding */ LANGUAGE_OPTIONS),\n/* harmony export */   PREFERENCE_ICONS: () => (/* binding */ PREFERENCE_ICONS),\n/* harmony export */   PREFERENCE_OPTIONS: () => (/* binding */ PREFERENCE_OPTIONS),\n/* harmony export */   SupportedLanguage: () => (/* binding */ SupportedLanguage),\n/* harmony export */   TravelPreference: () => (/* binding */ TravelPreference)\n/* harmony export */ });\n///Users/terrancehah/Documents/terrancehah.com/managers/types.ts\nvar ComponentType;\n(function(ComponentType) {\n    ComponentType[\"DatePicker\"] = \"DatePicker\";\n    ComponentType[\"PreferenceSelector\"] = \"PreferenceSelector\";\n    ComponentType[\"BudgetSelector\"] = \"BudgetSelector\";\n    ComponentType[\"LanguageSelector\"] = \"LanguageSelector\";\n    ComponentType[\"PlaceCard\"] = \"PlaceCard\";\n    ComponentType[\"TransportSelector\"] = \"TransportSelector\";\n    ComponentType[\"Carousel\"] = \"Carousel\";\n    ComponentType[\"DetailsCard\"] = \"DetailsCard\";\n})(ComponentType || (ComponentType = {}));\nvar BudgetLevel;\n(function(BudgetLevel) {\n    BudgetLevel[\"Budget\"] = \"$\";\n    BudgetLevel[\"Moderate\"] = \"$$\";\n    BudgetLevel[\"Luxury\"] = \"$$$\";\n    BudgetLevel[\"UltraLuxury\"] = \"$$$$\";\n})(BudgetLevel || (BudgetLevel = {}));\nvar TravelPreference;\n(function(TravelPreference) {\n    TravelPreference[\"Culture\"] = \"Culture and Heritage\";\n    TravelPreference[\"Nature\"] = \"Nature\";\n    TravelPreference[\"Food\"] = \"Foodie\";\n    TravelPreference[\"Relaxation\"] = \"Leisure\";\n    TravelPreference[\"Adventure\"] = \"Adventure\";\n    TravelPreference[\"Shopping\"] = \"Arts & Museum\";\n})(TravelPreference || (TravelPreference = {}));\nvar SupportedLanguage;\n(function(SupportedLanguage) {\n    SupportedLanguage[\"English\"] = \"English\";\n    SupportedLanguage[\"Malay\"] = \"Malay (Bahasa Melayu)\";\n    SupportedLanguage[\"Spanish\"] = \"Espanol\";\n    SupportedLanguage[\"French\"] = \"Francais\";\n    SupportedLanguage[\"German\"] = \"Deutsch\";\n    SupportedLanguage[\"Italian\"] = \"Italiano\";\n    SupportedLanguage[\"Czech\"] = \"Czech (Cestina)\";\n    SupportedLanguage[\"SimplifiedChinese\"] = \"Simplified Chinese ()\";\n    SupportedLanguage[\"TraditionalChinese\"] = \"Traditional Chinese ()\";\n    SupportedLanguage[\"Japanese\"] = \"Japanese ()\";\n    SupportedLanguage[\"Korean\"] = \"Korean ()\";\n})(SupportedLanguage || (SupportedLanguage = {}));\nconst BUDGET_DESCRIPTIONS = {\n    [\"$\"]: \"Budget-friendly options ($)\",\n    [\"$$\"]: \"Mid-range options ($$)\",\n    [\"$$$\"]: \"High-end options ($$$)\",\n    [\"$$$$\"]: \"Ultra luxury options ($$$$)\"\n};\nconst PREFERENCE_ICONS = {\n    [\"Culture and Heritage\"]: \"\\uD83C\\uDF8F\",\n    [\"Nature\"]: \"\\uD83C\\uDF40\",\n    [\"Foodie\"]: \"\\uD83C\\uDF71\",\n    [\"Leisure\"]: \"\\uD83C\\uDF07\",\n    [\"Adventure\"]: \"\\uD83E\\uDE82\",\n    [\"Arts & Museum\"]: \"\\uD83C\\uDFA8\"\n};\nconst LANGUAGE_LABELS = {\n    [\"English\"]: \"English\",\n    [\"Malay (Bahasa Melayu)\"]: \"Malay (Bahasa Melayu)\",\n    [\"Espanol\"]: \"Espanol\",\n    [\"Francais\"]: \"Francais\",\n    [\"Deutsch\"]: \"Deutsch\",\n    [\"Italiano\"]: \"Italiano\",\n    [\"Czech (Cestina)\"]: \"Czech (Cestina)\",\n    [\"Simplified Chinese ()\"]: \"Simplified Chinese ()\",\n    [\"Traditional Chinese ()\"]: \"Traditional Chinese ()\",\n    [\"Japanese ()\"]: \"Japanese ()\",\n    [\"Korean ()\"]: \"Korean ()\"\n};\nconst BUDGET_OPTIONS = [\n    {\n        value: \"$\",\n        label: \"Budget\",\n        description: \"Budget-friendly options with basic amenities\"\n    },\n    {\n        value: \"$$\",\n        label: \"Moderate\",\n        description: \"Mid-range options with good value\"\n    },\n    {\n        value: \"$$$\",\n        label: \"Luxury\",\n        description: \"High-end options with premium services\"\n    },\n    {\n        value: \"$$$$\",\n        label: \"Ultra Luxury\",\n        description: \"Exclusive luxury experiences\"\n    }\n];\nconst LANGUAGE_OPTIONS = Object.entries(SupportedLanguage).map(([key, value])=>({\n        value,\n        label: LANGUAGE_LABELS[value]\n    }));\nconst PREFERENCE_OPTIONS = [\n    {\n        value: \"Culture and Heritage\",\n        label: \"Culture and Heritage\",\n        icon: PREFERENCE_ICONS[\"Culture and Heritage\"]\n    },\n    {\n        value: \"Nature\",\n        label: \"Nature\",\n        icon: PREFERENCE_ICONS[\"Nature\"]\n    },\n    {\n        value: \"Foodie\",\n        label: \"Foodie\",\n        icon: PREFERENCE_ICONS[\"Foodie\"]\n    },\n    {\n        value: \"Leisure\",\n        label: \"Leisure\",\n        icon: PREFERENCE_ICONS[\"Leisure\"]\n    },\n    {\n        value: \"Adventure\",\n        label: \"Adventure\",\n        icon: PREFERENCE_ICONS[\"Adventure\"]\n    },\n    {\n        value: \"Arts & Museum\",\n        label: \"Arts & Museum\",\n        icon: PREFERENCE_ICONS[\"Arts & Museum\"]\n    }\n];\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9tYW5hZ2Vycy90eXBlcy50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7O0FBQUEsZ0VBQWdFOztVQW1CcERBOzs7Ozs7Ozs7R0FBQUEsa0JBQUFBOztVQVdBQzs7Ozs7R0FBQUEsZ0JBQUFBOztVQU9BQzs7Ozs7OztHQUFBQSxxQkFBQUE7O1VBU0FDOzs7Ozs7Ozs7Ozs7R0FBQUEsc0JBQUFBO0FBY0wsTUFBTUMsc0JBQW1EO0lBQzVELEtBQW9CLEVBQUU7SUFDdEIsTUFBc0IsRUFBRTtJQUN4QixPQUFvQixFQUFFO0lBQ3RCLFFBQXlCLEVBQUU7QUFDL0IsRUFBRTtBQUVLLE1BQU1DLG1CQUFxRDtJQUM5RCx3QkFBMEIsRUFBRTtJQUM1QixVQUF5QixFQUFFO0lBQzNCLFVBQXVCLEVBQUU7SUFDekIsV0FBNkIsRUFBRTtJQUMvQixhQUE0QixFQUFFO0lBQzlCLGlCQUEyQixFQUFFO0FBQ2pDLEVBQUU7QUFFSyxNQUFNQyxrQkFBcUQ7SUFDOUQsV0FBMkIsRUFBRTtJQUM3Qix5QkFBeUIsRUFBRTtJQUMzQixXQUEyQixFQUFFO0lBQzdCLFlBQTBCLEVBQUU7SUFDNUIsV0FBMEIsRUFBRTtJQUM1QixZQUEyQixFQUFFO0lBQzdCLG1CQUF5QixFQUFFO0lBQzNCLDZCQUFxQyxFQUFFO0lBQ3ZDLDhCQUFzQyxFQUFFO0lBQ3hDLGtCQUE0QixFQUFFO0lBQzlCLGdCQUEwQixFQUFFO0FBQ2hDLEVBQUU7QUFFSyxNQUFNQyxpQkFBaUI7SUFDMUI7UUFBRUMsS0FBSztRQUFzQkMsT0FBTztRQUFVQyxhQUFhO0lBQStDO0lBQzFHO1FBQUVGLEtBQUs7UUFBd0JDLE9BQU87UUFBWUMsYUFBYTtJQUFvQztJQUNuRztRQUFFRixLQUFLO1FBQXNCQyxPQUFPO1FBQVVDLGFBQWE7SUFBeUM7SUFDcEc7UUFBRUYsS0FBSztRQUEyQkMsT0FBTztRQUFnQkMsYUFBYTtJQUErQjtDQUN4RyxDQUFDO0FBRUssTUFBTUMsbUJBQW1CQyxPQUFPQyxPQUFPLENBQUNWLG1CQUFtQlcsR0FBRyxDQUFDLENBQUMsQ0FBQ0MsS0FBS1AsTUFBTSxHQUFNO1FBQ3JGQTtRQUNBQyxPQUFPSCxlQUFlLENBQUNFLE1BQTJCO0lBQ3RELElBQUk7QUFFRyxNQUFNUSxxQkFBcUI7SUFDOUI7UUFBRVIsS0FBSztRQUE0QkMsT0FBTztRQUF3QlEsTUFBTVosZ0JBQWdCLHdCQUEwQjtJQUFDO0lBQ25IO1FBQUVHLEtBQUs7UUFBMkJDLE9BQU87UUFBVVEsTUFBTVosZ0JBQWdCLFVBQXlCO0lBQUM7SUFDbkc7UUFBRUcsS0FBSztRQUF5QkMsT0FBTztRQUFVUSxNQUFNWixnQkFBZ0IsVUFBdUI7SUFBQztJQUMvRjtRQUFFRyxLQUFLO1FBQStCQyxPQUFPO1FBQVdRLE1BQU1aLGdCQUFnQixXQUE2QjtJQUFDO0lBQzVHO1FBQUVHLEtBQUs7UUFBOEJDLE9BQU87UUFBYVEsTUFBTVosZ0JBQWdCLGFBQTRCO0lBQUM7SUFDNUc7UUFBRUcsS0FBSztRQUE2QkMsT0FBTztRQUFpQlEsTUFBTVosZ0JBQWdCLGlCQUEyQjtJQUFDO0NBQ2pILENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90cmF2ZWwtcml6ei8uL21hbmFnZXJzL3R5cGVzLnRzP2NkOWIiXSwic291cmNlc0NvbnRlbnQiOlsiLy8vVXNlcnMvdGVycmFuY2VoYWgvRG9jdW1lbnRzL3RlcnJhbmNlaGFoLmNvbS9tYW5hZ2Vycy90eXBlcy50c1xuXG5pbXBvcnQgeyBNZXNzYWdlIGFzIEFpTWVzc2FnZSwgSlNPTlZhbHVlIH0gZnJvbSAnYWknO1xuaW1wb3J0IHsgUGxhY2UgfSBmcm9tICcuLi91dGlscy9wbGFjZXMtdXRpbHMnO1xuaW1wb3J0IHsgUmVhY3ROb2RlIH0gZnJvbSAncmVhY3QnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFRyYXZlbERldGFpbHMge1xuICAgIGRlc3RpbmF0aW9uPzogc3RyaW5nO1xuICAgIGRlc3RpbmF0aW9uTGF0PzogbnVtYmVyO1xuICAgIGRlc3RpbmF0aW9uTG5nPzogbnVtYmVyO1xuICAgIHN0YXJ0RGF0ZT86IHN0cmluZztcbiAgICBlbmREYXRlPzogc3RyaW5nO1xuICAgIGJ1ZGdldD86IEJ1ZGdldExldmVsO1xuICAgIHByZWZlcmVuY2VzPzogVHJhdmVsUHJlZmVyZW5jZVtdO1xuICAgIGxhbmd1YWdlPzogU3VwcG9ydGVkTGFuZ3VhZ2U7XG4gICAgdHJhbnNwb3J0Pzogc3RyaW5nW107XG4gICAgZGluaW5nPzogc3RyaW5nW107XG59XG5cbmV4cG9ydCBlbnVtIENvbXBvbmVudFR5cGUge1xuICAgIERhdGVQaWNrZXIgPSAnRGF0ZVBpY2tlcicsXG4gICAgUHJlZmVyZW5jZVNlbGVjdG9yID0gJ1ByZWZlcmVuY2VTZWxlY3RvcicsXG4gICAgQnVkZ2V0U2VsZWN0b3IgPSAnQnVkZ2V0U2VsZWN0b3InLFxuICAgIExhbmd1YWdlU2VsZWN0b3IgPSAnTGFuZ3VhZ2VTZWxlY3RvcicsXG4gICAgUGxhY2VDYXJkID0gJ1BsYWNlQ2FyZCcsXG4gICAgVHJhbnNwb3J0U2VsZWN0b3IgPSAnVHJhbnNwb3J0U2VsZWN0b3InLFxuICAgIENhcm91c2VsID0gJ0Nhcm91c2VsJyxcbiAgICBEZXRhaWxzQ2FyZCA9ICdEZXRhaWxzQ2FyZCdcbn1cblxuZXhwb3J0IGVudW0gQnVkZ2V0TGV2ZWwge1xuICAgIEJ1ZGdldCA9ICckJyxcbiAgICBNb2RlcmF0ZSA9ICckJCcsXG4gICAgTHV4dXJ5ID0gJyQkJCcsXG4gICAgVWx0cmFMdXh1cnkgPSAnJCQkJCdcbn1cblxuZXhwb3J0IGVudW0gVHJhdmVsUHJlZmVyZW5jZSB7XG4gICAgQ3VsdHVyZSA9ICdDdWx0dXJlIGFuZCBIZXJpdGFnZScsXG4gICAgTmF0dXJlID0gJ05hdHVyZScsXG4gICAgRm9vZCA9ICdGb29kaWUnLFxuICAgIFJlbGF4YXRpb24gPSAnTGVpc3VyZScsXG4gICAgQWR2ZW50dXJlID0gJ0FkdmVudHVyZScsXG4gICAgU2hvcHBpbmcgPSAnQXJ0cyAmIE11c2V1bSdcbn1cblxuZXhwb3J0IGVudW0gU3VwcG9ydGVkTGFuZ3VhZ2Uge1xuICAgIEVuZ2xpc2ggPSAnRW5nbGlzaCcsXG4gICAgTWFsYXkgPSAnTWFsYXkgKEJhaGFzYSBNZWxheXUpJyxcbiAgICBTcGFuaXNoID0gJ0VzcGFub2wnLFxuICAgIEZyZW5jaCA9ICdGcmFuY2FpcycsXG4gICAgR2VybWFuID0gJ0RldXRzY2gnLFxuICAgIEl0YWxpYW4gPSAnSXRhbGlhbm8nLFxuICAgIEN6ZWNoID0gJ0N6ZWNoIChDZXN0aW5hKScsXG4gICAgU2ltcGxpZmllZENoaW5lc2UgPSAnU2ltcGxpZmllZCBDaGluZXNlICjnroDkvZPkuK3mlocpJyxcbiAgICBUcmFkaXRpb25hbENoaW5lc2UgPSAnVHJhZGl0aW9uYWwgQ2hpbmVzZSAo57mB6auU5Lit5paHKScsXG4gICAgSmFwYW5lc2UgPSAnSmFwYW5lc2UgKOaXpeacrOiqniknLFxuICAgIEtvcmVhbiA9ICdLb3JlYW4gKO2VnOq1reyWtCknXG59XG5cbmV4cG9ydCBjb25zdCBCVURHRVRfREVTQ1JJUFRJT05TOiBSZWNvcmQ8QnVkZ2V0TGV2ZWwsIHN0cmluZz4gPSB7XG4gICAgW0J1ZGdldExldmVsLkJ1ZGdldF06ICdCdWRnZXQtZnJpZW5kbHkgb3B0aW9ucyAoJCknLFxuICAgIFtCdWRnZXRMZXZlbC5Nb2RlcmF0ZV06ICdNaWQtcmFuZ2Ugb3B0aW9ucyAoJCQpJyxcbiAgICBbQnVkZ2V0TGV2ZWwuTHV4dXJ5XTogJ0hpZ2gtZW5kIG9wdGlvbnMgKCQkJCknLFxuICAgIFtCdWRnZXRMZXZlbC5VbHRyYUx1eHVyeV06ICdVbHRyYSBsdXh1cnkgb3B0aW9ucyAoJCQkJCknXG59O1xuXG5leHBvcnQgY29uc3QgUFJFRkVSRU5DRV9JQ09OUzogUmVjb3JkPFRyYXZlbFByZWZlcmVuY2UsIHN0cmluZz4gPSB7XG4gICAgW1RyYXZlbFByZWZlcmVuY2UuQ3VsdHVyZV06ICfwn46PJyxcbiAgICBbVHJhdmVsUHJlZmVyZW5jZS5OYXR1cmVdOiAn8J+NgCcsXG4gICAgW1RyYXZlbFByZWZlcmVuY2UuRm9vZF06ICfwn42xJyxcbiAgICBbVHJhdmVsUHJlZmVyZW5jZS5SZWxheGF0aW9uXTogJ/CfjIcnLFxuICAgIFtUcmF2ZWxQcmVmZXJlbmNlLkFkdmVudHVyZV06ICfwn6qCJyxcbiAgICBbVHJhdmVsUHJlZmVyZW5jZS5TaG9wcGluZ106ICfwn46oJ1xufTtcblxuZXhwb3J0IGNvbnN0IExBTkdVQUdFX0xBQkVMUzogUmVjb3JkPFN1cHBvcnRlZExhbmd1YWdlLCBzdHJpbmc+ID0ge1xuICAgIFtTdXBwb3J0ZWRMYW5ndWFnZS5FbmdsaXNoXTogJ0VuZ2xpc2gnLFxuICAgIFtTdXBwb3J0ZWRMYW5ndWFnZS5NYWxheV06ICdNYWxheSAoQmFoYXNhIE1lbGF5dSknLFxuICAgIFtTdXBwb3J0ZWRMYW5ndWFnZS5TcGFuaXNoXTogJ0VzcGFub2wnLFxuICAgIFtTdXBwb3J0ZWRMYW5ndWFnZS5GcmVuY2hdOiAnRnJhbmNhaXMnLFxuICAgIFtTdXBwb3J0ZWRMYW5ndWFnZS5HZXJtYW5dOiAnRGV1dHNjaCcsXG4gICAgW1N1cHBvcnRlZExhbmd1YWdlLkl0YWxpYW5dOiAnSXRhbGlhbm8nLFxuICAgIFtTdXBwb3J0ZWRMYW5ndWFnZS5DemVjaF06ICdDemVjaCAoQ2VzdGluYSknLFxuICAgIFtTdXBwb3J0ZWRMYW5ndWFnZS5TaW1wbGlmaWVkQ2hpbmVzZV06ICdTaW1wbGlmaWVkIENoaW5lc2UgKOeugOS9k+S4reaWhyknLFxuICAgIFtTdXBwb3J0ZWRMYW5ndWFnZS5UcmFkaXRpb25hbENoaW5lc2VdOiAnVHJhZGl0aW9uYWwgQ2hpbmVzZSAo57mB6auU5Lit5paHKScsXG4gICAgW1N1cHBvcnRlZExhbmd1YWdlLkphcGFuZXNlXTogJ0phcGFuZXNlICjml6XmnKzoqp4pJyxcbiAgICBbU3VwcG9ydGVkTGFuZ3VhZ2UuS29yZWFuXTogJ0tvcmVhbiAo7ZWc6rWt7Ja0KSdcbn07XG5cbmV4cG9ydCBjb25zdCBCVURHRVRfT1BUSU9OUyA9IFtcbiAgICB7IHZhbHVlOiBCdWRnZXRMZXZlbC5CdWRnZXQsIGxhYmVsOiAnQnVkZ2V0JywgZGVzY3JpcHRpb246ICdCdWRnZXQtZnJpZW5kbHkgb3B0aW9ucyB3aXRoIGJhc2ljIGFtZW5pdGllcycgfSxcbiAgICB7IHZhbHVlOiBCdWRnZXRMZXZlbC5Nb2RlcmF0ZSwgbGFiZWw6ICdNb2RlcmF0ZScsIGRlc2NyaXB0aW9uOiAnTWlkLXJhbmdlIG9wdGlvbnMgd2l0aCBnb29kIHZhbHVlJyB9LFxuICAgIHsgdmFsdWU6IEJ1ZGdldExldmVsLkx1eHVyeSwgbGFiZWw6ICdMdXh1cnknLCBkZXNjcmlwdGlvbjogJ0hpZ2gtZW5kIG9wdGlvbnMgd2l0aCBwcmVtaXVtIHNlcnZpY2VzJyB9LFxuICAgIHsgdmFsdWU6IEJ1ZGdldExldmVsLlVsdHJhTHV4dXJ5LCBsYWJlbDogJ1VsdHJhIEx1eHVyeScsIGRlc2NyaXB0aW9uOiAnRXhjbHVzaXZlIGx1eHVyeSBleHBlcmllbmNlcycgfVxuXTtcblxuZXhwb3J0IGNvbnN0IExBTkdVQUdFX09QVElPTlMgPSBPYmplY3QuZW50cmllcyhTdXBwb3J0ZWRMYW5ndWFnZSkubWFwKChba2V5LCB2YWx1ZV0pID0+ICh7XG4gICAgdmFsdWUsXG4gICAgbGFiZWw6IExBTkdVQUdFX0xBQkVMU1t2YWx1ZSBhcyBTdXBwb3J0ZWRMYW5ndWFnZV1cbn0pKTtcblxuZXhwb3J0IGNvbnN0IFBSRUZFUkVOQ0VfT1BUSU9OUyA9IFtcbiAgICB7IHZhbHVlOiBUcmF2ZWxQcmVmZXJlbmNlLkN1bHR1cmUsIGxhYmVsOiAnQ3VsdHVyZSBhbmQgSGVyaXRhZ2UnLCBpY29uOiBQUkVGRVJFTkNFX0lDT05TW1RyYXZlbFByZWZlcmVuY2UuQ3VsdHVyZV0gfSxcbiAgICB7IHZhbHVlOiBUcmF2ZWxQcmVmZXJlbmNlLk5hdHVyZSwgbGFiZWw6ICdOYXR1cmUnLCBpY29uOiBQUkVGRVJFTkNFX0lDT05TW1RyYXZlbFByZWZlcmVuY2UuTmF0dXJlXSB9LFxuICAgIHsgdmFsdWU6IFRyYXZlbFByZWZlcmVuY2UuRm9vZCwgbGFiZWw6ICdGb29kaWUnLCBpY29uOiBQUkVGRVJFTkNFX0lDT05TW1RyYXZlbFByZWZlcmVuY2UuRm9vZF0gfSxcbiAgICB7IHZhbHVlOiBUcmF2ZWxQcmVmZXJlbmNlLlJlbGF4YXRpb24sIGxhYmVsOiAnTGVpc3VyZScsIGljb246IFBSRUZFUkVOQ0VfSUNPTlNbVHJhdmVsUHJlZmVyZW5jZS5SZWxheGF0aW9uXSB9LFxuICAgIHsgdmFsdWU6IFRyYXZlbFByZWZlcmVuY2UuQWR2ZW50dXJlLCBsYWJlbDogJ0FkdmVudHVyZScsIGljb246IFBSRUZFUkVOQ0VfSUNPTlNbVHJhdmVsUHJlZmVyZW5jZS5BZHZlbnR1cmVdIH0sXG4gICAgeyB2YWx1ZTogVHJhdmVsUHJlZmVyZW5jZS5TaG9wcGluZywgbGFiZWw6ICdBcnRzICYgTXVzZXVtJywgaWNvbjogUFJFRkVSRU5DRV9JQ09OU1tUcmF2ZWxQcmVmZXJlbmNlLlNob3BwaW5nXSB9XG5dO1xuXG5leHBvcnQgaW50ZXJmYWNlIENvbXBvbmVudFByb3BzIHtcbiAgICBbQ29tcG9uZW50VHlwZS5EYXRlUGlja2VyXToge1xuICAgICAgICBzdGFydERhdGU/OiBzdHJpbmc7XG4gICAgICAgIGVuZERhdGU/OiBzdHJpbmc7XG4gICAgICAgIG9uRGF0ZUNoYW5nZTogKHN0YXJ0RGF0ZTogc3RyaW5nLCBlbmREYXRlOiBzdHJpbmcpID0+IHZvaWQ7XG4gICAgfTtcbiAgICBbQ29tcG9uZW50VHlwZS5QcmVmZXJlbmNlU2VsZWN0b3JdOiB7XG4gICAgICAgIHNlbGVjdGVkUHJlZmVyZW5jZXM6IFRyYXZlbFByZWZlcmVuY2VbXTtcbiAgICAgICAgb25QcmVmZXJlbmNlQ2hhbmdlOiAocHJlZmVyZW5jZXM6IFRyYXZlbFByZWZlcmVuY2VbXSkgPT4gdm9pZDtcbiAgICB9O1xuICAgIFtDb21wb25lbnRUeXBlLkJ1ZGdldFNlbGVjdG9yXToge1xuICAgICAgICBzZWxlY3RlZEJ1ZGdldD86IEJ1ZGdldExldmVsO1xuICAgICAgICBvbkJ1ZGdldENoYW5nZTogKGJ1ZGdldDogQnVkZ2V0TGV2ZWwpID0+IHZvaWQ7XG4gICAgfTtcbiAgICBbQ29tcG9uZW50VHlwZS5MYW5ndWFnZVNlbGVjdG9yXToge1xuICAgICAgICBzZWxlY3RlZExhbmd1YWdlPzogU3VwcG9ydGVkTGFuZ3VhZ2U7XG4gICAgICAgIG9uTGFuZ3VhZ2VDaGFuZ2U6IChsYW5ndWFnZTogU3VwcG9ydGVkTGFuZ3VhZ2UpID0+IHZvaWQ7XG4gICAgfTtcbiAgICBbQ29tcG9uZW50VHlwZS5QbGFjZUNhcmRdOiB7XG4gICAgICAgIHRpdGxlOiBzdHJpbmc7XG4gICAgICAgIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gICAgICAgIGltYWdlVXJsOiBzdHJpbmc7XG4gICAgICAgIG9uQ2xpY2s/OiAoKSA9PiB2b2lkO1xuICAgIH07XG4gICAgW0NvbXBvbmVudFR5cGUuVHJhbnNwb3J0U2VsZWN0b3JdOiB7XG4gICAgICAgIG9wdGlvbnM6IHN0cmluZ1tdO1xuICAgICAgICBvblNlbGVjdDogKG9wdGlvbjogc3RyaW5nKSA9PiB2b2lkO1xuICAgIH07XG4gICAgW0NvbXBvbmVudFR5cGUuQ2Fyb3VzZWxdOiB7XG4gICAgICAgIGl0ZW1zOiBBcnJheTx7XG4gICAgICAgICAgICB0aXRsZTogc3RyaW5nO1xuICAgICAgICAgICAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgICAgICAgICAgIGltYWdlVXJsOiBzdHJpbmc7XG4gICAgICAgIH0+O1xuICAgIH07XG4gICAgW0NvbXBvbmVudFR5cGUuRGV0YWlsc0NhcmRdOiB7XG4gICAgICAgIHRpdGxlOiBzdHJpbmc7XG4gICAgICAgIGNvbnRlbnQ6IFJlYWN0Tm9kZTtcbiAgICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENvbXBvbmVudFJlZ2lzdHJhdGlvbjxUIGV4dGVuZHMgQ29tcG9uZW50VHlwZT4ge1xuICAgIGNvbXBvbmVudDogUmVhY3QuQ29tcG9uZW50VHlwZTxDb21wb25lbnRQcm9wc1tUXT47XG4gICAgZGVmYXVsdFByb3BzPzogUGFydGlhbDxDb21wb25lbnRQcm9wc1tUXT47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29tcG9uZW50U3RhdGUge1xuICAgIGlkOiBzdHJpbmc7XG4gICAgdHlwZTogQ29tcG9uZW50VHlwZTtcbiAgICBwcm9wczogYW55O1xuICAgIGlzVmlzaWJsZTogYm9vbGVhbjtcbiAgICBvcmRlcjogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENvbXBvbmVudFRyYW5zaXRpb24ge1xuICAgIGlkOiBzdHJpbmc7XG4gICAgZnJvbTogUGFydGlhbDxDb21wb25lbnRTdGF0ZT47XG4gICAgdG86IFBhcnRpYWw8Q29tcG9uZW50U3RhdGU+O1xuICAgIGR1cmF0aW9uPzogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENvbXBvbmVudFVwZGF0ZSB7XG4gICAgaWQ6IHN0cmluZztcbiAgICB1cGRhdGVzOiBQYXJ0aWFsPENvbXBvbmVudFN0YXRlPjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBNZXNzYWdlRGF0YSB7XG4gICAgdG9vbE5hbWU/OiBDb21wb25lbnRUeXBlO1xuICAgIGNvbXBvbmVudFByb3BzPzogYW55O1xuICAgIGlzRGV0YWlsc0NhcmQ/OiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENoYXRNZXNzYWdlIGV4dGVuZHMgT21pdDxBaU1lc3NhZ2UsICdkYXRhJz4ge1xuICAgIGRhdGE/OiBNZXNzYWdlRGF0YTtcbn1cblxuZXhwb3J0IHR5cGUgVG9vbFJlc3BvbnNlPFQgZXh0ZW5kcyBDb21wb25lbnRUeXBlPiA9IHtcbiAgICB0eXBlOiBUO1xuICAgIHByb3BzOiBDb21wb25lbnRQcm9wc1tUXTtcbiAgICBtZXNzYWdlPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENoYXRIaXN0b3J5IHtcbiAgICBtZXNzYWdlczogQ2hhdE1lc3NhZ2VbXTtcbiAgICBtZXRhZGF0YTogQ2hhdE1ldGFkYXRhO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENoYXRNZXRhZGF0YSB7XG4gICAgbGFzdEludGVyYWN0aW9uVGltZTogRGF0ZTtcbiAgICBjdXJyZW50U3RhdGU6IENoYXRTdGF0ZTtcbiAgICB2YWxpZFBhcmFtZXRlcnM6IHN0cmluZ1tdO1xuICAgIGludGVycnVwdGVkQXQ/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCB0eXBlIENoYXRTdGF0ZSA9ICdpbml0aWFsJyB8ICdnYXRoZXJpbmdfaW5mbycgfCAncGxhbm5pbmcnIHwgJ2ludGVycnVwdGVkJyB8ICdjb21wbGV0ZWQnO1xuXG5leHBvcnQgaW50ZXJmYWNlIEFJUmVzcG9uc2Uge1xuICAgIG1lc3NhZ2U6IHN0cmluZztcbiAgICBwYXJhbWV0ZXJzPzogVHJhdmVsRGV0YWlscztcbiAgICBzdWdnZXN0ZWRBY3Rpb24/OiBzdHJpbmc7XG4gICAgZXJyb3I/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2FjaGVDb25maWcge1xuICAgIG1heFNpemU6IG51bWJlcjtcbiAgICB0dGw6IG51bWJlcjsgLy8gVGltZSB0byBsaXZlIGluIG1pbGxpc2Vjb25kc1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENhY2hlRW50cnkge1xuICAgIGNvbnRlbnQ6IHN0cmluZztcbiAgICB0aW1lc3RhbXA6IG51bWJlcjtcbiAgICBsYW5ndWFnZTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENvbnRlbnRSZXNwb25zZSB7XG4gICAgY29udGVudDogc3RyaW5nO1xuICAgIGNhY2hlZDogYm9vbGVhbjtcbiAgICBsYW5ndWFnZTogc3RyaW5nO1xuICAgIGdlbmVyYXRlZDogRGF0ZTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBUb29sSW52b2NhdGlvbiB7XG4gICAgdG9vbE5hbWU6IHN0cmluZztcbiAgICB0b29sQ2FsbElkOiBzdHJpbmc7XG4gICAgc3RhdGU6ICdyZXN1bHQnIHwgJ3BlbmRpbmcnIHwgJ2Vycm9yJzsgIFxuICAgIGFyZ3M6IEpTT05WYWx1ZTsgIFxuICAgIHJlc3VsdD86IHtcbiAgICAgICAgdHlwZTogc3RyaW5nO1xuICAgICAgICBwcm9wczogUmVjb3JkPHN0cmluZywgdW5rbm93bj47ICBcbiAgICB9O1xuICAgIGVycm9yPzogc3RyaW5nOyAgXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTWVzc2FnZSB7XG4gICAgaWQ6IHN0cmluZztcbiAgICByb2xlOiAndXNlcicgfCAnYXNzaXN0YW50JyB8ICdzeXN0ZW0nOyAgXG4gICAgY29udGVudDogc3RyaW5nO1xuICAgIGNyZWF0ZWRBdD86IERhdGU7ICBcbiAgICBkYXRhPzogTWVzc2FnZURhdGE7XG4gICAgdG9vbEludm9jYXRpb25zPzogVG9vbEludm9jYXRpb25bXTtcbiAgICBwYXJlbnRNZXNzYWdlSWQ/OiBzdHJpbmc7ICBcbn1cblxuLy8gV2VhdGhlciByZWxhdGVkIHR5cGVzXG5leHBvcnQgaW50ZXJmYWNlIFdlYXRoZXJEYXRhIHtcbiAgICBkYXRlOiBzdHJpbmc7XG4gICAgcHJlY2lwaXRhdGlvbjoge1xuICAgICAgICB0b3RhbDogbnVtYmVyO1xuICAgIH07XG4gICAgdGVtcGVyYXR1cmU6IHtcbiAgICAgICAgbWF4OiBudW1iZXI7XG4gICAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBXZWF0aGVyQ2hhcnRQcm9wcyB7XG4gICAgbGF0OiBudW1iZXI7XG4gICAgbG9uOiBudW1iZXI7XG4gICAgY2l0eTogc3RyaW5nO1xuICAgIHN0YXJ0RGF0ZTogc3RyaW5nO1xuICAgIGVuZERhdGU6IHN0cmluZztcbiAgICB1bml0cz86ICd1cycgfCAndWsnIHwgJ21ldHJpYyc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgT3BlbldlYXRoZXJEYXlSZXNwb25zZSB7XG4gICAgbGF0OiBudW1iZXI7XG4gICAgbG9uOiBudW1iZXI7XG4gICAgdHo6IHN0cmluZztcbiAgICBkYXRlOiBzdHJpbmc7XG4gICAgdW5pdHM6IHN0cmluZztcbiAgICBjbG91ZF9jb3Zlcjoge1xuICAgIGFmdGVybm9vbjogbnVtYmVyO1xuICAgIH07XG4gICAgaHVtaWRpdHk6IHtcbiAgICBhZnRlcm5vb246IG51bWJlcjtcbiAgICB9O1xuICAgIHByZWNpcGl0YXRpb246IHtcbiAgICB0b3RhbDogbnVtYmVyO1xuICAgIH07XG4gICAgdGVtcGVyYXR1cmU6IHtcbiAgICBtaW46IG51bWJlcjtcbiAgICBtYXg6IG51bWJlcjtcbiAgICBhZnRlcm5vb246IG51bWJlcjtcbiAgICBuaWdodDogbnVtYmVyO1xuICAgIGV2ZW5pbmc6IG51bWJlcjtcbiAgICBtb3JuaW5nOiBudW1iZXI7XG4gICAgfTtcbiAgICBwcmVzc3VyZToge1xuICAgIGFmdGVybm9vbjogbnVtYmVyO1xuICAgIH07XG4gICAgd2luZDoge1xuICAgIG1heDoge1xuICAgICAgICBzcGVlZDogbnVtYmVyO1xuICAgICAgICBkaXJlY3Rpb246IG51bWJlcjtcbiAgICB9XG4gICAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFdlYXRoZXJSZXNwb25zZSB7XG4gICAgZGF0YTogT3BlbldlYXRoZXJEYXlSZXNwb25zZTtcbiAgICB5ZWFyOiBudW1iZXI7ICAvLyBBZGQgdGhpcyBmaWVsZFxuICAgIGVycm9yPzogc3RyaW5nO1xufVxuIl0sIm5hbWVzIjpbIkNvbXBvbmVudFR5cGUiLCJCdWRnZXRMZXZlbCIsIlRyYXZlbFByZWZlcmVuY2UiLCJTdXBwb3J0ZWRMYW5ndWFnZSIsIkJVREdFVF9ERVNDUklQVElPTlMiLCJQUkVGRVJFTkNFX0lDT05TIiwiTEFOR1VBR0VfTEFCRUxTIiwiQlVER0VUX09QVElPTlMiLCJ2YWx1ZSIsImxhYmVsIiwiZGVzY3JpcHRpb24iLCJMQU5HVUFHRV9PUFRJT05TIiwiT2JqZWN0IiwiZW50cmllcyIsIm1hcCIsImtleSIsIlBSRUZFUkVOQ0VfT1BUSU9OUyIsImljb24iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./managers/types.ts\n");

/***/ }),

/***/ "./utils/places-utils.ts":
/*!*******************************!*\
  !*** ./utils/places-utils.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   fetchPlaces: () => (/* binding */ fetchPlaces),\n/* harmony export */   formatPrimaryType: () => (/* binding */ formatPrimaryType),\n/* harmony export */   getPlaceTypeDisplayName: () => (/* binding */ getPlaceTypeDisplayName),\n/* harmony export */   getPlaceTypesFromPreferences: () => (/* binding */ getPlaceTypesFromPreferences),\n/* harmony export */   preferenceToPlaceTypes: () => (/* binding */ preferenceToPlaceTypes),\n/* harmony export */   searchMultiplePlacesByText: () => (/* binding */ searchMultiplePlacesByText),\n/* harmony export */   searchPlaceByText: () => (/* binding */ searchPlaceByText)\n/* harmony export */ });\n/* harmony import */ var _managers_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../managers/types */ \"./managers/types.ts\");\n// Place related interfaces\n\n// Updated preference to place types mapping based on travel-rizz.html\nconst preferenceToPlaceTypes = {\n    [_managers_types__WEBPACK_IMPORTED_MODULE_0__.TravelPreference.Culture]: [\n        \"tourist_attraction\",\n        \"museum\",\n        \"cultural_center\",\n        \"monument\",\n        \"historical_landmark\" // For historical places\n    ],\n    [_managers_types__WEBPACK_IMPORTED_MODULE_0__.TravelPreference.Nature]: [\n        \"national_park\",\n        \"park\",\n        \"tourist_attraction\",\n        \"wildlife_park\",\n        \"botanical_garden\"\n    ],\n    [_managers_types__WEBPACK_IMPORTED_MODULE_0__.TravelPreference.Food]: [\n        \"restaurant\",\n        \"cafe\",\n        \"bakery\",\n        \"bar\",\n        \"fine_dining_restaurant\"\n    ],\n    [_managers_types__WEBPACK_IMPORTED_MODULE_0__.TravelPreference.Relaxation]: [\n        \"shopping_mall\",\n        \"tourist_attraction\",\n        \"spa\",\n        \"department_store\",\n        \"store\" // For retail locations\n    ],\n    [_managers_types__WEBPACK_IMPORTED_MODULE_0__.TravelPreference.Adventure]: [\n        \"amusement_park\",\n        \"tourist_attraction\",\n        \"sports_complex\",\n        \"sports_activity_location\",\n        \"hiking_area\"\n    ],\n    [_managers_types__WEBPACK_IMPORTED_MODULE_0__.TravelPreference.Shopping]: [\n        \"museum\",\n        \"art_gallery\",\n        \"tourist_attraction\",\n        \"performing_arts_theater\",\n        \"cultural_center\"\n    ]\n};\n// Helper function to get place types based on preferences\nfunction getPlaceTypesFromPreferences(preferences) {\n    try {\n        // Get unique types from all preferences\n        const types = new Set(preferences.reduce((types, pref)=>{\n            const placeTypes = preferenceToPlaceTypes[pref] || [];\n            return [\n                ...types,\n                ...placeTypes\n            ];\n        }, []));\n        return Array.from(types);\n    } catch (error) {\n        console.error(\"Error getting place types from preferences:\", error);\n        return [\n            \"tourist_attraction\"\n        ]; // Default fallback\n    }\n}\n// Helper function to format primary type\nconst formatPrimaryType = (type)=>{\n    return type.split(\"_\").map((word)=>word.charAt(0).toUpperCase() + word.slice(1)).join(\" \");\n};\n// Helper function to get display name for place type\nconst getPlaceTypeDisplayName = (place)=>{\n    if (place?.primaryTypeDisplayName?.text) {\n        return place.primaryTypeDisplayName.text;\n    }\n    // Fallback to formatting the primaryType if displayName is not available\n    return place.primaryType ? formatPrimaryType(place.primaryType) : \"Place\";\n};\n// Search for a single place by text query\nconst searchPlaceByText = async (searchText, location)=>{\n    try {\n        if (false) {}\n        const requestBody = {\n            textQuery: searchText,\n            locationBias: {\n                circle: {\n                    center: {\n                        latitude: location.latitude,\n                        longitude: location.longitude\n                    },\n                    radius: 20000.0 // 20km radius\n                }\n            }\n        };\n        const headers = new Headers({\n            \"Content-Type\": \"application/json\",\n            \"X-Goog-Api-Key\": \"AIzaSyDvcgBgSprgTRQO_6BWh5EAOPu1vdS6KD4\",\n            \"X-Goog-FieldMask\": \"places.id,places.displayName,places.formattedAddress,places.location,places.primaryType,places.primaryTypeDisplayName,places.photos.name\"\n        });\n        const response = await fetch(\"https://places.googleapis.com/v1/places:searchText\", {\n            method: \"POST\",\n            headers: headers,\n            body: JSON.stringify(requestBody)\n        });\n        if (!response.ok) {\n            const errorData = await response.text();\n            console.error(\"Failed to search place:\", {\n                status: response.status,\n                statusText: response.statusText,\n                error: errorData\n            });\n            return null;\n        }\n        const data = await response.json();\n        // console.log('Places API text search response:', data);\n        if (!data.places || !Array.isArray(data.places) || data.places.length === 0) {\n            console.error(\"No places found for text search:\", searchText);\n            return null;\n        }\n        // Return the first result as we only need one place\n        const place = data.places[0];\n        return {\n            id: place.id,\n            displayName: place.displayName?.text ? {\n                text: place.displayName.text,\n                languageCode: place.displayName.languageCode\n            } : place.displayName,\n            primaryType: place.primaryType || \"place\",\n            photos: place.photos?.map((photo)=>({\n                    name: photo.name,\n                    widthPx: photo.widthPx,\n                    heightPx: photo.heightPx,\n                    authorAttributions: photo.authorAttributions\n                })) || [],\n            formattedAddress: place.formattedAddress,\n            location: place.location,\n            primaryTypeDisplayName: place.primaryTypeDisplayName ? {\n                text: place.primaryTypeDisplayName.text,\n                languageCode: place.primaryTypeDisplayName.languageCode\n            } : undefined\n        };\n    } catch (error) {\n        console.error(\"Error searching for place:\", error);\n        return null;\n    }\n};\n// Search for multiple places by text query\nconst searchMultiplePlacesByText = async (searchText, location, maxResults = 5)=>{\n    try {\n        if (false) {}\n        console.log(\"Executing searchMultiplePlacesByText with params:\", {\n            searchText,\n            location,\n            maxResults\n        });\n        const requestBody = {\n            textQuery: searchText,\n            locationBias: {\n                circle: {\n                    center: {\n                        latitude: location.latitude,\n                        longitude: location.longitude\n                    },\n                    radius: 20000.0 // 20km radius\n                }\n            },\n            maxResultCount: maxResults\n        };\n        const headers = new Headers({\n            \"Content-Type\": \"application/json\",\n            \"X-Goog-Api-Key\": \"AIzaSyDvcgBgSprgTRQO_6BWh5EAOPu1vdS6KD4\",\n            \"X-Goog-FieldMask\": \"places.id,places.displayName,places.formattedAddress,places.location,places.primaryType,places.primaryTypeDisplayName,places.photos.name\"\n        });\n        const response = await fetch(\"https://places.googleapis.com/v1/places:searchText\", {\n            method: \"POST\",\n            headers: headers,\n            body: JSON.stringify(requestBody)\n        });\n        if (!response.ok) {\n            const errorData = await response.text();\n            console.error(\"Failed to search places:\", {\n                status: response.status,\n                statusText: response.statusText,\n                error: errorData\n            });\n            return [];\n        }\n        const data = await response.json();\n        if (!data.places || !Array.isArray(data.places) || data.places.length === 0) {\n            console.log(\"No places found for text search:\", searchText);\n            return [];\n        }\n        return data.places.map((place)=>({\n                id: place.id,\n                displayName: place.displayName?.text ? {\n                    text: place.displayName.text,\n                    languageCode: place.displayName.languageCode\n                } : place.displayName,\n                primaryType: place.primaryType || \"place\",\n                photos: place.photos?.map((photo)=>({\n                        name: photo.name\n                    })) || [],\n                formattedAddress: place.formattedAddress,\n                location: place.location,\n                primaryTypeDisplayName: place.primaryTypeDisplayName ? {\n                    text: place.primaryTypeDisplayName.text,\n                    languageCode: place.primaryTypeDisplayName.languageCode\n                } : undefined\n            }));\n    } catch (error) {\n        console.error(\"Error searching for places:\", error);\n        return [];\n    }\n};\n// Fetch places from Google Places API\nconst fetchPlaces = async (latitude, longitude, preferences, maxResults = 5, placeTypes)=>{\n    try {\n        if (false) {}\n        const fromPreferences = !!preferences && preferences.length > 0;\n        const fromPlaceTypes = !!placeTypes && placeTypes.length > 0;\n        if (!fromPreferences && !fromPlaceTypes) {\n            console.error(\"No preferences or place types provided\");\n            return [];\n        }\n        // Use preferences if provided, otherwise use placeTypes, otherwise use defaults\n        let includedTypes = [];\n        if (fromPreferences) {\n            includedTypes = getPlaceTypesFromPreferences(preferences);\n        } else if (fromPlaceTypes) {\n            includedTypes = placeTypes;\n        }\n        console.log(\"Executing fetchplaces with params:\", {\n            latitude,\n            longitude,\n            includedTypes,\n            maxResults,\n            fromPreferences: !!preferences?.length,\n            fromPlaceTypes: !!placeTypes?.length\n        });\n        // First try nearby search\n        try {\n            const requestBody = {\n                includedTypes,\n                maxResultCount: maxResults,\n                locationRestriction: {\n                    circle: {\n                        center: {\n                            latitude: latitude,\n                            longitude: longitude\n                        },\n                        radius: 20000.0 // 20km radius\n                    }\n                }\n            };\n            const headers = new Headers({\n                \"Content-Type\": \"application/json\",\n                \"X-Goog-Api-Key\": \"AIzaSyDvcgBgSprgTRQO_6BWh5EAOPu1vdS6KD4\",\n                \"X-Goog-FieldMask\": \"places.id,places.displayName,places.formattedAddress,places.location,places.primaryType,places.primaryTypeDisplayName,places.photos.name\"\n            });\n            const response = await fetch(\"https://places.googleapis.com/v1/places:searchNearby\", {\n                method: \"POST\",\n                headers: headers,\n                body: JSON.stringify(requestBody)\n            });\n            if (response.ok) {\n                const data = await response.json();\n                if (data.places && Array.isArray(data.places) && data.places.length > 0) {\n                    return data.places.map((place)=>({\n                            id: place.id,\n                            displayName: place.displayName?.text ? {\n                                text: place.displayName.text,\n                                languageCode: place.displayName.languageCode\n                            } : place.displayName,\n                            primaryType: place.primaryType || \"place\",\n                            photos: place.photos?.map((photo)=>({\n                                    name: photo.name\n                                })) || [],\n                            formattedAddress: place.formattedAddress,\n                            location: place.location,\n                            primaryTypeDisplayName: place.primaryTypeDisplayName ? {\n                                text: place.primaryTypeDisplayName.text,\n                                languageCode: place.primaryTypeDisplayName.languageCode\n                            } : undefined\n                        }));\n                }\n            }\n            const errorData = await response.text();\n            console.error(\"Failed to fetch places:\", {\n                status: response.status,\n                statusText: response.statusText,\n                error: errorData\n            });\n        } catch (error) {\n            console.error(\"Error in nearby search:\", error);\n        }\n        // If nearby search fails, try text search as fallback\n        console.log(\"Falling back to text search...\");\n        const searchQuery = fromPlaceTypes ? placeTypes[0] : preferences[0];\n        return await searchMultiplePlacesByText(searchQuery, {\n            latitude,\n            longitude\n        }, maxResults);\n    } catch (error) {\n        console.error(\"Error fetching places:\", error);\n        return [];\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O1FBQ3hDLE9BQU8sRUFBRTtJQUNiO0FBQ0osRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL3RyYXZlbC1yaXp6Ly4vdXRpbHMvcGxhY2VzLXV0aWxzLnRzPzU1NWMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gUGxhY2UgcmVsYXRlZCBpbnRlcmZhY2VzXG5leHBvcnQgaW50ZXJmYWNlIFBsYWNlIHtcbiAgICBpZDogc3RyaW5nO1xuICAgIGRpc3BsYXlOYW1lOiB7XG4gICAgICAgIHRleHQ6IHN0cmluZztcbiAgICAgICAgbGFuZ3VhZ2VDb2RlOiBzdHJpbmc7XG4gICAgfSB8IHN0cmluZztcbiAgICBmb3JtYXR0ZWRBZGRyZXNzPzogc3RyaW5nO1xuICAgIGxvY2F0aW9uPzoge1xuICAgICAgICBsYXRpdHVkZTogbnVtYmVyO1xuICAgICAgICBsb25naXR1ZGU6IG51bWJlcjtcbiAgICB9O1xuICAgIHByaW1hcnlUeXBlOiBzdHJpbmc7XG4gICAgcHJpbWFyeVR5cGVEaXNwbGF5TmFtZT86IHtcbiAgICAgICAgdGV4dDogc3RyaW5nO1xuICAgICAgICBsYW5ndWFnZUNvZGU6IHN0cmluZztcbiAgICB9O1xuICAgIHBob3Rvcz86IHsgXG4gICAgICAgIG5hbWU6IHN0cmluZztcbiAgICAgICAgd2lkdGhQeD86IG51bWJlcjtcbiAgICAgICAgaGVpZ2h0UHg/OiBudW1iZXI7XG4gICAgICAgIGF1dGhvckF0dHJpYnV0aW9ucz86IEFycmF5PHtcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lPzogc3RyaW5nO1xuICAgICAgICAgICAgdXJpPzogc3RyaW5nO1xuICAgICAgICAgICAgcGhvdG9Vcmk/OiBzdHJpbmc7XG4gICAgICAgIH0+O1xuICAgIH1bXTtcbn1cblxuaW1wb3J0IHsgVHJhdmVsUHJlZmVyZW5jZSB9IGZyb20gJy4uL21hbmFnZXJzL3R5cGVzJztcblxuLy8gVXBkYXRlZCBwcmVmZXJlbmNlIHRvIHBsYWNlIHR5cGVzIG1hcHBpbmcgYmFzZWQgb24gdHJhdmVsLXJpenouaHRtbFxuZXhwb3J0IGNvbnN0IHByZWZlcmVuY2VUb1BsYWNlVHlwZXM6IFJlY29yZDxUcmF2ZWxQcmVmZXJlbmNlLCBzdHJpbmdbXT4gPSB7XG4gICAgW1RyYXZlbFByZWZlcmVuY2UuQ3VsdHVyZV06IFtcbiAgICAgICAgJ3RvdXJpc3RfYXR0cmFjdGlvbicsICAvLyBGb3IgaGlzdG9yaWNhbCBzaXRlc1xuICAgICAgICAnbXVzZXVtJywgICAgICAgICAgICAgLy8gRm9yIG11c2V1bXMgYW5kIGN1bHR1cmFsIGluc3RpdHV0aW9uc1xuICAgICAgICAnY3VsdHVyYWxfY2VudGVyJywgICAgLy8gRm9yIGN1bHR1cmFsIHZlbnVlc1xuICAgICAgICAnbW9udW1lbnQnLCAgICAgICAgICAgLy8gRm9yIG1vbnVtZW50cyBhbmQgbGFuZG1hcmtzXG4gICAgICAgICdoaXN0b3JpY2FsX2xhbmRtYXJrJyAvLyBGb3IgaGlzdG9yaWNhbCBwbGFjZXNcbiAgICBdLFxuICAgIFtUcmF2ZWxQcmVmZXJlbmNlLk5hdHVyZV06IFtcbiAgICAgICAgJ25hdGlvbmFsX3BhcmsnLFxuICAgICAgICAncGFyaycsXG4gICAgICAgICd0b3VyaXN0X2F0dHJhY3Rpb24nLCAvLyBGb3IgbmF0dXJhbCBhdHRyYWN0aW9uc1xuICAgICAgICAnd2lsZGxpZmVfcGFyaycsXG4gICAgICAgICdib3RhbmljYWxfZ2FyZGVuJ1xuICAgIF0sXG4gICAgW1RyYXZlbFByZWZlcmVuY2UuRm9vZF06IFtcbiAgICAgICAgJ3Jlc3RhdXJhbnQnLFxuICAgICAgICAnY2FmZScsXG4gICAgICAgICdiYWtlcnknLFxuICAgICAgICAnYmFyJyxcbiAgICAgICAgJ2ZpbmVfZGluaW5nX3Jlc3RhdXJhbnQnXG4gICAgXSxcbiAgICBbVHJhdmVsUHJlZmVyZW5jZS5SZWxheGF0aW9uXTogW1xuICAgICAgICAnc2hvcHBpbmdfbWFsbCcsXG4gICAgICAgICd0b3VyaXN0X2F0dHJhY3Rpb24nLCAgLy8gRm9yIGdlbmVyYWwgYXR0cmFjdGlvbnNcbiAgICAgICAgJ3NwYScsXG4gICAgICAgICdkZXBhcnRtZW50X3N0b3JlJyxcbiAgICAgICAgJ3N0b3JlJyAgICAgICAgICAgICAgIC8vIEZvciByZXRhaWwgbG9jYXRpb25zXG4gICAgXSxcbiAgICBbVHJhdmVsUHJlZmVyZW5jZS5BZHZlbnR1cmVdOiBbXG4gICAgICAgICdhbXVzZW1lbnRfcGFyaycsXG4gICAgICAgICd0b3VyaXN0X2F0dHJhY3Rpb24nLCAvLyBGb3IgYWR2ZW50dXJlIHNpdGVzXG4gICAgICAgICdzcG9ydHNfY29tcGxleCcsXG4gICAgICAgICdzcG9ydHNfYWN0aXZpdHlfbG9jYXRpb24nLFxuICAgICAgICAnaGlraW5nX2FyZWEnXG4gICAgXSxcbiAgICBbVHJhdmVsUHJlZmVyZW5jZS5TaG9wcGluZ106IFtcbiAgICAgICAgJ211c2V1bScsXG4gICAgICAgICdhcnRfZ2FsbGVyeScsXG4gICAgICAgICd0b3VyaXN0X2F0dHJhY3Rpb24nLCAvLyBGb3IgYXJ0IGluc3RhbGxhdGlvbnNcbiAgICAgICAgJ3BlcmZvcm1pbmdfYXJ0c190aGVhdGVyJyxcbiAgICAgICAgJ2N1bHR1cmFsX2NlbnRlcidcbiAgICBdXG59O1xuXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gZ2V0IHBsYWNlIHR5cGVzIGJhc2VkIG9uIHByZWZlcmVuY2VzXG5leHBvcnQgZnVuY3Rpb24gZ2V0UGxhY2VUeXBlc0Zyb21QcmVmZXJlbmNlcyhwcmVmZXJlbmNlczogVHJhdmVsUHJlZmVyZW5jZVtdKTogc3RyaW5nW10ge1xuICAgIHRyeSB7XG4gICAgICAgIC8vIEdldCB1bmlxdWUgdHlwZXMgZnJvbSBhbGwgcHJlZmVyZW5jZXNcbiAgICAgICAgY29uc3QgdHlwZXMgPSBuZXcgU2V0KHByZWZlcmVuY2VzLnJlZHVjZSgodHlwZXM6IHN0cmluZ1tdLCBwcmVmKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBwbGFjZVR5cGVzID0gcHJlZmVyZW5jZVRvUGxhY2VUeXBlc1twcmVmXSB8fCBbXTtcbiAgICAgICAgICAgIHJldHVybiBbLi4udHlwZXMsIC4uLnBsYWNlVHlwZXNdO1xuICAgICAgICB9LCBbXSkpO1xuXG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHR5cGVzKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZXR0aW5nIHBsYWNlIHR5cGVzIGZyb20gcHJlZmVyZW5jZXM6JywgZXJyb3IpO1xuICAgICAgICByZXR1cm4gWyd0b3VyaXN0X2F0dHJhY3Rpb24nXTsgLy8gRGVmYXVsdCBmYWxsYmFja1xuICAgIH1cbn07XG5cbi8vIEhlbHBlciBmdW5jdGlvbiB0byBmb3JtYXQgcHJpbWFyeSB0eXBlXG5leHBvcnQgY29uc3QgZm9ybWF0UHJpbWFyeVR5cGUgPSAodHlwZTogc3RyaW5nKTogc3RyaW5nID0+IHtcbiAgICByZXR1cm4gdHlwZS5zcGxpdCgnXycpXG4gICAgICAgIC5tYXAod29yZCA9PiB3b3JkLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgd29yZC5zbGljZSgxKSlcbiAgICAgICAgLmpvaW4oJyAnKTtcbn07XG5cbi8vIEhlbHBlciBmdW5jdGlvbiB0byBnZXQgZGlzcGxheSBuYW1lIGZvciBwbGFjZSB0eXBlXG5leHBvcnQgY29uc3QgZ2V0UGxhY2VUeXBlRGlzcGxheU5hbWUgPSAocGxhY2U6IGFueSk6IHN0cmluZyA9PiB7XG4gICAgaWYgKHBsYWNlPy5wcmltYXJ5VHlwZURpc3BsYXlOYW1lPy50ZXh0KSB7XG4gICAgICAgIHJldHVybiBwbGFjZS5wcmltYXJ5VHlwZURpc3BsYXlOYW1lLnRleHQ7XG4gICAgfVxuICAgIC8vIEZhbGxiYWNrIHRvIGZvcm1hdHRpbmcgdGhlIHByaW1hcnlUeXBlIGlmIGRpc3BsYXlOYW1lIGlzIG5vdCBhdmFpbGFibGVcbiAgICByZXR1cm4gcGxhY2UucHJpbWFyeVR5cGUgPyBmb3JtYXRQcmltYXJ5VHlwZShwbGFjZS5wcmltYXJ5VHlwZSkgOiAnUGxhY2UnO1xufTtcblxuLy8gU2VhcmNoIGZvciBhIHNpbmdsZSBwbGFjZSBieSB0ZXh0IHF1ZXJ5XG5leHBvcnQgY29uc3Qgc2VhcmNoUGxhY2VCeVRleHQgPSBhc3luYyAoXG4gICAgc2VhcmNoVGV4dDogc3RyaW5nLFxuICAgIGxvY2F0aW9uOiB7IGxhdGl0dWRlOiBudW1iZXI7IGxvbmdpdHVkZTogbnVtYmVyIH1cbik6IFByb21pc2U8UGxhY2UgfCBudWxsPiA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKCFwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19HT09HTEVfTUFQU19BUElfS0VZKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdHb29nbGUgTWFwcyBBUEkga2V5IGlzIG1pc3NpbmcnKTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcmVxdWVzdEJvZHkgPSB7XG4gICAgICAgICAgICB0ZXh0UXVlcnk6IHNlYXJjaFRleHQsXG4gICAgICAgICAgICBsb2NhdGlvbkJpYXM6IHtcbiAgICAgICAgICAgICAgICBjaXJjbGU6IHtcbiAgICAgICAgICAgICAgICAgICAgY2VudGVyOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYXRpdHVkZTogbG9jYXRpb24ubGF0aXR1ZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBsb25naXR1ZGU6IGxvY2F0aW9uLmxvbmdpdHVkZVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICByYWRpdXM6IDIwMDAwLjAgLy8gMjBrbSByYWRpdXNcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgaGVhZGVycyA9IG5ldyBIZWFkZXJzKHtcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAnWC1Hb29nLUFwaS1LZXknOiBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19HT09HTEVfTUFQU19BUElfS0VZLFxuICAgICAgICAgICAgJ1gtR29vZy1GaWVsZE1hc2snOiAncGxhY2VzLmlkLHBsYWNlcy5kaXNwbGF5TmFtZSxwbGFjZXMuZm9ybWF0dGVkQWRkcmVzcyxwbGFjZXMubG9jYXRpb24scGxhY2VzLnByaW1hcnlUeXBlLHBsYWNlcy5wcmltYXJ5VHlwZURpc3BsYXlOYW1lLHBsYWNlcy5waG90b3MubmFtZSdcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9wbGFjZXMuZ29vZ2xlYXBpcy5jb20vdjEvcGxhY2VzOnNlYXJjaFRleHQnLCB7XG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0Qm9keSlcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgY29uc3QgZXJyb3JEYXRhID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIHNlYXJjaCBwbGFjZTonLCB7XG4gICAgICAgICAgICAgICAgc3RhdHVzOiByZXNwb25zZS5zdGF0dXMsXG4gICAgICAgICAgICAgICAgc3RhdHVzVGV4dDogcmVzcG9uc2Uuc3RhdHVzVGV4dCxcbiAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3JEYXRhXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ1BsYWNlcyBBUEkgdGV4dCBzZWFyY2ggcmVzcG9uc2U6JywgZGF0YSk7XG4gICAgICAgIFxuICAgICAgICBpZiAoIWRhdGEucGxhY2VzIHx8ICFBcnJheS5pc0FycmF5KGRhdGEucGxhY2VzKSB8fCBkYXRhLnBsYWNlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ05vIHBsYWNlcyBmb3VuZCBmb3IgdGV4dCBzZWFyY2g6Jywgc2VhcmNoVGV4dCk7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJldHVybiB0aGUgZmlyc3QgcmVzdWx0IGFzIHdlIG9ubHkgbmVlZCBvbmUgcGxhY2VcbiAgICAgICAgY29uc3QgcGxhY2UgPSBkYXRhLnBsYWNlc1swXTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGlkOiBwbGFjZS5pZCxcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lOiBwbGFjZS5kaXNwbGF5TmFtZT8udGV4dCA/IHtcbiAgICAgICAgICAgICAgICB0ZXh0OiBwbGFjZS5kaXNwbGF5TmFtZS50ZXh0LFxuICAgICAgICAgICAgICAgIGxhbmd1YWdlQ29kZTogcGxhY2UuZGlzcGxheU5hbWUubGFuZ3VhZ2VDb2RlXG4gICAgICAgICAgICB9IDogcGxhY2UuZGlzcGxheU5hbWUsXG4gICAgICAgICAgICBwcmltYXJ5VHlwZTogcGxhY2UucHJpbWFyeVR5cGUgfHwgJ3BsYWNlJyxcbiAgICAgICAgICAgIHBob3RvczogcGxhY2UucGhvdG9zPy5tYXAoKHBob3RvOiBhbnkpID0+ICh7IFxuICAgICAgICAgICAgICAgIG5hbWU6IHBob3RvLm5hbWUsXG4gICAgICAgICAgICAgICAgd2lkdGhQeDogcGhvdG8ud2lkdGhQeCxcbiAgICAgICAgICAgICAgICBoZWlnaHRQeDogcGhvdG8uaGVpZ2h0UHgsXG4gICAgICAgICAgICAgICAgYXV0aG9yQXR0cmlidXRpb25zOiBwaG90by5hdXRob3JBdHRyaWJ1dGlvbnNcbiAgICAgICAgICAgIH0pKSB8fCBbXSxcbiAgICAgICAgICAgIGZvcm1hdHRlZEFkZHJlc3M6IHBsYWNlLmZvcm1hdHRlZEFkZHJlc3MsXG4gICAgICAgICAgICBsb2NhdGlvbjogcGxhY2UubG9jYXRpb24sXG4gICAgICAgICAgICBwcmltYXJ5VHlwZURpc3BsYXlOYW1lOiBwbGFjZS5wcmltYXJ5VHlwZURpc3BsYXlOYW1lID8ge1xuICAgICAgICAgICAgICAgIHRleHQ6IHBsYWNlLnByaW1hcnlUeXBlRGlzcGxheU5hbWUudGV4dCxcbiAgICAgICAgICAgICAgICBsYW5ndWFnZUNvZGU6IHBsYWNlLnByaW1hcnlUeXBlRGlzcGxheU5hbWUubGFuZ3VhZ2VDb2RlXG4gICAgICAgICAgICB9IDogdW5kZWZpbmVkXG4gICAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2VhcmNoaW5nIGZvciBwbGFjZTonLCBlcnJvcik7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn07XG5cbi8vIFNlYXJjaCBmb3IgbXVsdGlwbGUgcGxhY2VzIGJ5IHRleHQgcXVlcnlcbmV4cG9ydCBjb25zdCBzZWFyY2hNdWx0aXBsZVBsYWNlc0J5VGV4dCA9IGFzeW5jIChcbiAgICBzZWFyY2hUZXh0OiBzdHJpbmcsXG4gICAgbG9jYXRpb246IHsgbGF0aXR1ZGU6IG51bWJlcjsgbG9uZ2l0dWRlOiBudW1iZXIgfSxcbiAgICBtYXhSZXN1bHRzOiBudW1iZXIgPSA1XG4pOiBQcm9taXNlPFBsYWNlW10+ID0+IHtcbiAgICB0cnkge1xuICAgICAgICBpZiAoIXByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0dPT0dMRV9NQVBTX0FQSV9LRVkpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0dvb2dsZSBNYXBzIEFQSSBrZXkgaXMgbWlzc2luZycpO1xuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc29sZS5sb2coJ0V4ZWN1dGluZyBzZWFyY2hNdWx0aXBsZVBsYWNlc0J5VGV4dCB3aXRoIHBhcmFtczonLCB7XG4gICAgICAgICAgICBzZWFyY2hUZXh0LFxuICAgICAgICAgICAgbG9jYXRpb24sXG4gICAgICAgICAgICBtYXhSZXN1bHRzXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHJlcXVlc3RCb2R5ID0ge1xuICAgICAgICAgICAgdGV4dFF1ZXJ5OiBzZWFyY2hUZXh0LFxuICAgICAgICAgICAgbG9jYXRpb25CaWFzOiB7XG4gICAgICAgICAgICAgICAgY2lyY2xlOiB7XG4gICAgICAgICAgICAgICAgICAgIGNlbnRlcjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGF0aXR1ZGU6IGxvY2F0aW9uLmxhdGl0dWRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbG9uZ2l0dWRlOiBsb2NhdGlvbi5sb25naXR1ZGVcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgcmFkaXVzOiAyMDAwMC4wIC8vIDIwa20gcmFkaXVzXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG1heFJlc3VsdENvdW50OiBtYXhSZXN1bHRzXG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgaGVhZGVycyA9IG5ldyBIZWFkZXJzKHtcbiAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgICAnWC1Hb29nLUFwaS1LZXknOiBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19HT09HTEVfTUFQU19BUElfS0VZLFxuICAgICAgICAgICAgJ1gtR29vZy1GaWVsZE1hc2snOiAncGxhY2VzLmlkLHBsYWNlcy5kaXNwbGF5TmFtZSxwbGFjZXMuZm9ybWF0dGVkQWRkcmVzcyxwbGFjZXMubG9jYXRpb24scGxhY2VzLnByaW1hcnlUeXBlLHBsYWNlcy5wcmltYXJ5VHlwZURpc3BsYXlOYW1lLHBsYWNlcy5waG90b3MubmFtZSdcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9wbGFjZXMuZ29vZ2xlYXBpcy5jb20vdjEvcGxhY2VzOnNlYXJjaFRleHQnLCB7XG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0Qm9keSlcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgY29uc3QgZXJyb3JEYXRhID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIHNlYXJjaCBwbGFjZXM6Jywge1xuICAgICAgICAgICAgICAgIHN0YXR1czogcmVzcG9uc2Uuc3RhdHVzLFxuICAgICAgICAgICAgICAgIHN0YXR1c1RleHQ6IHJlc3BvbnNlLnN0YXR1c1RleHQsXG4gICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yRGF0YVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICBcbiAgICAgICAgaWYgKCFkYXRhLnBsYWNlcyB8fCAhQXJyYXkuaXNBcnJheShkYXRhLnBsYWNlcykgfHwgZGF0YS5wbGFjZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnTm8gcGxhY2VzIGZvdW5kIGZvciB0ZXh0IHNlYXJjaDonLCBzZWFyY2hUZXh0KTtcbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBkYXRhLnBsYWNlcy5tYXAoKHBsYWNlOiBhbnkpID0+ICh7XG4gICAgICAgICAgICBpZDogcGxhY2UuaWQsXG4gICAgICAgICAgICBkaXNwbGF5TmFtZTogcGxhY2UuZGlzcGxheU5hbWU/LnRleHQgPyB7XG4gICAgICAgICAgICAgICAgdGV4dDogcGxhY2UuZGlzcGxheU5hbWUudGV4dCxcbiAgICAgICAgICAgICAgICBsYW5ndWFnZUNvZGU6IHBsYWNlLmRpc3BsYXlOYW1lLmxhbmd1YWdlQ29kZVxuICAgICAgICAgICAgfSA6IHBsYWNlLmRpc3BsYXlOYW1lLFxuICAgICAgICAgICAgcHJpbWFyeVR5cGU6IHBsYWNlLnByaW1hcnlUeXBlIHx8ICdwbGFjZScsXG4gICAgICAgICAgICBwaG90b3M6IHBsYWNlLnBob3Rvcz8ubWFwKChwaG90bzogYW55KSA9PiAoeyBcbiAgICAgICAgICAgICAgICBuYW1lOiBwaG90by5uYW1lXG4gICAgICAgICAgICB9KSkgfHwgW10sXG4gICAgICAgICAgICBmb3JtYXR0ZWRBZGRyZXNzOiBwbGFjZS5mb3JtYXR0ZWRBZGRyZXNzLFxuICAgICAgICAgICAgbG9jYXRpb246IHBsYWNlLmxvY2F0aW9uLFxuICAgICAgICAgICAgcHJpbWFyeVR5cGVEaXNwbGF5TmFtZTogcGxhY2UucHJpbWFyeVR5cGVEaXNwbGF5TmFtZSA/IHtcbiAgICAgICAgICAgICAgICB0ZXh0OiBwbGFjZS5wcmltYXJ5VHlwZURpc3BsYXlOYW1lLnRleHQsXG4gICAgICAgICAgICAgICAgbGFuZ3VhZ2VDb2RlOiBwbGFjZS5wcmltYXJ5VHlwZURpc3BsYXlOYW1lLmxhbmd1YWdlQ29kZVxuICAgICAgICAgICAgfSA6IHVuZGVmaW5lZFxuICAgICAgICB9KSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2VhcmNoaW5nIGZvciBwbGFjZXM6JywgZXJyb3IpO1xuICAgICAgICByZXR1cm4gW107XG4gICAgfVxufTtcblxuLy8gRmV0Y2ggcGxhY2VzIGZyb20gR29vZ2xlIFBsYWNlcyBBUElcbmV4cG9ydCBjb25zdCBmZXRjaFBsYWNlcyA9IGFzeW5jIChcbiAgICBsYXRpdHVkZTogbnVtYmVyLFxuICAgIGxvbmdpdHVkZTogbnVtYmVyLFxuICAgIHByZWZlcmVuY2VzPzogVHJhdmVsUHJlZmVyZW5jZVtdLFxuICAgIG1heFJlc3VsdHM6IG51bWJlciA9IDUsXG4gICAgcGxhY2VUeXBlcz86IHN0cmluZ1tdXG4pOiBQcm9taXNlPFBsYWNlW10+ID0+IHtcbiAgICB0cnkge1xuICAgICAgICBpZiAoIXByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0dPT0dMRV9NQVBTX0FQSV9LRVkpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0dvb2dsZSBNYXBzIEFQSSBrZXkgaXMgbWlzc2luZycpO1xuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZnJvbVByZWZlcmVuY2VzID0gISFwcmVmZXJlbmNlcyAmJiBwcmVmZXJlbmNlcy5sZW5ndGggPiAwO1xuICAgICAgICBjb25zdCBmcm9tUGxhY2VUeXBlcyA9ICEhcGxhY2VUeXBlcyAmJiBwbGFjZVR5cGVzLmxlbmd0aCA+IDA7XG4gICAgICAgIFxuICAgICAgICBpZiAoIWZyb21QcmVmZXJlbmNlcyAmJiAhZnJvbVBsYWNlVHlwZXMpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ05vIHByZWZlcmVuY2VzIG9yIHBsYWNlIHR5cGVzIHByb3ZpZGVkJyk7XG4gICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIH1cblxuICAgICAgICAvLyBVc2UgcHJlZmVyZW5jZXMgaWYgcHJvdmlkZWQsIG90aGVyd2lzZSB1c2UgcGxhY2VUeXBlcywgb3RoZXJ3aXNlIHVzZSBkZWZhdWx0c1xuICAgICAgICBsZXQgaW5jbHVkZWRUeXBlczogc3RyaW5nW10gPSBbXTtcbiAgICAgICAgaWYgKGZyb21QcmVmZXJlbmNlcykge1xuICAgICAgICAgICAgaW5jbHVkZWRUeXBlcyA9IGdldFBsYWNlVHlwZXNGcm9tUHJlZmVyZW5jZXMocHJlZmVyZW5jZXMhKTtcbiAgICAgICAgfSBlbHNlIGlmIChmcm9tUGxhY2VUeXBlcykge1xuICAgICAgICAgICAgaW5jbHVkZWRUeXBlcyA9IHBsYWNlVHlwZXMhO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc29sZS5sb2coJ0V4ZWN1dGluZyBmZXRjaHBsYWNlcyB3aXRoIHBhcmFtczonLCB7XG4gICAgICAgICAgICBsYXRpdHVkZSxcbiAgICAgICAgICAgIGxvbmdpdHVkZSxcbiAgICAgICAgICAgIGluY2x1ZGVkVHlwZXMsXG4gICAgICAgICAgICBtYXhSZXN1bHRzLFxuICAgICAgICAgICAgZnJvbVByZWZlcmVuY2VzOiAhIXByZWZlcmVuY2VzPy5sZW5ndGgsXG4gICAgICAgICAgICBmcm9tUGxhY2VUeXBlczogISFwbGFjZVR5cGVzPy5sZW5ndGhcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gRmlyc3QgdHJ5IG5lYXJieSBzZWFyY2hcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3RCb2R5ID0ge1xuICAgICAgICAgICAgICAgIGluY2x1ZGVkVHlwZXMsXG4gICAgICAgICAgICAgICAgbWF4UmVzdWx0Q291bnQ6IG1heFJlc3VsdHMsXG4gICAgICAgICAgICAgICAgbG9jYXRpb25SZXN0cmljdGlvbjoge1xuICAgICAgICAgICAgICAgICAgICBjaXJjbGU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbnRlcjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhdGl0dWRlOiBsYXRpdHVkZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb25naXR1ZGU6IGxvbmdpdHVkZVxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhZGl1czogMjAwMDAuMCAvLyAyMGttIHJhZGl1c1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgY29uc3QgaGVhZGVycyA9IG5ldyBIZWFkZXJzKHtcbiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgICAgICdYLUdvb2ctQXBpLUtleSc6IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0dPT0dMRV9NQVBTX0FQSV9LRVksXG4gICAgICAgICAgICAgICAgJ1gtR29vZy1GaWVsZE1hc2snOiAncGxhY2VzLmlkLHBsYWNlcy5kaXNwbGF5TmFtZSxwbGFjZXMuZm9ybWF0dGVkQWRkcmVzcyxwbGFjZXMubG9jYXRpb24scGxhY2VzLnByaW1hcnlUeXBlLHBsYWNlcy5wcmltYXJ5VHlwZURpc3BsYXlOYW1lLHBsYWNlcy5waG90b3MubmFtZSdcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCdodHRwczovL3BsYWNlcy5nb29nbGVhcGlzLmNvbS92MS9wbGFjZXM6c2VhcmNoTmVhcmJ5Jywge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdEJvZHkpXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5wbGFjZXMgJiYgQXJyYXkuaXNBcnJheShkYXRhLnBsYWNlcykgJiYgZGF0YS5wbGFjZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGF0YS5wbGFjZXMubWFwKChwbGFjZTogYW55KSA9PiAoe1xuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHBsYWNlLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheU5hbWU6IHBsYWNlLmRpc3BsYXlOYW1lPy50ZXh0ID8ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IHBsYWNlLmRpc3BsYXlOYW1lLnRleHQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFuZ3VhZ2VDb2RlOiBwbGFjZS5kaXNwbGF5TmFtZS5sYW5ndWFnZUNvZGVcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gOiBwbGFjZS5kaXNwbGF5TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHByaW1hcnlUeXBlOiBwbGFjZS5wcmltYXJ5VHlwZSB8fCAncGxhY2UnLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGhvdG9zOiBwbGFjZS5waG90b3M/Lm1hcCgocGhvdG86IGFueSkgPT4gKHsgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogcGhvdG8ubmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgfSkpIHx8IFtdLFxuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0dGVkQWRkcmVzczogcGxhY2UuZm9ybWF0dGVkQWRkcmVzcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uOiBwbGFjZS5sb2NhdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIHByaW1hcnlUeXBlRGlzcGxheU5hbWU6IHBsYWNlLnByaW1hcnlUeXBlRGlzcGxheU5hbWUgPyB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogcGxhY2UucHJpbWFyeVR5cGVEaXNwbGF5TmFtZS50ZXh0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhbmd1YWdlQ29kZTogcGxhY2UucHJpbWFyeVR5cGVEaXNwbGF5TmFtZS5sYW5ndWFnZUNvZGVcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgZXJyb3JEYXRhID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGZldGNoIHBsYWNlczonLCB7XG4gICAgICAgICAgICAgICAgc3RhdHVzOiByZXNwb25zZS5zdGF0dXMsXG4gICAgICAgICAgICAgICAgc3RhdHVzVGV4dDogcmVzcG9uc2Uuc3RhdHVzVGV4dCxcbiAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3JEYXRhXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIG5lYXJieSBzZWFyY2g6JywgZXJyb3IpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gSWYgbmVhcmJ5IHNlYXJjaCBmYWlscywgdHJ5IHRleHQgc2VhcmNoIGFzIGZhbGxiYWNrXG4gICAgICAgIGNvbnNvbGUubG9nKCdGYWxsaW5nIGJhY2sgdG8gdGV4dCBzZWFyY2guLi4nKTtcbiAgICAgICAgY29uc3Qgc2VhcmNoUXVlcnkgPSBmcm9tUGxhY2VUeXBlcyA/IHBsYWNlVHlwZXMhWzBdIDogcHJlZmVyZW5jZXMhWzBdO1xuICAgICAgICByZXR1cm4gYXdhaXQgc2VhcmNoTXVsdGlwbGVQbGFjZXNCeVRleHQoc2VhcmNoUXVlcnksIHsgbGF0aXR1ZGUsIGxvbmdpdHVkZSB9LCBtYXhSZXN1bHRzKTtcblxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIHBsYWNlczonLCBlcnJvcik7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG59OyJdLCJuYW1lcyI6WyJUcmF2ZWxQcmVmZXJlbmNlIiwicHJlZmVyZW5jZVRvUGxhY2VUeXBlcyIsIkN1bHR1cmUiLCJOYXR1cmUiLCJGb29kIiwiUmVsYXhhdGlvbiIsIkFkdmVudHVyZSIsIlNob3BwaW5nIiwiZ2V0UGxhY2VUeXBlc0Zyb21QcmVmZXJlbmNlcyIsInByZWZlcmVuY2VzIiwidHlwZXMiLCJTZXQiLCJyZWR1Y2UiLCJwcmVmIiwicGxhY2VUeXBlcyIsIkFycmF5IiwiZnJvbSIsImVycm9yIiwiY29uc29sZSIsImZvcm1hdFByaW1hcnlUeXBlIiwidHlwZSIsInNwbGl0IiwibWFwIiwid29yZCIsImNoYXJBdCIsInRvVXBwZXJDYXNlIiwic2xpY2UiLCJqb2luIiwiZ2V0UGxhY2VUeXBlRGlzcGxheU5hbWUiLCJwbGFjZSIsInByaW1hcnlUeXBlRGlzcGxheU5hbWUiLCJ0ZXh0IiwicHJpbWFyeVR5cGUiLCJzZWFyY2hQbGFjZUJ5VGV4dCIsInNlYXJjaFRleHQiLCJsb2NhdGlvbiIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19HT09HTEVfTUFQU19BUElfS0VZIiwicmVxdWVzdEJvZHkiLCJ0ZXh0UXVlcnkiLCJsb2NhdGlvbkJpYXMiLCJjaXJjbGUiLCJjZW50ZXIiLCJsYXRpdHVkZSIsImxvbmdpdHVkZSIsInJhZGl1cyIsImhlYWRlcnMiLCJIZWFkZXJzIiwicmVzcG9uc2UiLCJmZXRjaCIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5Iiwib2siLCJlcnJvckRhdGEiLCJzdGF0dXMiLCJzdGF0dXNUZXh0IiwiZGF0YSIsImpzb24iLCJwbGFjZXMiLCJpc0FycmF5IiwibGVuZ3RoIiwiaWQiLCJkaXNwbGF5TmFtZSIsImxhbmd1YWdlQ29kZSIsInBob3RvcyIsInBob3RvIiwibmFtZSIsIndpZHRoUHgiLCJoZWlnaHRQeCIsImF1dGhvckF0dHJpYnV0aW9ucyIsImZvcm1hdHRlZEFkZHJlc3MiLCJ1bmRlZmluZWQiLCJzZWFyY2hNdWx0aXBsZVBsYWNlc0J5VGV4dCIsIm1heFJlc3VsdHMiLCJsb2ciLCJtYXhSZXN1bHRDb3VudCIsImZldGNoUGxhY2VzIiwiZnJvbVByZWZlcmVuY2VzIiwiZnJvbVBsYWNlVHlwZXMiLCJpbmNsdWRlZFR5cGVzIiwibG9jYXRpb25SZXN0cmljdGlvbiIsInNlYXJjaFF1ZXJ5Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./utils/places-utils.ts\n");

/***/ })

};
;