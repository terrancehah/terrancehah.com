"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "components_map-component_tsx";
exports.ids = ["components_map-component_tsx"];
exports.modules = {

/***/ "./components/map-component.tsx":
/*!**************************************!*\
  !*** ./components/map-component.tsx ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"react/jsx-dev-runtime\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_script__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/script */ \"./node_modules/next/script.js\");\n/* harmony import */ var next_script__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_script__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _utils_places_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/utils/places-utils */ \"./utils/places-utils.ts\");\n/* harmony import */ var _utils_session_manager__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/session-manager */ \"./utils/session-manager.ts\");\n\n\n\n\n\nconst MapComponent = ({ city, apiKey })=>{\n    const mapRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [map, setMap] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [markers, setMarkers] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(new Map());\n    const [infoWindow, setInfoWindow] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(true);\n    const [scriptLoaded, setScriptLoaded] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const [selectedPlace, setSelectedPlace] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const [savedPlaces, setSavedPlaces] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(new Map());\n    const markersRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(new Map());\n    const infoWindowRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [markerCount, setMarkerCount] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    // Memoize getSavedPlaces to prevent unnecessary re-renders\n    // const getSavedPlaces = useCallback(() => {\n    //     const now = Date.now();\n    //     // Only update if more than 1000ms has passed since last update\n    //     if (now - lastUpdateRef.current < 1000) {\n    //         return savedPlacesRef.current;\n    //     }\n    //     lastUpdateRef.current = now;\n    //     return savedPlacesRef.current;\n    // }, []);\n    // Expose getSavedPlaces to window with debouncing\n    // useEffect(() => {\n    //     if (typeof window !== 'undefined') {\n    //         window.getSavedPlaces = getSavedPlaces;\n    //     }\n    //     return () => {\n    //         if (typeof window !== 'undefined') {\n    //             delete window.getSavedPlaces;\n    //         }\n    //     };\n    // }, [getSavedPlaces]);\n    // // Update savedPlacesRef when places are added/removed\n    // const updateSavedPlaces = useCallback((places: Place[]) => {\n    //     savedPlacesRef.current = places;\n    //     lastUpdateRef.current = Date.now();\n    // }, []);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        console.log(\"MapComponent: Received props:\", {\n            city,\n            apiKeyLength: apiKey?.length\n        });\n        if (!apiKey) {\n            console.error(\"MapComponent: Google Maps API key is missing\");\n            setError(\"Google Maps API key is missing\");\n            setIsLoading(false);\n            return;\n        }\n        if (!city) {\n            // Try to get destination from session\n            const sessionData = sessionStorage.getItem(_utils_session_manager__WEBPACK_IMPORTED_MODULE_4__.SESSION_CONFIG.STORAGE_KEY);\n            if (sessionData) {\n                try {\n                    const parsed = JSON.parse(sessionData);\n                    if (!parsed.travelDetails?.destination) {\n                        setError(\"No destination specified\");\n                        setIsLoading(false);\n                        return;\n                    }\n                    city = parsed.travelDetails.destination;\n                } catch (error) {\n                    console.error(\"Error reading destination from session:\", error);\n                    setError(\"No destination specified\");\n                    setIsLoading(false);\n                    return;\n                }\n            } else {\n                setError(\"No destination specified\");\n                setIsLoading(false);\n                return;\n            }\n        }\n        if (!scriptLoaded || !mapRef.current) {\n            console.log(\"MapComponent: Waiting for script to load or map ref to be ready...\");\n            return;\n        }\n        let isInitialized = false;\n        console.log(\"MapComponent: Initializing map with city:\", city);\n        const initMap = async ()=>{\n            if (isInitialized) return;\n            try {\n                // Import required libraries\n                const { Map: Map1 } = await window.google.maps.importLibrary(\"maps\");\n                const { AdvancedMarkerElement } = await google.maps.importLibrary(\"marker\");\n                const geocoder = new window.google.maps.Geocoder();\n                geocoder.geocode({\n                    address: city\n                }, async (results, status)=>{\n                    console.log(\"Geocoding response:\", {\n                        status,\n                        resultsLength: results?.length\n                    });\n                    if (status !== \"OK\" || !results?.[0]?.geometry?.location) {\n                        console.error(\"Geocoding failed:\", status);\n                        setError(`Could not find location for ${city}`);\n                        setIsLoading(false);\n                        return;\n                    }\n                    try {\n                        const location = results[0].geometry.location;\n                        const newMap = new Map1(mapRef.current, {\n                            center: location,\n                            zoom: 12,\n                            mapId: \"2d604af04a7c7fa8\"\n                        });\n                        setMap(newMap);\n                        isInitialized = true;\n                        setIsLoading(false);\n                        const newInfoWindow = new google.maps.InfoWindow({\n                            maxWidth: 400\n                        });\n                        setInfoWindow(newInfoWindow);\n                        infoWindowRef.current = newInfoWindow;\n                        const createCityInfoWindowContent = async (city, location)=>{\n                            try {\n                                // Search for the city to get its details including photos\n                                const cityPlace = await (0,_utils_places_utils__WEBPACK_IMPORTED_MODULE_3__.searchPlaceByText)(city, {\n                                    latitude: location.lat(),\n                                    longitude: location.lng()\n                                }, city);\n                                if (!cityPlace) return null;\n                                // Create a photo carousel HTML\n                                const photoCarousel = cityPlace.photos && cityPlace.photos.length > 0 ? `\n                                            <div class=\"relative w-full\" style=\"height: 200px;\">\n                                                <div class=\"carousel-container overflow-hidden w-full h-full\">\n                                                    <div class=\"carousel-track flex transition-transform duration-500\" style=\"height: 100%;\">\n                                                        ${cityPlace.photos.slice(0, 5).map((photo, index)=>`\n                                                            <div class=\"carousel-slide w-full h-full flex-none\">\n                                                                <img src=\"https://places.googleapis.com/v1/${photo.name}/media?maxHeightPx=340&maxWidthPx=340&key=${apiKey}\"\n                                                                    alt=\"${city}\"\n                                                                    class=\"w-full h-full object-cover\"\n                                                                />\n                                                            </div>\n                                                        `).join(\"\")}\n                                                    </div>\n                                                </div>\n                                                <button onclick=\"window.prevSlide()\" class=\"absolute left-2 top-1/2 transform -translate-y-1/2 bg-white/80 rounded-full p-1 shadow-md hover:bg-white\">\n                                                    <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" class=\"w-5 h-5\">\n                                                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M15.75 19.5L8.25 12l7.5-7.5\" />\n                                                    </svg>\n                                                </button>\n                                                <button onclick=\"window.nextSlide()\" class=\"absolute right-2 top-1/2 transform -translate-y-1/2 bg-white/80 rounded-full p-1 shadow-md hover:bg-white\">\n                                                    <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" stroke-width=\"1.5\" stroke=\"currentColor\" class=\"w-5 h-5\">\n                                                        <path stroke-linecap=\"round\" stroke-linejoin=\"round\" d=\"M8.25 4.5l7.5 7.5-7.5 7.5\" />\n                                                    </svg>\n                                                </button>\n                                                <div class=\"absolute bottom-2 left-0 right-0 flex justify-center gap-1\">\n                                                    ${cityPlace.photos.slice(0, 5).map((_, index)=>`\n                                                        <button onclick=\"window.goToSlide(${index})\" class=\"w-2 h-2 rounded-full bg-white/80 hover:bg-white shadow-sm carousel-dot\" data-index=\"${index}\">\n                                                        </button>\n                                                    `).join(\"\")}\n                                                </div>\n                                            </div>\n                                        ` : \"\";\n                                // Add carousel control functions to window\n                                if (cityPlace.photos && cityPlace.photos.length > 0) {\n                                    const numSlides = Math.min(cityPlace.photos.length, 5);\n                                    window.currentSlide = 0;\n                                    window.updateCarousel = ()=>{\n                                        const track = document.querySelector(\".carousel-track\");\n                                        if (track) {\n                                            track.style.transform = `translateX(-${window.currentSlide * 100}%)`;\n                                            // Update dots\n                                            document.querySelectorAll(\".carousel-dot\").forEach((dot, index)=>{\n                                                if (index === window.currentSlide) {\n                                                    dot.classList.add(\"bg-white\");\n                                                    dot.classList.remove(\"bg-white/80\");\n                                                } else {\n                                                    dot.classList.remove(\"bg-white\");\n                                                    dot.classList.add(\"bg-white/80\");\n                                                }\n                                            });\n                                        }\n                                    };\n                                    window.nextSlide = ()=>{\n                                        window.currentSlide = (window.currentSlide + 1) % numSlides;\n                                        window.updateCarousel();\n                                    };\n                                    window.prevSlide = ()=>{\n                                        window.currentSlide = (window.currentSlide - 1 + numSlides) % numSlides;\n                                        window.updateCarousel();\n                                    };\n                                    window.goToSlide = (index)=>{\n                                        window.currentSlide = index;\n                                        window.updateCarousel();\n                                    };\n                                }\n                                return `\n                                        <div class=\"bg-white rounded-lg shadow-sm\" style=\"max-width: 340px;\">\n                                            ${photoCarousel}\n                                            <div class=\"p-4\">\n                                                <h2 class=\"text-xl font-semibold text-gray-900 mb-2\">${city}</h2>\n                                                ${cityPlace.formattedAddress ? `<p class=\"text-sm text-gray-500 mb-2\">${cityPlace.formattedAddress}</p>` : \"\"}\n                                            </div>\n                                        </div>\n                                    `;\n                            } catch (error) {\n                                console.error(\"Error creating city info window:\", error);\n                                return null;\n                            }\n                        };\n                        // Create a marker for the city\n                        const cityMarker = new google.maps.marker.AdvancedMarkerElement({\n                            map: newMap,\n                            position: location,\n                            title: city\n                        });\n                        // Add click listener to the marker\n                        cityMarker.addListener(\"gmp-click\", async ()=>{\n                            if (infoWindow) {\n                                const content = createCityInfoWindowContent(city, location);\n                                if (content) {\n                                    infoWindow.setContent(await content);\n                                    infoWindow.open(newMap, cityMarker);\n                                }\n                            }\n                        });\n                        markers.set(city, cityMarker);\n                        // Add click listener for future interaction\n                        cityMarker.addListener(\"gmp-click\", async ()=>{\n                            const content = await createCityInfoWindowContent(city, location);\n                            if (content) {\n                                newInfoWindow.setContent(content);\n                                newInfoWindow.open({\n                                    anchor: cityMarker,\n                                    map: newMap\n                                });\n                            }\n                        });\n                    } catch (err) {\n                        console.error(\"Error setting up map:\", err);\n                        setError(\"Failed to initialize map\");\n                    }\n                });\n            } catch (err) {\n                console.error(\"Error initializing map:\", err);\n                setError(\"Failed to initialize map\");\n                setIsLoading(false);\n            }\n        };\n        initMap();\n    }, [\n        city,\n        scriptLoaded,\n        apiKey\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!map) return;\n        window.removePlaceFromMap = (placeId)=>{\n            console.log(\"Debug - Starting removal process for placeId:\", placeId);\n            try {\n                const marker = markersRef.current.get(placeId);\n                if (marker) {\n                    console.log(\"Debug - Found marker:\", marker);\n                    // Remove marker from map\n                    marker.map = null;\n                    // Close info window if open\n                    if (infoWindowRef.current) {\n                        infoWindowRef.current.close();\n                    }\n                    // Remove event listeners\n                    google.maps.event.clearInstanceListeners(marker);\n                    // Clean up references\n                    markersRef.current.delete(placeId);\n                    _utils_places_utils__WEBPACK_IMPORTED_MODULE_3__.savedPlacesManager.removePlace(placeId);\n                    console.log(\"Debug - After removal markers:\", [\n                        ...markersRef.current.entries()\n                    ]);\n                    console.log(\"Debug - Successfully removed marker and place:\", placeId);\n                } else {\n                    console.warn(\"Debug - Could not find marker for placeId:\", placeId);\n                }\n            } catch (error) {\n                console.error(\"Debug - Error during marker removal:\", error);\n            }\n            // Notify components that places changed\n            window.dispatchEvent(new CustomEvent(\"savedPlacesChanged\", {\n                detail: {\n                    places: Array.from(_utils_places_utils__WEBPACK_IMPORTED_MODULE_3__.savedPlacesManager.places.values()),\n                    count: _utils_places_utils__WEBPACK_IMPORTED_MODULE_3__.savedPlacesManager.places.size\n                }\n            }));\n        };\n        window.addPlaceToMap = async (data)=>{\n            try {\n                // Add this check at the start of the function\n                const markerId = data.place?.id;\n                if (!markerId) {\n                    console.error(\"Debug - No place ID provided\");\n                    return;\n                }\n                // Add this check for duplicates\n                if (_utils_places_utils__WEBPACK_IMPORTED_MODULE_3__.savedPlacesManager.hasPlace(markerId)) {\n                    console.log(\"Debug - Place already exists:\", markerId);\n                    return;\n                }\n                // Add to global storage first\n                if (data.place) {\n                    _utils_places_utils__WEBPACK_IMPORTED_MODULE_3__.savedPlacesManager.addPlace(data.place);\n                }\n                const [{ AdvancedMarkerElement }, { PinElement }] = await Promise.all([\n                    google.maps.importLibrary(\"marker\"),\n                    google.maps.importLibrary(\"marker\")\n                ]);\n                const pinElement = new google.maps.marker.PinElement({\n                    scale: 1\n                });\n                console.log(\"Debug - Creating marker with ID:\", markerId);\n                // Remove existing marker if it exists\n                if (markersRef.current.has(markerId)) {\n                    const existingMarker = markersRef.current.get(markerId);\n                    if (existingMarker) {\n                        existingMarker.map = null;\n                        if (existingMarker.element) {\n                            existingMarker.element.remove();\n                        }\n                        markersRef.current.delete(markerId);\n                    }\n                }\n                const marker = new google.maps.marker.AdvancedMarkerElement({\n                    position: {\n                        lat: data.latitude,\n                        lng: data.longitude\n                    },\n                    title: data.title,\n                    content: pinElement.element,\n                    gmpDraggable: false\n                });\n                // Set the map property after creation\n                marker.map = map;\n                // Add click listener\n                marker.addListener(\"gmp-click\", ()=>{\n                    if (data.place) {\n                        window.currentInfoWindowMarker = {\n                            markerId: markerId,\n                            marker: marker\n                        };\n                        const content = createPlaceInfoWindowContent(data.place, markerId);\n                        if (content && infoWindowRef.current) {\n                            infoWindowRef.current.setContent(content);\n                            infoWindowRef.current.open(map, marker);\n                        }\n                    }\n                });\n                // Store the marker reference\n                // markersRef.current.set(markerId, marker);\n                // if (data.place) {\n                //     savedPlacesManager.addPlace(data.place);\n                //     // Force a re-render when adding a marker\n                //     setMarkerCount(prev => prev + 1);\n                //     setSavedPlaces(new Map(savedPlacesManager.places));\n                //     console.log('Debug - Added place:', savedPlacesManager.places);\n                // }\n                // console.log('Debug - Marker added successfully');\n                // Notify components that places changed\n                window.dispatchEvent(new CustomEvent(\"savedPlacesChanged\", {\n                    detail: {\n                        places: Array.from(_utils_places_utils__WEBPACK_IMPORTED_MODULE_3__.savedPlacesManager.places.values()),\n                        count: _utils_places_utils__WEBPACK_IMPORTED_MODULE_3__.savedPlacesManager.places.size\n                    }\n                }));\n            } catch (err) {\n                console.error(\"Error adding place marker:\", err);\n            }\n        };\n        window.getSavedPlaces = ()=>{\n            return _utils_places_utils__WEBPACK_IMPORTED_MODULE_3__.savedPlacesManager.getPlaces();\n        };\n    }, [\n        map,\n        infoWindow\n    ]);\n    // // Add a useEffect to monitor savedPlaces changes\n    // useEffect(() => {\n    //     console.log('Current saved places:', [...globalSavedPlaces.entries()]);\n    // }, [savedPlaces]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        // Save to session storage when places change\n        const sessionData = sessionStorage.getItem(_utils_session_manager__WEBPACK_IMPORTED_MODULE_4__.SESSION_CONFIG.STORAGE_KEY);\n        if (sessionData) {\n            try {\n                const parsed = JSON.parse(sessionData);\n                const updatedPlaces = _utils_places_utils__WEBPACK_IMPORTED_MODULE_3__.savedPlacesManager.getPlaces();\n                const sessionDataWithUpdatedPlaces = {\n                    ...parsed,\n                    lastActive: Date.now(),\n                    savedPlaces: updatedPlaces\n                };\n                sessionStorage.setItem(_utils_session_manager__WEBPACK_IMPORTED_MODULE_4__.SESSION_CONFIG.STORAGE_KEY, JSON.stringify(sessionDataWithUpdatedPlaces));\n            } catch (error) {\n                console.error(\"Error saving places to session:\", error);\n            }\n        }\n    }, [\n        savedPlaces\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const handleVisibilityChange = ()=>{\n            if (document.visibilityState === \"visible\" && map) {\n                window.google?.maps?.event?.trigger(map, \"resize\");\n            }\n        };\n        document.addEventListener(\"visibilitychange\", handleVisibilityChange);\n        return ()=>{\n            document.removeEventListener(\"visibilitychange\", handleVisibilityChange);\n        };\n    }, [\n        map\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        // Load saved places from session storage on mount\n        const sessionData = sessionStorage.getItem(_utils_session_manager__WEBPACK_IMPORTED_MODULE_4__.SESSION_CONFIG.STORAGE_KEY);\n        if (sessionData) {\n            try {\n                const parsed = JSON.parse(sessionData);\n                if (parsed.savedPlaces) {\n                    parsed.savedPlaces.forEach((place)=>{\n                        if (place.id) {\n                            _utils_places_utils__WEBPACK_IMPORTED_MODULE_3__.savedPlacesManager.addPlace(place);\n                        }\n                    });\n                    // Notify components of initial load\n                    window.dispatchEvent(new CustomEvent(\"savedPlacesChanged\", {\n                        detail: {\n                            places: Array.from(_utils_places_utils__WEBPACK_IMPORTED_MODULE_3__.savedPlacesManager.places.values()),\n                            count: _utils_places_utils__WEBPACK_IMPORTED_MODULE_3__.savedPlacesManager.places.size\n                        }\n                    }));\n                }\n            } catch (error) {\n                console.error(\"Error loading saved places from session:\", error);\n            }\n        }\n    }, []);\n    const getPhotoUrl = (photo, index)=>{\n        return photo.getURI?.() || \"\";\n    };\n    const handleSlideChange = (_, index)=>{\n        if (window.currentSlide !== undefined) {\n            window.currentSlide = index;\n        }\n    };\n    //Place info window\n    const createPlaceInfoWindowContent = (place, markerId)=>{\n        console.log(\"Debug - Creating info window content for markerId:\", markerId);\n        const photoUrl = place.photos && place.photos[0] ? `https://places.googleapis.com/v1/${place.photos[0].name}/media?maxHeightPx=200&maxWidthPx=300&key=${apiKey}` : \"\";\n        const placeTitle = typeof place.displayName === \"string\" ? place.displayName : place.displayName.text;\n        return `\n            <div class=\"bg-white rounded-lg shadow-sm\" style=\"max-width: 300px;\">\n                ${photoUrl ? `\n                    <div style=\"height: 150px; width: 100%;\">\n                        <img src=\"${photoUrl}\" \n                            alt=\"${placeTitle}\"\n                            style=\"width: 100%; height: 100%; object-fit: cover; border-top-left-radius: 0.5rem; border-top-right-radius: 0.5rem;\"\n                        />\n                    </div>\n                ` : \"\"}\n\n                <div class=\"p-3\">\n                    <div class=\"flex justify-between items-start\">\n                        <h3 class=\"text-lg font-semibold text-gray-900 mb-1\">\n                            ${placeTitle}\n                        </h3>\n                    </div>\n                    ${place.primaryTypeDisplayName ? `<div class=\"text-sm text-gray-600 mb-1\">${place.primaryTypeDisplayName.text}</div>` : \"\"}\n                    ${place.formattedAddress ? `<p class=\"text-sm text-gray-500\">${place.formattedAddress}</p>` : \"\"}\n                </div>\n            </div>\n        `;\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"relative w-full h-full\",\n        children: [\n            apiKey && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((next_script__WEBPACK_IMPORTED_MODULE_2___default()), {\n                src: `https://maps.googleapis.com/maps/api/js?key=${apiKey}&libraries=places,marker&v=beta&callback=Function.prototype`,\n                strategy: \"afterInteractive\",\n                onLoad: ()=>{\n                    console.log(\"Google Maps script loaded\");\n                    setScriptLoaded(true);\n                },\n                onError: (e)=>{\n                    console.error(\"Failed to load Google Maps script:\", e);\n                    setError(\"Failed to load Google Maps\");\n                    setIsLoading(false);\n                }\n            }, void 0, false, {\n                fileName: \"/Users/terrancehah/Documents/terrancehah.com/components/map-component.tsx\",\n                lineNumber: 601,\n                columnNumber: 17\n            }, undefined),\n            error && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"absolute inset-0 flex items-center justify-center bg-gray-100 text-red-500 p-4 text-center\",\n                children: error\n            }, void 0, false, {\n                fileName: \"/Users/terrancehah/Documents/terrancehah.com/components/map-component.tsx\",\n                lineNumber: 616,\n                columnNumber: 17\n            }, undefined),\n            isLoading && !error && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"absolute inset-0 flex items-center justify-center bg-gray-100\",\n                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    className: \"text-gray-600\",\n                    children: [\n                        \"Loading map...\",\n                        !apiKey && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            children: \"Waiting for API key...\"\n                        }, void 0, false, {\n                            fileName: \"/Users/terrancehah/Documents/terrancehah.com/components/map-component.tsx\",\n                            lineNumber: 624,\n                            columnNumber: 37\n                        }, undefined)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/terrancehah/Documents/terrancehah.com/components/map-component.tsx\",\n                    lineNumber: 622,\n                    columnNumber: 21\n                }, undefined)\n            }, void 0, false, {\n                fileName: \"/Users/terrancehah/Documents/terrancehah.com/components/map-component.tsx\",\n                lineNumber: 621,\n                columnNumber: 17\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                ref: mapRef,\n                className: \"w-full h-full\"\n            }, void 0, false, {\n                fileName: \"/Users/terrancehah/Documents/terrancehah.com/components/map-component.tsx\",\n                lineNumber: 628,\n                columnNumber: 13\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/terrancehah/Documents/terrancehah.com/components/map-component.tsx\",\n        lineNumber: 599,\n        columnNumber: 9\n    }, undefined);\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (MapComponent);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Y29tcG9uZW50LnRzeD8zNDBmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QsIHVzZVJlZiwgdXNlU3RhdGUsIHVzZUNhbGxiYWNrLCB1c2VNZW1vIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IFNjcmlwdCBmcm9tICduZXh0L3NjcmlwdCc7XG5pbXBvcnQgeyBQbGFjZSwgc2F2ZWRQbGFjZXNNYW5hZ2VyLCBzZWFyY2hQbGFjZUJ5VGV4dCB9IGZyb20gJ0AvdXRpbHMvcGxhY2VzLXV0aWxzJztcbmltcG9ydCB7IFNFU1NJT05fQ09ORklHIH0gZnJvbSAnLi4vdXRpbHMvc2Vzc2lvbi1tYW5hZ2VyJztcblxuaW50ZXJmYWNlIE1hcENvbXBvbmVudFByb3BzIHtcbiAgICBjaXR5OiBzdHJpbmc7XG4gICAgYXBpS2V5OiBzdHJpbmc7XG59XG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgICBpbnRlcmZhY2UgV2luZG93IHtcbiAgICAgICAgaW5pdE1hcDogKCkgPT4gdm9pZDtcbiAgICAgICAgY3VycmVudFNsaWRlOiBudW1iZXI7XG4gICAgICAgIGN1cnJlbnRJbmZvV2luZG93PzogZ29vZ2xlLm1hcHMuSW5mb1dpbmRvdztcbiAgICAgICAgdXBkYXRlQ2Fyb3VzZWw6ICgpID0+IHZvaWQ7XG4gICAgICAgIG5leHRTbGlkZTogKCkgPT4gdm9pZDtcbiAgICAgICAgcHJldlNsaWRlOiAoKSA9PiB2b2lkO1xuICAgICAgICBnb1RvU2xpZGU6IChpbmRleDogbnVtYmVyKSA9PiB2b2lkO1xuICAgICAgICBnb29nbGU6IHR5cGVvZiBnb29nbGU7XG4gICAgICAgIHJlbW92ZVBsYWNlRnJvbU1hcD86ICh0aXRsZTogc3RyaW5nKSA9PiB2b2lkO1xuICAgICAgICBjdXJyZW50SW5mb1dpbmRvd01hcmtlcj86IHtcbiAgICAgICAgICAgIG1hcmtlcklkOiBzdHJpbmc7XG4gICAgICAgICAgICBtYXJrZXI6IGdvb2dsZS5tYXBzLm1hcmtlci5BZHZhbmNlZE1hcmtlckVsZW1lbnQ7XG4gICAgICAgIH07XG4gICAgICAgIGFkZFBsYWNlVG9NYXA/OiAocGxhY2U6IHsgXG4gICAgICAgICAgICBsYXRpdHVkZTogbnVtYmVyOyBcbiAgICAgICAgICAgIGxvbmdpdHVkZTogbnVtYmVyOyBcbiAgICAgICAgICAgIHRpdGxlPzogc3RyaW5nO1xuICAgICAgICAgICAgcGxhY2U/OiBQbGFjZTtcbiAgICAgICAgfSkgPT4gdm9pZDtcbiAgICAgICAgY2xlYXJQbGFjZU1hcmtlcnM/OiAoKSA9PiB2b2lkO1xuICAgICAgICBzYXZlZFBsYWNlczogUGxhY2VbXTtcbiAgICAgICAgZ2V0U2F2ZWRQbGFjZXM/OiAoKSA9PiBQbGFjZVtdO1xuICAgIH1cbn1cblxuLy8gTW9kaWZ5IG1hcC1jb21wb25lbnQudHN4IHRvIGV4cG9zZSBhIHByb3BlciBnbG9iYWwgaW50ZXJmYWNlXG4vLyBBdCB0aGUgdG9wIG9mIGZpbGVcbmludGVyZmFjZSBTYXZlZFBsYWNlc01hbmFnZXIge1xuICAgIGFkZFBsYWNlOiAocGxhY2U6IFBsYWNlKSA9PiB2b2lkO1xuICAgIHJlbW92ZVBsYWNlOiAocGxhY2VJZDogc3RyaW5nKSA9PiB2b2lkO1xuICAgIGdldFBsYWNlczogKCkgPT4gUGxhY2VbXTtcbiAgICBoYXNQbGFjZTogKHBsYWNlSWQ6IHN0cmluZykgPT4gYm9vbGVhbjtcbn1cblxuLy8gRXhwb3NlIHR5cGUtc2FmZSBnbG9iYWwgbWV0aG9kc1xuZGVjbGFyZSBnbG9iYWwge1xuICAgIGludGVyZmFjZSBXaW5kb3cge1xuICAgICAgICBzYXZlZFBsYWNlc01hbmFnZXI6IFNhdmVkUGxhY2VzTWFuYWdlcjtcbiAgICB9XG59XG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgICBuYW1lc3BhY2UgZ29vZ2xlLm1hcHMge1xuICAgICAgICBpbnRlcmZhY2UgTWFya2VyTGlicmFyeSB7XG4gICAgICAgICAgICBBZHZhbmNlZE1hcmtlckVsZW1lbnQ6IHR5cGVvZiBnb29nbGUubWFwcy5tYXJrZXIuQWR2YW5jZWRNYXJrZXJFbGVtZW50O1xuICAgICAgICAgICAgUGluRWxlbWVudDogdHlwZW9mIGdvb2dsZS5tYXBzLm1hcmtlci5QaW5FbGVtZW50O1xuICAgICAgICB9XG4gICAgfVxufVxuXG5cbmNvbnN0IE1hcENvbXBvbmVudDogUmVhY3QuRkM8TWFwQ29tcG9uZW50UHJvcHM+ID0gKHsgY2l0eSwgYXBpS2V5IH0pID0+IHtcbiAgICBjb25zdCBtYXBSZWYgPSB1c2VSZWY8SFRNTERpdkVsZW1lbnQ+KG51bGwpO1xuICAgIGNvbnN0IFttYXAsIHNldE1hcF0gPSB1c2VTdGF0ZTxnb29nbGUubWFwcy5NYXAgfCBudWxsPihudWxsKTtcbiAgICBjb25zdCBbbWFya2Vycywgc2V0TWFya2Vyc10gPSB1c2VTdGF0ZTxNYXA8c3RyaW5nLCBnb29nbGUubWFwcy5tYXJrZXIuQWR2YW5jZWRNYXJrZXJFbGVtZW50Pj4obmV3IE1hcCgpKTtcbiAgICBjb25zdCBbaW5mb1dpbmRvdywgc2V0SW5mb1dpbmRvd10gPSB1c2VTdGF0ZTxnb29nbGUubWFwcy5JbmZvV2luZG93IHwgbnVsbD4obnVsbCk7XG4gICAgY29uc3QgW2Vycm9yLCBzZXRFcnJvcl0gPSB1c2VTdGF0ZTxzdHJpbmcgfCBudWxsPihudWxsKTtcbiAgICBjb25zdCBbaXNMb2FkaW5nLCBzZXRJc0xvYWRpbmddID0gdXNlU3RhdGUodHJ1ZSk7XG4gICAgY29uc3QgW3NjcmlwdExvYWRlZCwgc2V0U2NyaXB0TG9hZGVkXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgICBjb25zdCBbc2VsZWN0ZWRQbGFjZSwgc2V0U2VsZWN0ZWRQbGFjZV0gPSB1c2VTdGF0ZTxQbGFjZSB8IG51bGw+KG51bGwpO1xuICAgIGNvbnN0IFtzYXZlZFBsYWNlcywgc2V0U2F2ZWRQbGFjZXNdID0gdXNlU3RhdGU8TWFwPHN0cmluZywgUGxhY2U+PihuZXcgTWFwKCkpO1xuICAgIGNvbnN0IG1hcmtlcnNSZWYgPSB1c2VSZWY8TWFwPHN0cmluZywgZ29vZ2xlLm1hcHMubWFya2VyLkFkdmFuY2VkTWFya2VyRWxlbWVudD4+KG5ldyBNYXAoKSk7XG4gICAgY29uc3QgaW5mb1dpbmRvd1JlZiA9IHVzZVJlZjxnb29nbGUubWFwcy5JbmZvV2luZG93IHwgbnVsbD4obnVsbCk7XG4gICAgY29uc3QgW21hcmtlckNvdW50LCBzZXRNYXJrZXJDb3VudF0gPSB1c2VTdGF0ZSgwKTtcblxuICAgIC8vIE1lbW9pemUgZ2V0U2F2ZWRQbGFjZXMgdG8gcHJldmVudCB1bm5lY2Vzc2FyeSByZS1yZW5kZXJzXG4gICAgLy8gY29uc3QgZ2V0U2F2ZWRQbGFjZXMgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgLy8gICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgLy8gICAgIC8vIE9ubHkgdXBkYXRlIGlmIG1vcmUgdGhhbiAxMDAwbXMgaGFzIHBhc3NlZCBzaW5jZSBsYXN0IHVwZGF0ZVxuICAgIC8vICAgICBpZiAobm93IC0gbGFzdFVwZGF0ZVJlZi5jdXJyZW50IDwgMTAwMCkge1xuICAgIC8vICAgICAgICAgcmV0dXJuIHNhdmVkUGxhY2VzUmVmLmN1cnJlbnQ7XG4gICAgLy8gICAgIH1cbiAgICAvLyAgICAgbGFzdFVwZGF0ZVJlZi5jdXJyZW50ID0gbm93O1xuICAgIC8vICAgICByZXR1cm4gc2F2ZWRQbGFjZXNSZWYuY3VycmVudDtcbiAgICAvLyB9LCBbXSk7XG5cbiAgICAvLyBFeHBvc2UgZ2V0U2F2ZWRQbGFjZXMgdG8gd2luZG93IHdpdGggZGVib3VuY2luZ1xuICAgIC8vIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgIC8vICAgICAgICAgd2luZG93LmdldFNhdmVkUGxhY2VzID0gZ2V0U2F2ZWRQbGFjZXM7XG4gICAgLy8gICAgIH1cbiAgICAvLyAgICAgcmV0dXJuICgpID0+IHtcbiAgICAvLyAgICAgICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICAgIC8vICAgICAgICAgICAgIGRlbGV0ZSB3aW5kb3cuZ2V0U2F2ZWRQbGFjZXM7XG4gICAgLy8gICAgICAgICB9XG4gICAgLy8gICAgIH07XG4gICAgLy8gfSwgW2dldFNhdmVkUGxhY2VzXSk7XG5cbiAgICAvLyAvLyBVcGRhdGUgc2F2ZWRQbGFjZXNSZWYgd2hlbiBwbGFjZXMgYXJlIGFkZGVkL3JlbW92ZWRcbiAgICAvLyBjb25zdCB1cGRhdGVTYXZlZFBsYWNlcyA9IHVzZUNhbGxiYWNrKChwbGFjZXM6IFBsYWNlW10pID0+IHtcbiAgICAvLyAgICAgc2F2ZWRQbGFjZXNSZWYuY3VycmVudCA9IHBsYWNlcztcbiAgICAvLyAgICAgbGFzdFVwZGF0ZVJlZi5jdXJyZW50ID0gRGF0ZS5ub3coKTtcbiAgICAvLyB9LCBbXSk7XG5cbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZygnTWFwQ29tcG9uZW50OiBSZWNlaXZlZCBwcm9wczonLCB7IGNpdHksIGFwaUtleUxlbmd0aDogYXBpS2V5Py5sZW5ndGggfSk7XG4gICAgICAgIFxuICAgICAgICBpZiAoIWFwaUtleSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignTWFwQ29tcG9uZW50OiBHb29nbGUgTWFwcyBBUEkga2V5IGlzIG1pc3NpbmcnKTtcbiAgICAgICAgICAgIHNldEVycm9yKCdHb29nbGUgTWFwcyBBUEkga2V5IGlzIG1pc3NpbmcnKTtcbiAgICAgICAgICAgIHNldElzTG9hZGluZyhmYWxzZSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIWNpdHkpIHtcbiAgICAgICAgICAgIC8vIFRyeSB0byBnZXQgZGVzdGluYXRpb24gZnJvbSBzZXNzaW9uXG4gICAgICAgICAgICBjb25zdCBzZXNzaW9uRGF0YSA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oU0VTU0lPTl9DT05GSUcuU1RPUkFHRV9LRVkpO1xuICAgICAgICAgICAgaWYgKHNlc3Npb25EYXRhKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkID0gSlNPTi5wYXJzZShzZXNzaW9uRGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghcGFyc2VkLnRyYXZlbERldGFpbHM/LmRlc3RpbmF0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRFcnJvcignTm8gZGVzdGluYXRpb24gc3BlY2lmaWVkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNpdHkgPSBwYXJzZWQudHJhdmVsRGV0YWlscy5kZXN0aW5hdGlvbjtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciByZWFkaW5nIGRlc3RpbmF0aW9uIGZyb20gc2Vzc2lvbjonLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIHNldEVycm9yKCdObyBkZXN0aW5hdGlvbiBzcGVjaWZpZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgc2V0SXNMb2FkaW5nKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc2V0RXJyb3IoJ05vIGRlc3RpbmF0aW9uIHNwZWNpZmllZCcpO1xuICAgICAgICAgICAgICAgIHNldElzTG9hZGluZyhmYWxzZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFzY3JpcHRMb2FkZWQgfHwgIW1hcFJlZi5jdXJyZW50KSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnTWFwQ29tcG9uZW50OiBXYWl0aW5nIGZvciBzY3JpcHQgdG8gbG9hZCBvciBtYXAgcmVmIHRvIGJlIHJlYWR5Li4uJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaXNJbml0aWFsaXplZCA9IGZhbHNlO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKCdNYXBDb21wb25lbnQ6IEluaXRpYWxpemluZyBtYXAgd2l0aCBjaXR5OicsIGNpdHkpO1xuICAgICAgICBjb25zdCBpbml0TWFwID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKGlzSW5pdGlhbGl6ZWQpIHJldHVybjtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgLy8gSW1wb3J0IHJlcXVpcmVkIGxpYnJhcmllc1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgTWFwIH0gPSBhd2FpdCB3aW5kb3cuZ29vZ2xlLm1hcHMuaW1wb3J0TGlicmFyeShcIm1hcHNcIikgYXMgZ29vZ2xlLm1hcHMuTWFwc0xpYnJhcnk7XG4gICAgICAgICAgICAgICAgY29uc3QgeyBBZHZhbmNlZE1hcmtlckVsZW1lbnQgfSA9IGF3YWl0IGdvb2dsZS5tYXBzLmltcG9ydExpYnJhcnkoXCJtYXJrZXJcIikgYXMgZ29vZ2xlLm1hcHMuTWFya2VyTGlicmFyeTtcbiAgICAgICAgICAgICAgICBjb25zdCBnZW9jb2RlciA9IG5ldyB3aW5kb3cuZ29vZ2xlLm1hcHMuR2VvY29kZXIoKTtcblxuICAgICAgICAgICAgICAgIGdlb2NvZGVyLmdlb2NvZGUoXG4gICAgICAgICAgICAgICAgICAgIHsgYWRkcmVzczogY2l0eSB9LFxuICAgICAgICAgICAgICAgICAgICBhc3luYyAocmVzdWx0cywgc3RhdHVzKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnR2VvY29kaW5nIHJlc3BvbnNlOicsIHsgc3RhdHVzLCByZXN1bHRzTGVuZ3RoOiByZXN1bHRzPy5sZW5ndGggfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdGF0dXMgIT09ICdPSycgfHwgIXJlc3VsdHM/LlswXT8uZ2VvbWV0cnk/LmxvY2F0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignR2VvY29kaW5nIGZhaWxlZDonLCBzdGF0dXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEVycm9yKGBDb3VsZCBub3QgZmluZCBsb2NhdGlvbiBmb3IgJHtjaXR5fWApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldElzTG9hZGluZyhmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGxvY2F0aW9uID0gcmVzdWx0c1swXS5nZW9tZXRyeS5sb2NhdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdNYXAgPSBuZXcgTWFwKG1hcFJlZi5jdXJyZW50ISwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjZW50ZXI6IGxvY2F0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB6b29tOiAxMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFwSWQ6ICcyZDYwNGFmMDRhN2M3ZmE4JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRNYXAobmV3TWFwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0luaXRpYWxpemVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3SW5mb1dpbmRvdyA9IG5ldyBnb29nbGUubWFwcy5JbmZvV2luZG93KHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4V2lkdGg6IDQwMFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEluZm9XaW5kb3cobmV3SW5mb1dpbmRvdyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5mb1dpbmRvd1JlZi5jdXJyZW50ID0gbmV3SW5mb1dpbmRvdztcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNyZWF0ZUNpdHlJbmZvV2luZG93Q29udGVudCA9IGFzeW5jIChjaXR5OiBzdHJpbmcsIGxvY2F0aW9uOiBnb29nbGUubWFwcy5MYXRMbmcpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNlYXJjaCBmb3IgdGhlIGNpdHkgdG8gZ2V0IGl0cyBkZXRhaWxzIGluY2x1ZGluZyBwaG90b3NcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNpdHlQbGFjZSA9IGF3YWl0IHNlYXJjaFBsYWNlQnlUZXh0KGNpdHksIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXRpdHVkZTogbG9jYXRpb24ubGF0KCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9uZ2l0dWRlOiBsb2NhdGlvbi5sbmcoKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBjaXR5KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjaXR5UGxhY2UpIHJldHVybiBudWxsO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDcmVhdGUgYSBwaG90byBjYXJvdXNlbCBIVE1MXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwaG90b0Nhcm91c2VsID0gY2l0eVBsYWNlLnBob3RvcyAmJiBjaXR5UGxhY2UucGhvdG9zLmxlbmd0aCA+IDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInJlbGF0aXZlIHctZnVsbFwiIHN0eWxlPVwiaGVpZ2h0OiAyMDBweDtcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjYXJvdXNlbC1jb250YWluZXIgb3ZlcmZsb3ctaGlkZGVuIHctZnVsbCBoLWZ1bGxcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2Fyb3VzZWwtdHJhY2sgZmxleCB0cmFuc2l0aW9uLXRyYW5zZm9ybSBkdXJhdGlvbi01MDBcIiBzdHlsZT1cImhlaWdodDogMTAwJTtcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtjaXR5UGxhY2UucGhvdG9zLnNsaWNlKDAsIDUpLm1hcCgocGhvdG8sIGluZGV4KSA9PiBgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2Fyb3VzZWwtc2xpZGUgdy1mdWxsIGgtZnVsbCBmbGV4LW5vbmVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cImh0dHBzOi8vcGxhY2VzLmdvb2dsZWFwaXMuY29tL3YxLyR7cGhvdG8ubmFtZX0vbWVkaWE/bWF4SGVpZ2h0UHg9MzQwJm1heFdpZHRoUHg9MzQwJmtleT0ke2FwaUtleX1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbHQ9XCIke2NpdHl9XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJ3LWZ1bGwgaC1mdWxsIG9iamVjdC1jb3ZlclwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgKS5qb2luKCcnKX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPVwid2luZG93LnByZXZTbGlkZSgpXCIgY2xhc3M9XCJhYnNvbHV0ZSBsZWZ0LTIgdG9wLTEvMiB0cmFuc2Zvcm0gLXRyYW5zbGF0ZS15LTEvMiBiZy13aGl0ZS84MCByb3VuZGVkLWZ1bGwgcC0xIHNoYWRvdy1tZCBob3ZlcjpiZy13aGl0ZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGZpbGw9XCJub25lXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIHN0cm9rZS13aWR0aD1cIjEuNVwiIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIGNsYXNzPVwidy01IGgtNVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cGF0aCBzdHJva2UtbGluZWNhcD1cInJvdW5kXCIgc3Ryb2tlLWxpbmVqb2luPVwicm91bmRcIiBkPVwiTTE1Ljc1IDE5LjVMOC4yNSAxMmw3LjUtNy41XCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3N2Zz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPVwid2luZG93Lm5leHRTbGlkZSgpXCIgY2xhc3M9XCJhYnNvbHV0ZSByaWdodC0yIHRvcC0xLzIgdHJhbnNmb3JtIC10cmFuc2xhdGUteS0xLzIgYmctd2hpdGUvODAgcm91bmRlZC1mdWxsIHAtMSBzaGFkb3ctbWQgaG92ZXI6Ymctd2hpdGVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBmaWxsPVwibm9uZVwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBzdHJva2Utd2lkdGg9XCIxLjVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBjbGFzcz1cInctNSBoLTVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCIgZD1cIk04LjI1IDQuNWw3LjUgNy41LTcuNSA3LjVcIiAvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3ZnPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYWJzb2x1dGUgYm90dG9tLTIgbGVmdC0wIHJpZ2h0LTAgZmxleCBqdXN0aWZ5LWNlbnRlciBnYXAtMVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7Y2l0eVBsYWNlLnBob3Rvcy5zbGljZSgwLCA1KS5tYXAoKF8sIGluZGV4KSA9PiBgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gb25jbGljaz1cIndpbmRvdy5nb1RvU2xpZGUoJHtpbmRleH0pXCIgY2xhc3M9XCJ3LTIgaC0yIHJvdW5kZWQtZnVsbCBiZy13aGl0ZS84MCBob3ZlcjpiZy13aGl0ZSBzaGFkb3ctc20gY2Fyb3VzZWwtZG90XCIgZGF0YS1pbmRleD1cIiR7aW5kZXh9XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGApLmpvaW4oJycpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICcnO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGQgY2Fyb3VzZWwgY29udHJvbCBmdW5jdGlvbnMgdG8gd2luZG93XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2l0eVBsYWNlLnBob3RvcyAmJiBjaXR5UGxhY2UucGhvdG9zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBudW1TbGlkZXMgPSBNYXRoLm1pbihjaXR5UGxhY2UucGhvdG9zLmxlbmd0aCwgNSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmN1cnJlbnRTbGlkZSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LnVwZGF0ZUNhcm91c2VsID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0cmFjayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJvdXNlbC10cmFjaycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0cmFjayBhcyBIVE1MRWxlbWVudCkuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZVgoLSR7d2luZG93LmN1cnJlbnRTbGlkZSAqIDEwMH0lKWA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgZG90c1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNhcm91c2VsLWRvdCcpLmZvckVhY2goKGRvdCwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXggPT09IHdpbmRvdy5jdXJyZW50U2xpZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG90LmNsYXNzTGlzdC5hZGQoJ2JnLXdoaXRlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvdC5jbGFzc0xpc3QucmVtb3ZlKCdiZy13aGl0ZS84MCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvdC5jbGFzc0xpc3QucmVtb3ZlKCdiZy13aGl0ZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb3QuY2xhc3NMaXN0LmFkZCgnYmctd2hpdGUvODAnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubmV4dFNsaWRlID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuY3VycmVudFNsaWRlID0gKHdpbmRvdy5jdXJyZW50U2xpZGUgKyAxKSAlIG51bVNsaWRlcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LnVwZGF0ZUNhcm91c2VsKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5wcmV2U2xpZGUgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5jdXJyZW50U2xpZGUgPSAod2luZG93LmN1cnJlbnRTbGlkZSAtIDEgKyBudW1TbGlkZXMpICUgbnVtU2xpZGVzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cudXBkYXRlQ2Fyb3VzZWwoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmdvVG9TbGlkZSA9IChpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuY3VycmVudFNsaWRlID0gaW5kZXg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy51cGRhdGVDYXJvdXNlbCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImJnLXdoaXRlIHJvdW5kZWQtbGcgc2hhZG93LXNtXCIgc3R5bGU9XCJtYXgtd2lkdGg6IDM0MHB4O1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke3Bob3RvQ2Fyb3VzZWx9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwLTRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMiBjbGFzcz1cInRleHQteGwgZm9udC1zZW1pYm9sZCB0ZXh0LWdyYXktOTAwIG1iLTJcIj4ke2NpdHl9PC9oMj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7Y2l0eVBsYWNlLmZvcm1hdHRlZEFkZHJlc3MgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBgPHAgY2xhc3M9XCJ0ZXh0LXNtIHRleHQtZ3JheS01MDAgbWItMlwiPiR7Y2l0eVBsYWNlLmZvcm1hdHRlZEFkZHJlc3N9PC9wPmBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICcnfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBjaXR5IGluZm8gd2luZG93OicsIGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBhIG1hcmtlciBmb3IgdGhlIGNpdHlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjaXR5TWFya2VyID0gbmV3IGdvb2dsZS5tYXBzLm1hcmtlci5BZHZhbmNlZE1hcmtlckVsZW1lbnQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXA6IG5ld01hcCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGxvY2F0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogY2l0eVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWRkIGNsaWNrIGxpc3RlbmVyIHRvIHRoZSBtYXJrZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaXR5TWFya2VyLmFkZExpc3RlbmVyKCdnbXAtY2xpY2snLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbmZvV2luZG93KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50ID0gY3JlYXRlQ2l0eUluZm9XaW5kb3dDb250ZW50KGNpdHksIGxvY2F0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb250ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5mb1dpbmRvdy5zZXRDb250ZW50KGF3YWl0IGNvbnRlbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZm9XaW5kb3cub3BlbihuZXdNYXAsIGNpdHlNYXJrZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJrZXJzLnNldChjaXR5LCBjaXR5TWFya2VyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGQgY2xpY2sgbGlzdGVuZXIgZm9yIGZ1dHVyZSBpbnRlcmFjdGlvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNpdHlNYXJrZXIuYWRkTGlzdGVuZXIoJ2dtcC1jbGljaycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IGNyZWF0ZUNpdHlJbmZvV2luZG93Q29udGVudChjaXR5LCBsb2NhdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb250ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdJbmZvV2luZG93LnNldENvbnRlbnQoY29udGVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdJbmZvV2luZG93Lm9wZW4oe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuY2hvcjogY2l0eU1hcmtlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXA6IG5ld01hcFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2V0dGluZyB1cCBtYXA6JywgZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRFcnJvcignRmFpbGVkIHRvIGluaXRpYWxpemUgbWFwJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgaW5pdGlhbGl6aW5nIG1hcDonLCBlcnIpO1xuICAgICAgICAgICAgICAgIHNldEVycm9yKCdGYWlsZWQgdG8gaW5pdGlhbGl6ZSBtYXAnKTtcbiAgICAgICAgICAgICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGluaXRNYXAoKTtcbiAgICB9LCBbY2l0eSwgc2NyaXB0TG9hZGVkLCBhcGlLZXldKTtcblxuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGlmICghbWFwKSByZXR1cm47XG5cbiAgICAgICAgd2luZG93LnJlbW92ZVBsYWNlRnJvbU1hcCA9IChwbGFjZUlkOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdEZWJ1ZyAtIFN0YXJ0aW5nIHJlbW92YWwgcHJvY2VzcyBmb3IgcGxhY2VJZDonLCBwbGFjZUlkKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBtYXJrZXIgPSBtYXJrZXJzUmVmLmN1cnJlbnQuZ2V0KHBsYWNlSWQpO1xuICAgICAgICAgICAgICAgIGlmIChtYXJrZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0RlYnVnIC0gRm91bmQgbWFya2VyOicsIG1hcmtlcik7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBSZW1vdmUgbWFya2VyIGZyb20gbWFwXG4gICAgICAgICAgICAgICAgICAgIG1hcmtlci5tYXAgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gQ2xvc2UgaW5mbyB3aW5kb3cgaWYgb3BlblxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5mb1dpbmRvd1JlZi5jdXJyZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbmZvV2luZG93UmVmLmN1cnJlbnQuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBldmVudCBsaXN0ZW5lcnNcbiAgICAgICAgICAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQuY2xlYXJJbnN0YW5jZUxpc3RlbmVycyhtYXJrZXIpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIENsZWFuIHVwIHJlZmVyZW5jZXNcbiAgICAgICAgICAgICAgICAgICAgbWFya2Vyc1JlZi5jdXJyZW50LmRlbGV0ZShwbGFjZUlkKTtcbiAgICAgICAgICAgICAgICAgICAgc2F2ZWRQbGFjZXNNYW5hZ2VyLnJlbW92ZVBsYWNlKHBsYWNlSWQpO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdEZWJ1ZyAtIEFmdGVyIHJlbW92YWwgbWFya2VyczonLCBbLi4ubWFya2Vyc1JlZi5jdXJyZW50LmVudHJpZXMoKV0pO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRGVidWcgLSBTdWNjZXNzZnVsbHkgcmVtb3ZlZCBtYXJrZXIgYW5kIHBsYWNlOicsIHBsYWNlSWQpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignRGVidWcgLSBDb3VsZCBub3QgZmluZCBtYXJrZXIgZm9yIHBsYWNlSWQ6JywgcGxhY2VJZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdEZWJ1ZyAtIEVycm9yIGR1cmluZyBtYXJrZXIgcmVtb3ZhbDonLCBlcnJvcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIE5vdGlmeSBjb21wb25lbnRzIHRoYXQgcGxhY2VzIGNoYW5nZWRcbiAgICAgICAgICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgnc2F2ZWRQbGFjZXNDaGFuZ2VkJywge1xuICAgICAgICAgICAgICAgIGRldGFpbDoge1xuICAgICAgICAgICAgICAgICAgICBwbGFjZXM6IEFycmF5LmZyb20oc2F2ZWRQbGFjZXNNYW5hZ2VyLnBsYWNlcy52YWx1ZXMoKSksXG4gICAgICAgICAgICAgICAgICAgIGNvdW50OiBzYXZlZFBsYWNlc01hbmFnZXIucGxhY2VzLnNpemVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgd2luZG93LmFkZFBsYWNlVG9NYXAgPSBhc3luYyAoZGF0YTogeyBcbiAgICAgICAgICAgIGxhdGl0dWRlOiBudW1iZXI7IFxuICAgICAgICAgICAgbG9uZ2l0dWRlOiBudW1iZXI7IFxuICAgICAgICAgICAgdGl0bGU/OiBzdHJpbmc7XG4gICAgICAgICAgICBwbGFjZT86IFBsYWNlO1xuICAgICAgICB9KSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIC8vIEFkZCB0aGlzIGNoZWNrIGF0IHRoZSBzdGFydCBvZiB0aGUgZnVuY3Rpb25cbiAgICAgICAgICAgICAgICBjb25zdCBtYXJrZXJJZCA9IGRhdGEucGxhY2U/LmlkO1xuICAgICAgICAgICAgICAgIGlmICghbWFya2VySWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRGVidWcgLSBObyBwbGFjZSBJRCBwcm92aWRlZCcpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gQWRkIHRoaXMgY2hlY2sgZm9yIGR1cGxpY2F0ZXNcbiAgICAgICAgICAgICAgICBpZiAoc2F2ZWRQbGFjZXNNYW5hZ2VyLmhhc1BsYWNlKG1hcmtlcklkKSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRGVidWcgLSBQbGFjZSBhbHJlYWR5IGV4aXN0czonLCBtYXJrZXJJZCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgLy8gQWRkIHRvIGdsb2JhbCBzdG9yYWdlIGZpcnN0XG4gICAgICAgICAgICAgICAgaWYgKGRhdGEucGxhY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgc2F2ZWRQbGFjZXNNYW5hZ2VyLmFkZFBsYWNlKGRhdGEucGxhY2UpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnN0IFt7IEFkdmFuY2VkTWFya2VyRWxlbWVudCB9LCB7IFBpbkVsZW1lbnQgfV0gPSBhd2FpdCBQcm9taXNlLmFsbChbXG4gICAgICAgICAgICAgICAgICAgIGdvb2dsZS5tYXBzLmltcG9ydExpYnJhcnkoXCJtYXJrZXJcIikgYXMgUHJvbWlzZTxnb29nbGUubWFwcy5NYXJrZXJMaWJyYXJ5PixcbiAgICAgICAgICAgICAgICAgICAgZ29vZ2xlLm1hcHMuaW1wb3J0TGlicmFyeShcIm1hcmtlclwiKSBhcyBQcm9taXNlPGdvb2dsZS5tYXBzLk1hcmtlckxpYnJhcnk+XG4gICAgICAgICAgICAgICAgXSk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBwaW5FbGVtZW50ID0gbmV3IGdvb2dsZS5tYXBzLm1hcmtlci5QaW5FbGVtZW50KHtcbiAgICAgICAgICAgICAgICAgICAgc2NhbGU6IDFcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdEZWJ1ZyAtIENyZWF0aW5nIG1hcmtlciB3aXRoIElEOicsIG1hcmtlcklkKTtcblxuICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBleGlzdGluZyBtYXJrZXIgaWYgaXQgZXhpc3RzXG4gICAgICAgICAgICAgICAgaWYgKG1hcmtlcnNSZWYuY3VycmVudC5oYXMobWFya2VySWQpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nTWFya2VyID0gbWFya2Vyc1JlZi5jdXJyZW50LmdldChtYXJrZXJJZCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChleGlzdGluZ01hcmtlcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmdNYXJrZXIubWFwID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChleGlzdGluZ01hcmtlci5lbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhpc3RpbmdNYXJrZXIuZWxlbWVudC5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtlcnNSZWYuY3VycmVudC5kZWxldGUobWFya2VySWQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgY29uc3QgbWFya2VyID0gbmV3IGdvb2dsZS5tYXBzLm1hcmtlci5BZHZhbmNlZE1hcmtlckVsZW1lbnQoe1xuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGF0OiBkYXRhLmxhdGl0dWRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbG5nOiBkYXRhLmxvbmdpdHVkZVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogZGF0YS50aXRsZSxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogcGluRWxlbWVudC5lbGVtZW50LFxuICAgICAgICAgICAgICAgICAgICBnbXBEcmFnZ2FibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgLy8gU2V0IHRoZSBtYXAgcHJvcGVydHkgYWZ0ZXIgY3JlYXRpb25cbiAgICAgICAgICAgICAgICBtYXJrZXIubWFwID0gbWFwO1xuXG4gICAgICAgICAgICAgICAgLy8gQWRkIGNsaWNrIGxpc3RlbmVyXG4gICAgICAgICAgICAgICAgbWFya2VyLmFkZExpc3RlbmVyKCdnbXAtY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLnBsYWNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuY3VycmVudEluZm9XaW5kb3dNYXJrZXIgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFya2VySWQ6IG1hcmtlcklkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmtlcjogbWFya2VyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29udGVudCA9IGNyZWF0ZVBsYWNlSW5mb1dpbmRvd0NvbnRlbnQoZGF0YS5wbGFjZSwgbWFya2VySWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQgJiYgaW5mb1dpbmRvd1JlZi5jdXJyZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5mb1dpbmRvd1JlZi5jdXJyZW50LnNldENvbnRlbnQoY29udGVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5mb1dpbmRvd1JlZi5jdXJyZW50Lm9wZW4obWFwLCBtYXJrZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAvLyBTdG9yZSB0aGUgbWFya2VyIHJlZmVyZW5jZVxuICAgICAgICAgICAgICAgIC8vIG1hcmtlcnNSZWYuY3VycmVudC5zZXQobWFya2VySWQsIG1hcmtlcik7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gaWYgKGRhdGEucGxhY2UpIHtcbiAgICAgICAgICAgICAgICAvLyAgICAgc2F2ZWRQbGFjZXNNYW5hZ2VyLmFkZFBsYWNlKGRhdGEucGxhY2UpO1xuICAgICAgICAgICAgICAgIC8vICAgICAvLyBGb3JjZSBhIHJlLXJlbmRlciB3aGVuIGFkZGluZyBhIG1hcmtlclxuICAgICAgICAgICAgICAgIC8vICAgICBzZXRNYXJrZXJDb3VudChwcmV2ID0+IHByZXYgKyAxKTtcbiAgICAgICAgICAgICAgICAvLyAgICAgc2V0U2F2ZWRQbGFjZXMobmV3IE1hcChzYXZlZFBsYWNlc01hbmFnZXIucGxhY2VzKSk7XG4gICAgICAgICAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKCdEZWJ1ZyAtIEFkZGVkIHBsYWNlOicsIHNhdmVkUGxhY2VzTWFuYWdlci5wbGFjZXMpO1xuICAgICAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnRGVidWcgLSBNYXJrZXIgYWRkZWQgc3VjY2Vzc2Z1bGx5Jyk7XG5cbiAgICAgICAgICAgICAgICAvLyBOb3RpZnkgY29tcG9uZW50cyB0aGF0IHBsYWNlcyBjaGFuZ2VkXG4gICAgICAgICAgICAgICAgd2luZG93LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCdzYXZlZFBsYWNlc0NoYW5nZWQnLCB7XG4gICAgICAgICAgICAgICAgICAgIGRldGFpbDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2VzOiBBcnJheS5mcm9tKHNhdmVkUGxhY2VzTWFuYWdlci5wbGFjZXMudmFsdWVzKCkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgY291bnQ6IHNhdmVkUGxhY2VzTWFuYWdlci5wbGFjZXMuc2l6ZVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBhZGRpbmcgcGxhY2UgbWFya2VyOicsIGVycik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgd2luZG93LmdldFNhdmVkUGxhY2VzID0gKCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHNhdmVkUGxhY2VzTWFuYWdlci5nZXRQbGFjZXMoKTtcbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgfSwgW21hcCwgaW5mb1dpbmRvd10pO1xuXG4gICAgLy8gLy8gQWRkIGEgdXNlRWZmZWN0IHRvIG1vbml0b3Igc2F2ZWRQbGFjZXMgY2hhbmdlc1xuICAgIC8vIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gICAgIGNvbnNvbGUubG9nKCdDdXJyZW50IHNhdmVkIHBsYWNlczonLCBbLi4uZ2xvYmFsU2F2ZWRQbGFjZXMuZW50cmllcygpXSk7XG4gICAgLy8gfSwgW3NhdmVkUGxhY2VzXSk7XG5cbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICAvLyBTYXZlIHRvIHNlc3Npb24gc3RvcmFnZSB3aGVuIHBsYWNlcyBjaGFuZ2VcbiAgICAgICAgY29uc3Qgc2Vzc2lvbkRhdGEgPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKFNFU1NJT05fQ09ORklHLlNUT1JBR0VfS0VZKTtcbiAgICAgICAgaWYgKHNlc3Npb25EYXRhKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZCA9IEpTT04ucGFyc2Uoc2Vzc2lvbkRhdGEpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHVwZGF0ZWRQbGFjZXMgPSBzYXZlZFBsYWNlc01hbmFnZXIuZ2V0UGxhY2VzKCk7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2Vzc2lvbkRhdGFXaXRoVXBkYXRlZFBsYWNlcyA9IHtcbiAgICAgICAgICAgICAgICAgICAgLi4ucGFyc2VkLFxuICAgICAgICAgICAgICAgICAgICBsYXN0QWN0aXZlOiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgICAgICAgICBzYXZlZFBsYWNlczogdXBkYXRlZFBsYWNlc1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShTRVNTSU9OX0NPTkZJRy5TVE9SQUdFX0tFWSwgSlNPTi5zdHJpbmdpZnkoc2Vzc2lvbkRhdGFXaXRoVXBkYXRlZFBsYWNlcykpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzYXZpbmcgcGxhY2VzIHRvIHNlc3Npb246JywgZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSwgW3NhdmVkUGxhY2VzXSk7XG5cbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICBjb25zdCBoYW5kbGVWaXNpYmlsaXR5Q2hhbmdlID0gKCkgPT4ge1xuICAgICAgICAgICAgaWYgKGRvY3VtZW50LnZpc2liaWxpdHlTdGF0ZSA9PT0gJ3Zpc2libGUnICYmIG1hcCkge1xuICAgICAgICAgICAgICAgIHdpbmRvdy5nb29nbGU/Lm1hcHM/LmV2ZW50Py50cmlnZ2VyKG1hcCwgJ3Jlc2l6ZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Zpc2liaWxpdHljaGFuZ2UnLCBoYW5kbGVWaXNpYmlsaXR5Q2hhbmdlKTtcbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Zpc2liaWxpdHljaGFuZ2UnLCBoYW5kbGVWaXNpYmlsaXR5Q2hhbmdlKTtcbiAgICAgICAgfTtcbiAgICB9LCBbbWFwXSk7XG5cbiAgICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgICAgICAvLyBMb2FkIHNhdmVkIHBsYWNlcyBmcm9tIHNlc3Npb24gc3RvcmFnZSBvbiBtb3VudFxuICAgICAgICBjb25zdCBzZXNzaW9uRGF0YSA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oU0VTU0lPTl9DT05GSUcuU1RPUkFHRV9LRVkpO1xuICAgICAgICBpZiAoc2Vzc2lvbkRhdGEpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFyc2VkID0gSlNPTi5wYXJzZShzZXNzaW9uRGF0YSk7XG4gICAgICAgICAgICAgICAgaWYgKHBhcnNlZC5zYXZlZFBsYWNlcykge1xuICAgICAgICAgICAgICAgICAgICBwYXJzZWQuc2F2ZWRQbGFjZXMuZm9yRWFjaCgocGxhY2U6IFBsYWNlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGxhY2UuaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzYXZlZFBsYWNlc01hbmFnZXIuYWRkUGxhY2UocGxhY2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgLy8gTm90aWZ5IGNvbXBvbmVudHMgb2YgaW5pdGlhbCBsb2FkXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgnc2F2ZWRQbGFjZXNDaGFuZ2VkJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWlsOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2VzOiBBcnJheS5mcm9tKHNhdmVkUGxhY2VzTWFuYWdlci5wbGFjZXMudmFsdWVzKCkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50OiBzYXZlZFBsYWNlc01hbmFnZXIucGxhY2VzLnNpemVcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgbG9hZGluZyBzYXZlZCBwbGFjZXMgZnJvbSBzZXNzaW9uOicsIGVycm9yKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sIFtdKTtcblxuICAgIGNvbnN0IGdldFBob3RvVXJsID0gKHBob3RvOiBnb29nbGUubWFwcy5wbGFjZXMuUGhvdG8sIGluZGV4OiBudW1iZXIpID0+IHtcbiAgICAgICAgcmV0dXJuIHBob3RvLmdldFVSST8uKCkgfHwgJyc7XG4gICAgfTtcblxuICAgIGNvbnN0IGhhbmRsZVNsaWRlQ2hhbmdlID0gKF86IGFueSwgaW5kZXg6IG51bWJlcikgPT4ge1xuICAgICAgICBpZiAod2luZG93LmN1cnJlbnRTbGlkZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB3aW5kb3cuY3VycmVudFNsaWRlID0gaW5kZXg7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgLy9QbGFjZSBpbmZvIHdpbmRvd1xuICAgIGNvbnN0IGNyZWF0ZVBsYWNlSW5mb1dpbmRvd0NvbnRlbnQgPSAocGxhY2U6IFBsYWNlLCBtYXJrZXJJZDogc3RyaW5nKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdEZWJ1ZyAtIENyZWF0aW5nIGluZm8gd2luZG93IGNvbnRlbnQgZm9yIG1hcmtlcklkOicsIG1hcmtlcklkKTtcbiAgICAgICAgY29uc3QgcGhvdG9VcmwgPSBwbGFjZS5waG90b3MgJiYgcGxhY2UucGhvdG9zWzBdIFxuICAgICAgICAgICAgPyBgaHR0cHM6Ly9wbGFjZXMuZ29vZ2xlYXBpcy5jb20vdjEvJHtwbGFjZS5waG90b3NbMF0ubmFtZX0vbWVkaWE/bWF4SGVpZ2h0UHg9MjAwJm1heFdpZHRoUHg9MzAwJmtleT0ke2FwaUtleX1gXG4gICAgICAgICAgICA6ICcnO1xuXG4gICAgICAgIGNvbnN0IHBsYWNlVGl0bGUgPSB0eXBlb2YgcGxhY2UuZGlzcGxheU5hbWUgPT09ICdzdHJpbmcnID8gcGxhY2UuZGlzcGxheU5hbWUgOiBwbGFjZS5kaXNwbGF5TmFtZS50ZXh0O1xuXG4gICAgICAgIHJldHVybiBgXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYmctd2hpdGUgcm91bmRlZC1sZyBzaGFkb3ctc21cIiBzdHlsZT1cIm1heC13aWR0aDogMzAwcHg7XCI+XG4gICAgICAgICAgICAgICAgJHtwaG90b1VybCA/IGBcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT1cImhlaWdodDogMTUwcHg7IHdpZHRoOiAxMDAlO1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XCIke3Bob3RvVXJsfVwiIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsdD1cIiR7cGxhY2VUaXRsZX1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPVwid2lkdGg6IDEwMCU7IGhlaWdodDogMTAwJTsgb2JqZWN0LWZpdDogY292ZXI7IGJvcmRlci10b3AtbGVmdC1yYWRpdXM6IDAuNXJlbTsgYm9yZGVyLXRvcC1yaWdodC1yYWRpdXM6IDAuNXJlbTtcIlxuICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgYCA6ICcnfVxuXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInAtM1wiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmxleCBqdXN0aWZ5LWJldHdlZW4gaXRlbXMtc3RhcnRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzcz1cInRleHQtbGcgZm9udC1zZW1pYm9sZCB0ZXh0LWdyYXktOTAwIG1iLTFcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAke3BsYWNlVGl0bGV9XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2gzPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgJHtwbGFjZS5wcmltYXJ5VHlwZURpc3BsYXlOYW1lIFxuICAgICAgICAgICAgICAgICAgICAgICAgPyBgPGRpdiBjbGFzcz1cInRleHQtc20gdGV4dC1ncmF5LTYwMCBtYi0xXCI+JHtwbGFjZS5wcmltYXJ5VHlwZURpc3BsYXlOYW1lLnRleHR9PC9kaXY+YFxuICAgICAgICAgICAgICAgICAgICAgICAgOiAnJ31cbiAgICAgICAgICAgICAgICAgICAgJHtwbGFjZS5mb3JtYXR0ZWRBZGRyZXNzIFxuICAgICAgICAgICAgICAgICAgICAgICAgPyBgPHAgY2xhc3M9XCJ0ZXh0LXNtIHRleHQtZ3JheS01MDBcIj4ke3BsYWNlLmZvcm1hdHRlZEFkZHJlc3N9PC9wPmBcbiAgICAgICAgICAgICAgICAgICAgICAgIDogJyd9XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgYDtcbiAgICB9O1xuXG4gICAgcmV0dXJuIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyZWxhdGl2ZSB3LWZ1bGwgaC1mdWxsXCI+XG4gICAgICAgICAgICB7YXBpS2V5ICYmIChcbiAgICAgICAgICAgICAgICA8U2NyaXB0XG4gICAgICAgICAgICAgICAgICAgIHNyYz17YGh0dHBzOi8vbWFwcy5nb29nbGVhcGlzLmNvbS9tYXBzL2FwaS9qcz9rZXk9JHthcGlLZXl9JmxpYnJhcmllcz1wbGFjZXMsbWFya2VyJnY9YmV0YSZjYWxsYmFjaz1GdW5jdGlvbi5wcm90b3R5cGVgfVxuICAgICAgICAgICAgICAgICAgICBzdHJhdGVneT1cImFmdGVySW50ZXJhY3RpdmVcIlxuICAgICAgICAgICAgICAgICAgICBvbkxvYWQ9eygpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdHb29nbGUgTWFwcyBzY3JpcHQgbG9hZGVkJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRTY3JpcHRMb2FkZWQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgIG9uRXJyb3I9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gbG9hZCBHb29nbGUgTWFwcyBzY3JpcHQ6JywgZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRFcnJvcignRmFpbGVkIHRvIGxvYWQgR29vZ2xlIE1hcHMnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldElzTG9hZGluZyhmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICB7ZXJyb3IgJiYgKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWJzb2x1dGUgaW5zZXQtMCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBiZy1ncmF5LTEwMCB0ZXh0LXJlZC01MDAgcC00IHRleHQtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgIHtlcnJvcn1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgICB7aXNMb2FkaW5nICYmICFlcnJvciAmJiAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhYnNvbHV0ZSBpbnNldC0wIGZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIGJnLWdyYXktMTAwXCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidGV4dC1ncmF5LTYwMFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgTG9hZGluZyBtYXAuLi5cbiAgICAgICAgICAgICAgICAgICAgICAgIHshYXBpS2V5ICYmIDxkaXY+V2FpdGluZyBmb3IgQVBJIGtleS4uLjwvZGl2Pn1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApfVxuICAgICAgICAgICAgPGRpdiByZWY9e21hcFJlZn0gY2xhc3NOYW1lPVwidy1mdWxsIGgtZnVsbFwiIC8+XG4gICAgICAgICAgICB7Lyoge3NlbGVjdGVkUGxhY2UgJiYgKFxuICAgICAgICAgICAgICAgIDxTbWFsbFBsYWNlQ2FyZCBcbiAgICAgICAgICAgICAgICAgICAgcGxhY2U9e3NlbGVjdGVkUGxhY2V9IFxuICAgICAgICAgICAgICAgICAgICBvbkNsb3NlPXsoKSA9PiBzZXRTZWxlY3RlZFBsYWNlKG51bGwpfSBcbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgKX0gKi99XG4gICAgICAgIDwvZGl2PlxuICAgICk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBNYXBDb21wb25lbnQ7Il0sIm5hbWVzIjpbIlJlYWN0IiwidXNlRWZmZWN0IiwidXNlUmVmIiwidXNlU3RhdGUiLCJTY3JpcHQiLCJzYXZlZFBsYWNlc01hbmFnZXIiLCJzZWFyY2hQbGFjZUJ5VGV4dCIsIlNFU1NJT05fQ09ORklHIiwiTWFwQ29tcG9uZW50IiwiY2l0eSIsImFwaUtleSIsIm1hcFJlZiIsIm1hcCIsInNldE1hcCIsIm1hcmtlcnMiLCJzZXRNYXJrZXJzIiwiTWFwIiwiaW5mb1dpbmRvdyIsInNldEluZm9XaW5kb3ciLCJlcnJvciIsInNldEVycm9yIiwiaXNMb2FkaW5nIiwic2V0SXNMb2FkaW5nIiwic2NyaXB0TG9hZGVkIiwic2V0U2NyaXB0TG9hZGVkIiwic2VsZWN0ZWRQbGFjZSIsInNldFNlbGVjdGVkUGxhY2UiLCJzYXZlZFBsYWNlcyIsInNldFNhdmVkUGxhY2VzIiwibWFya2Vyc1JlZiIsImluZm9XaW5kb3dSZWYiLCJtYXJrZXJDb3VudCIsInNldE1hcmtlckNvdW50IiwiY29uc29sZSIsImxvZyIsImFwaUtleUxlbmd0aCIsImxlbmd0aCIsInNlc3Npb25EYXRhIiwic2Vzc2lvblN0b3JhZ2UiLCJnZXRJdGVtIiwiU1RPUkFHRV9LRVkiLCJwYXJzZWQiLCJKU09OIiwicGFyc2UiLCJ0cmF2ZWxEZXRhaWxzIiwiZGVzdGluYXRpb24iLCJjdXJyZW50IiwiaXNJbml0aWFsaXplZCIsImluaXRNYXAiLCJ3aW5kb3ciLCJnb29nbGUiLCJtYXBzIiwiaW1wb3J0TGlicmFyeSIsIkFkdmFuY2VkTWFya2VyRWxlbWVudCIsImdlb2NvZGVyIiwiR2VvY29kZXIiLCJnZW9jb2RlIiwiYWRkcmVzcyIsInJlc3VsdHMiLCJzdGF0dXMiLCJyZXN1bHRzTGVuZ3RoIiwiZ2VvbWV0cnkiLCJsb2NhdGlvbiIsIm5ld01hcCIsImNlbnRlciIsInpvb20iLCJtYXBJZCIsIm5ld0luZm9XaW5kb3ciLCJJbmZvV2luZG93IiwibWF4V2lkdGgiLCJjcmVhdGVDaXR5SW5mb1dpbmRvd0NvbnRlbnQiLCJjaXR5UGxhY2UiLCJsYXRpdHVkZSIsImxhdCIsImxvbmdpdHVkZSIsImxuZyIsInBob3RvQ2Fyb3VzZWwiLCJwaG90b3MiLCJzbGljZSIsInBob3RvIiwiaW5kZXgiLCJuYW1lIiwiam9pbiIsIl8iLCJudW1TbGlkZXMiLCJNYXRoIiwibWluIiwiY3VycmVudFNsaWRlIiwidXBkYXRlQ2Fyb3VzZWwiLCJ0cmFjayIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInN0eWxlIiwidHJhbnNmb3JtIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJkb3QiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJuZXh0U2xpZGUiLCJwcmV2U2xpZGUiLCJnb1RvU2xpZGUiLCJmb3JtYXR0ZWRBZGRyZXNzIiwiY2l0eU1hcmtlciIsIm1hcmtlciIsInBvc2l0aW9uIiwidGl0bGUiLCJhZGRMaXN0ZW5lciIsImNvbnRlbnQiLCJzZXRDb250ZW50Iiwib3BlbiIsInNldCIsImFuY2hvciIsImVyciIsInJlbW92ZVBsYWNlRnJvbU1hcCIsInBsYWNlSWQiLCJnZXQiLCJjbG9zZSIsImV2ZW50IiwiY2xlYXJJbnN0YW5jZUxpc3RlbmVycyIsImRlbGV0ZSIsInJlbW92ZVBsYWNlIiwiZW50cmllcyIsIndhcm4iLCJkaXNwYXRjaEV2ZW50IiwiQ3VzdG9tRXZlbnQiLCJkZXRhaWwiLCJwbGFjZXMiLCJBcnJheSIsImZyb20iLCJ2YWx1ZXMiLCJjb3VudCIsInNpemUiLCJhZGRQbGFjZVRvTWFwIiwiZGF0YSIsIm1hcmtlcklkIiwicGxhY2UiLCJpZCIsImhhc1BsYWNlIiwiYWRkUGxhY2UiLCJQaW5FbGVtZW50IiwiUHJvbWlzZSIsImFsbCIsInBpbkVsZW1lbnQiLCJzY2FsZSIsImhhcyIsImV4aXN0aW5nTWFya2VyIiwiZWxlbWVudCIsImdtcERyYWdnYWJsZSIsImN1cnJlbnRJbmZvV2luZG93TWFya2VyIiwiY3JlYXRlUGxhY2VJbmZvV2luZG93Q29udGVudCIsImdldFNhdmVkUGxhY2VzIiwiZ2V0UGxhY2VzIiwidXBkYXRlZFBsYWNlcyIsInNlc3Npb25EYXRhV2l0aFVwZGF0ZWRQbGFjZXMiLCJsYXN0QWN0aXZlIiwiRGF0ZSIsIm5vdyIsInNldEl0ZW0iLCJzdHJpbmdpZnkiLCJoYW5kbGVWaXNpYmlsaXR5Q2hhbmdlIiwidmlzaWJpbGl0eVN0YXRlIiwidHJpZ2dlciIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZ2V0UGhvdG9VcmwiLCJnZXRVUkkiLCJoYW5kbGVTbGlkZUNoYW5nZSIsInVuZGVmaW5lZCIsInBob3RvVXJsIiwicGxhY2VUaXRsZSIsImRpc3BsYXlOYW1lIiwidGV4dCIsInByaW1hcnlUeXBlRGlzcGxheU5hbWUiLCJkaXYiLCJjbGFzc05hbWUiLCJzcmMiLCJzdHJhdGVneSIsIm9uTG9hZCIsIm9uRXJyb3IiLCJlIiwicmVmIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./components/map-component.tsx\n");

/***/ }),

/***/ "./managers/types.ts":
/*!***************************!*\
  !*** ./managers/types.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BUDGET_DESCRIPTIONS: () => (/* binding */ BUDGET_DESCRIPTIONS),\n/* harmony export */   BUDGET_OPTIONS: () => (/* binding */ BUDGET_OPTIONS),\n/* harmony export */   BudgetLevel: () => (/* binding */ BudgetLevel),\n/* harmony export */   CURRENCY_INFO: () => (/* binding */ CURRENCY_INFO),\n/* harmony export */   ComponentType: () => (/* binding */ ComponentType),\n/* harmony export */   DEFAULT_CURRENCIES: () => (/* binding */ DEFAULT_CURRENCIES),\n/* harmony export */   LANGUAGE_LABELS: () => (/* binding */ LANGUAGE_LABELS),\n/* harmony export */   LANGUAGE_OPTIONS: () => (/* binding */ LANGUAGE_OPTIONS),\n/* harmony export */   PREFERENCE_ICONS: () => (/* binding */ PREFERENCE_ICONS),\n/* harmony export */   PREFERENCE_OPTIONS: () => (/* binding */ PREFERENCE_OPTIONS),\n/* harmony export */   SupportedLanguage: () => (/* binding */ SupportedLanguage),\n/* harmony export */   TravelPreference: () => (/* binding */ TravelPreference)\n/* harmony export */ });\n///Users/terrancehah/Documents/terrancehah.com/managers/types.ts\nvar ComponentType;\n(function(ComponentType) {\n    ComponentType[\"DatePicker\"] = \"DatePicker\";\n    ComponentType[\"PreferenceSelector\"] = \"PreferenceSelector\";\n    ComponentType[\"BudgetSelector\"] = \"BudgetSelector\";\n    ComponentType[\"LanguageSelector\"] = \"LanguageSelector\";\n    ComponentType[\"PlaceCard\"] = \"PlaceCard\";\n    ComponentType[\"TransportSelector\"] = \"TransportSelector\";\n    ComponentType[\"Carousel\"] = \"Carousel\";\n    ComponentType[\"DetailsCard\"] = \"DetailsCard\";\n    ComponentType[\"SavedPlacesCarousel\"] = \"SavedPlacesCarousel\";\n    ComponentType[\"QuickResponse\"] = \"QuickResponse\";\n})(ComponentType || (ComponentType = {}));\nvar BudgetLevel;\n(function(BudgetLevel) {\n    BudgetLevel[\"Budget\"] = \"$\";\n    BudgetLevel[\"Moderate\"] = \"$$\";\n    BudgetLevel[\"Luxury\"] = \"$$$\";\n    BudgetLevel[\"UltraLuxury\"] = \"$$$$\";\n})(BudgetLevel || (BudgetLevel = {}));\nvar TravelPreference;\n(function(TravelPreference) {\n    TravelPreference[\"Culture\"] = \"Culture and Heritage\";\n    TravelPreference[\"Nature\"] = \"Nature\";\n    TravelPreference[\"Food\"] = \"Foodie\";\n    TravelPreference[\"Relaxation\"] = \"Leisure\";\n    TravelPreference[\"Adventure\"] = \"Adventure\";\n    TravelPreference[\"Shopping\"] = \"Arts & Museum\";\n})(TravelPreference || (TravelPreference = {}));\nvar SupportedLanguage;\n(function(SupportedLanguage) {\n    SupportedLanguage[\"English\"] = \"English\";\n    SupportedLanguage[\"Malay\"] = \"Malay (Bahasa Melayu)\";\n    SupportedLanguage[\"Spanish\"] = \"Espanol\";\n    SupportedLanguage[\"French\"] = \"Francais\";\n    SupportedLanguage[\"German\"] = \"Deutsch\";\n    SupportedLanguage[\"Italian\"] = \"Italiano\";\n    SupportedLanguage[\"Czech\"] = \"Czech (Cestina)\";\n    SupportedLanguage[\"SimplifiedChinese\"] = \"Simplified Chinese ()\";\n    SupportedLanguage[\"TraditionalChinese\"] = \"Traditional Chinese ()\";\n    SupportedLanguage[\"Japanese\"] = \"Japanese ()\";\n    SupportedLanguage[\"Korean\"] = \"Korean ()\";\n})(SupportedLanguage || (SupportedLanguage = {}));\nconst BUDGET_DESCRIPTIONS = {\n    [\"$\"]: \"Budget-friendly options ($)\",\n    [\"$$\"]: \"Mid-range options ($$)\",\n    [\"$$$\"]: \"High-end options ($$$)\",\n    [\"$$$$\"]: \"Ultra luxury options ($$$$)\"\n};\nconst PREFERENCE_ICONS = {\n    [\"Culture and Heritage\"]: \"\\uD83C\\uDF8F\",\n    [\"Nature\"]: \"\\uD83C\\uDF40\",\n    [\"Foodie\"]: \"\\uD83C\\uDF71\",\n    [\"Leisure\"]: \"\\uD83C\\uDF07\",\n    [\"Adventure\"]: \"\\uD83E\\uDE82\",\n    [\"Arts & Museum\"]: \"\\uD83C\\uDFA8\"\n};\nconst LANGUAGE_LABELS = {\n    [\"English\"]: \"English\",\n    [\"Malay (Bahasa Melayu)\"]: \"Malay (Bahasa Melayu)\",\n    [\"Espanol\"]: \"Espanol\",\n    [\"Francais\"]: \"Francais\",\n    [\"Deutsch\"]: \"Deutsch\",\n    [\"Italiano\"]: \"Italiano\",\n    [\"Czech (Cestina)\"]: \"Czech (Cestina)\",\n    [\"Simplified Chinese ()\"]: \"Simplified Chinese ()\",\n    [\"Traditional Chinese ()\"]: \"Traditional Chinese ()\",\n    [\"Japanese ()\"]: \"Japanese ()\",\n    [\"Korean ()\"]: \"Korean ()\"\n};\nconst BUDGET_OPTIONS = [\n    {\n        value: \"$\",\n        label: \"Budget\",\n        description: \"Budget-friendly options with basic amenities\"\n    },\n    {\n        value: \"$$\",\n        label: \"Moderate\",\n        description: \"Mid-range options with good value\"\n    },\n    {\n        value: \"$$$\",\n        label: \"Luxury\",\n        description: \"High-end options with premium services\"\n    },\n    {\n        value: \"$$$$\",\n        label: \"Ultra Luxury\",\n        description: \"Exclusive luxury experiences\"\n    }\n];\nconst LANGUAGE_OPTIONS = Object.entries(SupportedLanguage).map(([key, value])=>({\n        value,\n        label: LANGUAGE_LABELS[value]\n    }));\nconst PREFERENCE_OPTIONS = [\n    {\n        value: \"Culture and Heritage\",\n        label: \"Culture and Heritage\",\n        icon: PREFERENCE_ICONS[\"Culture and Heritage\"]\n    },\n    {\n        value: \"Nature\",\n        label: \"Nature\",\n        icon: PREFERENCE_ICONS[\"Nature\"]\n    },\n    {\n        value: \"Foodie\",\n        label: \"Foodie\",\n        icon: PREFERENCE_ICONS[\"Foodie\"]\n    },\n    {\n        value: \"Leisure\",\n        label: \"Leisure\",\n        icon: PREFERENCE_ICONS[\"Leisure\"]\n    },\n    {\n        value: \"Adventure\",\n        label: \"Adventure\",\n        icon: PREFERENCE_ICONS[\"Adventure\"]\n    },\n    {\n        value: \"Arts & Museum\",\n        label: \"Arts & Museum\",\n        icon: PREFERENCE_ICONS[\"Arts & Museum\"]\n    }\n];\nconst CURRENCY_INFO = {\n    \"USD\": {\n        name: \"US Dollar\",\n        symbol: \"$\",\n        position: \"before\"\n    },\n    \"EUR\": {\n        name: \"Euro\",\n        symbol: \"\",\n        position: \"before\"\n    },\n    \"GBP\": {\n        name: \"British Pound\",\n        symbol: \"\\xa3\",\n        position: \"before\"\n    },\n    \"CNY\": {\n        name: \"Chinese Yuan\",\n        symbol: \"\\xa5\",\n        position: \"before\"\n    },\n    \"JPY\": {\n        name: \"Japanese Yen\",\n        symbol: \"\\xa5\",\n        position: \"before\"\n    },\n    \"SGD\": {\n        name: \"Singapore Dollar\",\n        symbol: \"S$\",\n        position: \"before\"\n    },\n    \"MYR\": {\n        name: \"Malaysian Ringgit\",\n        symbol: \"RM\",\n        position: \"before\"\n    },\n    \"KRW\": {\n        name: \"South Korean Won\",\n        symbol: \"\",\n        position: \"before\"\n    },\n    \"AUD\": {\n        name: \"Australian Dollar\",\n        symbol: \"A$\",\n        position: \"before\"\n    },\n    \"CAD\": {\n        name: \"Canadian Dollar\",\n        symbol: \"C$\",\n        position: \"before\"\n    }\n};\nconst DEFAULT_CURRENCIES = [\n    \"USD\",\n    \"EUR\",\n    \"GBP\",\n    \"CNY\",\n    \"JPY\"\n];\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QU87UUFBRUYsTUFBTTtRQUFxQkMsUUFBUTtRQUFNQyxVQUFVO0lBQVM7SUFDckUsT0FBTztRQUFFRixNQUFNO1FBQW1CQyxRQUFRO1FBQU1DLFVBQVU7SUFBUztBQUN2RSxFQUFFO0FBWUssTUFBTUMscUJBQXFCO0lBQUM7SUFBTztJQUFPO0lBQU87SUFBTztDQUFNLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90cmF2ZWwtcml6ei8uL21hbmFnZXJzL3R5cGVzLnRzP2NkOWIiXSwic291cmNlc0NvbnRlbnQiOlsiLy8vVXNlcnMvdGVycmFuY2VoYWgvRG9jdW1lbnRzL3RlcnJhbmNlaGFoLmNvbS9tYW5hZ2Vycy90eXBlcy50c1xuXG5pbXBvcnQgeyBNZXNzYWdlIGFzIEFpTWVzc2FnZSwgSlNPTlZhbHVlIH0gZnJvbSAnYWknO1xuaW1wb3J0IHsgUGxhY2UgfSBmcm9tICcuLi91dGlscy9wbGFjZXMtdXRpbHMnO1xuaW1wb3J0IHsgUmVhY3ROb2RlIH0gZnJvbSAncmVhY3QnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFRyYXZlbERldGFpbHMge1xuICAgIGRlc3RpbmF0aW9uOiBzdHJpbmc7XG4gICAgbG9jYXRpb24/OiB7XG4gICAgICAgIGxhdGl0dWRlOiBudW1iZXI7XG4gICAgICAgIGxvbmdpdHVkZTogbnVtYmVyO1xuICAgIH07XG4gICAgc3RhcnREYXRlOiBzdHJpbmc7XG4gICAgZW5kRGF0ZTogc3RyaW5nO1xuICAgIHByZWZlcmVuY2VzOiBzdHJpbmdbXTtcbiAgICBidWRnZXQ6IHN0cmluZztcbiAgICBsYW5ndWFnZTogc3RyaW5nO1xuICAgIHRyYW5zcG9ydDogc3RyaW5nW107XG59XG5cbmV4cG9ydCBlbnVtIENvbXBvbmVudFR5cGUge1xuICAgIERhdGVQaWNrZXIgPSAnRGF0ZVBpY2tlcicsXG4gICAgUHJlZmVyZW5jZVNlbGVjdG9yID0gJ1ByZWZlcmVuY2VTZWxlY3RvcicsXG4gICAgQnVkZ2V0U2VsZWN0b3IgPSAnQnVkZ2V0U2VsZWN0b3InLFxuICAgIExhbmd1YWdlU2VsZWN0b3IgPSAnTGFuZ3VhZ2VTZWxlY3RvcicsXG4gICAgUGxhY2VDYXJkID0gJ1BsYWNlQ2FyZCcsXG4gICAgVHJhbnNwb3J0U2VsZWN0b3IgPSAnVHJhbnNwb3J0U2VsZWN0b3InLFxuICAgIENhcm91c2VsID0gJ0Nhcm91c2VsJyxcbiAgICBEZXRhaWxzQ2FyZCA9ICdEZXRhaWxzQ2FyZCcsXG4gICAgU2F2ZWRQbGFjZXNDYXJvdXNlbCA9ICdTYXZlZFBsYWNlc0Nhcm91c2VsJyxcbiAgICBRdWlja1Jlc3BvbnNlID0gJ1F1aWNrUmVzcG9uc2UnXG59XG5cbmV4cG9ydCBlbnVtIEJ1ZGdldExldmVsIHtcbiAgICBCdWRnZXQgPSAnJCcsXG4gICAgTW9kZXJhdGUgPSAnJCQnLFxuICAgIEx1eHVyeSA9ICckJCQnLFxuICAgIFVsdHJhTHV4dXJ5ID0gJyQkJCQnXG59XG5cbmV4cG9ydCBlbnVtIFRyYXZlbFByZWZlcmVuY2Uge1xuICAgIEN1bHR1cmUgPSAnQ3VsdHVyZSBhbmQgSGVyaXRhZ2UnLFxuICAgIE5hdHVyZSA9ICdOYXR1cmUnLFxuICAgIEZvb2QgPSAnRm9vZGllJyxcbiAgICBSZWxheGF0aW9uID0gJ0xlaXN1cmUnLFxuICAgIEFkdmVudHVyZSA9ICdBZHZlbnR1cmUnLFxuICAgIFNob3BwaW5nID0gJ0FydHMgJiBNdXNldW0nXG59XG5cbmV4cG9ydCBlbnVtIFN1cHBvcnRlZExhbmd1YWdlIHtcbiAgICBFbmdsaXNoID0gJ0VuZ2xpc2gnLFxuICAgIE1hbGF5ID0gJ01hbGF5IChCYWhhc2EgTWVsYXl1KScsXG4gICAgU3BhbmlzaCA9ICdFc3Bhbm9sJyxcbiAgICBGcmVuY2ggPSAnRnJhbmNhaXMnLFxuICAgIEdlcm1hbiA9ICdEZXV0c2NoJyxcbiAgICBJdGFsaWFuID0gJ0l0YWxpYW5vJyxcbiAgICBDemVjaCA9ICdDemVjaCAoQ2VzdGluYSknLFxuICAgIFNpbXBsaWZpZWRDaGluZXNlID0gJ1NpbXBsaWZpZWQgQ2hpbmVzZSAo566A5L2T5Lit5paHKScsXG4gICAgVHJhZGl0aW9uYWxDaGluZXNlID0gJ1RyYWRpdGlvbmFsIENoaW5lc2UgKOe5gemrlOS4reaWhyknLFxuICAgIEphcGFuZXNlID0gJ0phcGFuZXNlICjml6XmnKzoqp4pJyxcbiAgICBLb3JlYW4gPSAnS29yZWFuICjtlZzqta3slrQpJ1xufVxuXG5leHBvcnQgY29uc3QgQlVER0VUX0RFU0NSSVBUSU9OUzogUmVjb3JkPEJ1ZGdldExldmVsLCBzdHJpbmc+ID0ge1xuICAgIFtCdWRnZXRMZXZlbC5CdWRnZXRdOiAnQnVkZ2V0LWZyaWVuZGx5IG9wdGlvbnMgKCQpJyxcbiAgICBbQnVkZ2V0TGV2ZWwuTW9kZXJhdGVdOiAnTWlkLXJhbmdlIG9wdGlvbnMgKCQkKScsXG4gICAgW0J1ZGdldExldmVsLkx1eHVyeV06ICdIaWdoLWVuZCBvcHRpb25zICgkJCQpJyxcbiAgICBbQnVkZ2V0TGV2ZWwuVWx0cmFMdXh1cnldOiAnVWx0cmEgbHV4dXJ5IG9wdGlvbnMgKCQkJCQpJ1xufTtcblxuZXhwb3J0IGNvbnN0IFBSRUZFUkVOQ0VfSUNPTlM6IFJlY29yZDxUcmF2ZWxQcmVmZXJlbmNlLCBzdHJpbmc+ID0ge1xuICAgIFtUcmF2ZWxQcmVmZXJlbmNlLkN1bHR1cmVdOiAn8J+OjycsXG4gICAgW1RyYXZlbFByZWZlcmVuY2UuTmF0dXJlXTogJ/CfjYAnLFxuICAgIFtUcmF2ZWxQcmVmZXJlbmNlLkZvb2RdOiAn8J+NsScsXG4gICAgW1RyYXZlbFByZWZlcmVuY2UuUmVsYXhhdGlvbl06ICfwn4yHJyxcbiAgICBbVHJhdmVsUHJlZmVyZW5jZS5BZHZlbnR1cmVdOiAn8J+qgicsXG4gICAgW1RyYXZlbFByZWZlcmVuY2UuU2hvcHBpbmddOiAn8J+OqCdcbn07XG5cbmV4cG9ydCBjb25zdCBMQU5HVUFHRV9MQUJFTFM6IFJlY29yZDxTdXBwb3J0ZWRMYW5ndWFnZSwgc3RyaW5nPiA9IHtcbiAgICBbU3VwcG9ydGVkTGFuZ3VhZ2UuRW5nbGlzaF06ICdFbmdsaXNoJyxcbiAgICBbU3VwcG9ydGVkTGFuZ3VhZ2UuTWFsYXldOiAnTWFsYXkgKEJhaGFzYSBNZWxheXUpJyxcbiAgICBbU3VwcG9ydGVkTGFuZ3VhZ2UuU3BhbmlzaF06ICdFc3Bhbm9sJyxcbiAgICBbU3VwcG9ydGVkTGFuZ3VhZ2UuRnJlbmNoXTogJ0ZyYW5jYWlzJyxcbiAgICBbU3VwcG9ydGVkTGFuZ3VhZ2UuR2VybWFuXTogJ0RldXRzY2gnLFxuICAgIFtTdXBwb3J0ZWRMYW5ndWFnZS5JdGFsaWFuXTogJ0l0YWxpYW5vJyxcbiAgICBbU3VwcG9ydGVkTGFuZ3VhZ2UuQ3plY2hdOiAnQ3plY2ggKENlc3RpbmEpJyxcbiAgICBbU3VwcG9ydGVkTGFuZ3VhZ2UuU2ltcGxpZmllZENoaW5lc2VdOiAnU2ltcGxpZmllZCBDaGluZXNlICjnroDkvZPkuK3mlocpJyxcbiAgICBbU3VwcG9ydGVkTGFuZ3VhZ2UuVHJhZGl0aW9uYWxDaGluZXNlXTogJ1RyYWRpdGlvbmFsIENoaW5lc2UgKOe5gemrlOS4reaWhyknLFxuICAgIFtTdXBwb3J0ZWRMYW5ndWFnZS5KYXBhbmVzZV06ICdKYXBhbmVzZSAo5pel5pys6KqeKScsXG4gICAgW1N1cHBvcnRlZExhbmd1YWdlLktvcmVhbl06ICdLb3JlYW4gKO2VnOq1reyWtCknXG59O1xuXG5leHBvcnQgY29uc3QgQlVER0VUX09QVElPTlMgPSBbXG4gICAgeyB2YWx1ZTogQnVkZ2V0TGV2ZWwuQnVkZ2V0LCBsYWJlbDogJ0J1ZGdldCcsIGRlc2NyaXB0aW9uOiAnQnVkZ2V0LWZyaWVuZGx5IG9wdGlvbnMgd2l0aCBiYXNpYyBhbWVuaXRpZXMnIH0sXG4gICAgeyB2YWx1ZTogQnVkZ2V0TGV2ZWwuTW9kZXJhdGUsIGxhYmVsOiAnTW9kZXJhdGUnLCBkZXNjcmlwdGlvbjogJ01pZC1yYW5nZSBvcHRpb25zIHdpdGggZ29vZCB2YWx1ZScgfSxcbiAgICB7IHZhbHVlOiBCdWRnZXRMZXZlbC5MdXh1cnksIGxhYmVsOiAnTHV4dXJ5JywgZGVzY3JpcHRpb246ICdIaWdoLWVuZCBvcHRpb25zIHdpdGggcHJlbWl1bSBzZXJ2aWNlcycgfSxcbiAgICB7IHZhbHVlOiBCdWRnZXRMZXZlbC5VbHRyYUx1eHVyeSwgbGFiZWw6ICdVbHRyYSBMdXh1cnknLCBkZXNjcmlwdGlvbjogJ0V4Y2x1c2l2ZSBsdXh1cnkgZXhwZXJpZW5jZXMnIH1cbl07XG5cbmV4cG9ydCBjb25zdCBMQU5HVUFHRV9PUFRJT05TID0gT2JqZWN0LmVudHJpZXMoU3VwcG9ydGVkTGFuZ3VhZ2UpLm1hcCgoW2tleSwgdmFsdWVdKSA9PiAoe1xuICAgIHZhbHVlLFxuICAgIGxhYmVsOiBMQU5HVUFHRV9MQUJFTFNbdmFsdWUgYXMgU3VwcG9ydGVkTGFuZ3VhZ2VdXG59KSk7XG5cbmV4cG9ydCBjb25zdCBQUkVGRVJFTkNFX09QVElPTlMgPSBbXG4gICAgeyB2YWx1ZTogVHJhdmVsUHJlZmVyZW5jZS5DdWx0dXJlLCBsYWJlbDogJ0N1bHR1cmUgYW5kIEhlcml0YWdlJywgaWNvbjogUFJFRkVSRU5DRV9JQ09OU1tUcmF2ZWxQcmVmZXJlbmNlLkN1bHR1cmVdIH0sXG4gICAgeyB2YWx1ZTogVHJhdmVsUHJlZmVyZW5jZS5OYXR1cmUsIGxhYmVsOiAnTmF0dXJlJywgaWNvbjogUFJFRkVSRU5DRV9JQ09OU1tUcmF2ZWxQcmVmZXJlbmNlLk5hdHVyZV0gfSxcbiAgICB7IHZhbHVlOiBUcmF2ZWxQcmVmZXJlbmNlLkZvb2QsIGxhYmVsOiAnRm9vZGllJywgaWNvbjogUFJFRkVSRU5DRV9JQ09OU1tUcmF2ZWxQcmVmZXJlbmNlLkZvb2RdIH0sXG4gICAgeyB2YWx1ZTogVHJhdmVsUHJlZmVyZW5jZS5SZWxheGF0aW9uLCBsYWJlbDogJ0xlaXN1cmUnLCBpY29uOiBQUkVGRVJFTkNFX0lDT05TW1RyYXZlbFByZWZlcmVuY2UuUmVsYXhhdGlvbl0gfSxcbiAgICB7IHZhbHVlOiBUcmF2ZWxQcmVmZXJlbmNlLkFkdmVudHVyZSwgbGFiZWw6ICdBZHZlbnR1cmUnLCBpY29uOiBQUkVGRVJFTkNFX0lDT05TW1RyYXZlbFByZWZlcmVuY2UuQWR2ZW50dXJlXSB9LFxuICAgIHsgdmFsdWU6IFRyYXZlbFByZWZlcmVuY2UuU2hvcHBpbmcsIGxhYmVsOiAnQXJ0cyAmIE11c2V1bScsIGljb246IFBSRUZFUkVOQ0VfSUNPTlNbVHJhdmVsUHJlZmVyZW5jZS5TaG9wcGluZ10gfVxuXTtcblxuZXhwb3J0IGludGVyZmFjZSBDb21wb25lbnRQcm9wcyB7XG4gICAgW0NvbXBvbmVudFR5cGUuRGF0ZVBpY2tlcl06IHtcbiAgICAgICAgc3RhcnREYXRlPzogc3RyaW5nO1xuICAgICAgICBlbmREYXRlPzogc3RyaW5nO1xuICAgICAgICBvbkRhdGVDaGFuZ2U6IChzdGFydERhdGU6IHN0cmluZywgZW5kRGF0ZTogc3RyaW5nKSA9PiB2b2lkO1xuICAgIH07XG4gICAgW0NvbXBvbmVudFR5cGUuUHJlZmVyZW5jZVNlbGVjdG9yXToge1xuICAgICAgICBzZWxlY3RlZFByZWZlcmVuY2VzOiBUcmF2ZWxQcmVmZXJlbmNlW107XG4gICAgICAgIG9uUHJlZmVyZW5jZUNoYW5nZTogKHByZWZlcmVuY2VzOiBUcmF2ZWxQcmVmZXJlbmNlW10pID0+IHZvaWQ7XG4gICAgfTtcbiAgICBbQ29tcG9uZW50VHlwZS5CdWRnZXRTZWxlY3Rvcl06IHtcbiAgICAgICAgc2VsZWN0ZWRCdWRnZXQ/OiBCdWRnZXRMZXZlbDtcbiAgICAgICAgb25CdWRnZXRDaGFuZ2U6IChidWRnZXQ6IEJ1ZGdldExldmVsKSA9PiB2b2lkO1xuICAgIH07XG4gICAgW0NvbXBvbmVudFR5cGUuTGFuZ3VhZ2VTZWxlY3Rvcl06IHtcbiAgICAgICAgc2VsZWN0ZWRMYW5ndWFnZT86IFN1cHBvcnRlZExhbmd1YWdlO1xuICAgICAgICBvbkxhbmd1YWdlQ2hhbmdlOiAobGFuZ3VhZ2U6IFN1cHBvcnRlZExhbmd1YWdlKSA9PiB2b2lkO1xuICAgIH07XG4gICAgW0NvbXBvbmVudFR5cGUuUGxhY2VDYXJkXToge1xuICAgICAgICB0aXRsZTogc3RyaW5nO1xuICAgICAgICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICAgICAgICBpbWFnZVVybDogc3RyaW5nO1xuICAgICAgICBvbkNsaWNrPzogKCkgPT4gdm9pZDtcbiAgICB9O1xuICAgIFtDb21wb25lbnRUeXBlLlRyYW5zcG9ydFNlbGVjdG9yXToge1xuICAgICAgICBvcHRpb25zOiBzdHJpbmdbXTtcbiAgICAgICAgb25TZWxlY3Q6IChvcHRpb246IHN0cmluZykgPT4gdm9pZDtcbiAgICB9O1xuICAgIFtDb21wb25lbnRUeXBlLkNhcm91c2VsXToge1xuICAgICAgICBpdGVtczogQXJyYXk8e1xuICAgICAgICAgICAgdGl0bGU6IHN0cmluZztcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gICAgICAgICAgICBpbWFnZVVybDogc3RyaW5nO1xuICAgICAgICB9PjtcbiAgICB9O1xuICAgIFtDb21wb25lbnRUeXBlLkRldGFpbHNDYXJkXToge1xuICAgICAgICB0aXRsZTogc3RyaW5nO1xuICAgICAgICBjb250ZW50OiBSZWFjdE5vZGU7XG4gICAgfTtcbiAgICBbQ29tcG9uZW50VHlwZS5TYXZlZFBsYWNlc0Nhcm91c2VsXToge1xuICAgICAgICBwbGFjZXM6IFBsYWNlW107XG4gICAgICAgIG9uRGVsZXRlOiAocGxhY2VJZDogc3RyaW5nKSA9PiB2b2lkO1xuICAgIH07XG4gICAgW0NvbXBvbmVudFR5cGUuUXVpY2tSZXNwb25zZV06IHtcbiAgICAgICAgcmVzcG9uc2VzOiBzdHJpbmdbXTtcbiAgICAgICAgb25SZXNwb25zZVNlbGVjdDogKHRleHQ6IHN0cmluZykgPT4gdm9pZDtcbiAgICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENvbXBvbmVudFJlZ2lzdHJhdGlvbjxUIGV4dGVuZHMgQ29tcG9uZW50VHlwZT4ge1xuICAgIGNvbXBvbmVudDogUmVhY3QuQ29tcG9uZW50VHlwZTxDb21wb25lbnRQcm9wc1tUXT47XG4gICAgZGVmYXVsdFByb3BzPzogUGFydGlhbDxDb21wb25lbnRQcm9wc1tUXT47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29tcG9uZW50U3RhdGUge1xuICAgIGlkOiBzdHJpbmc7XG4gICAgdHlwZTogQ29tcG9uZW50VHlwZTtcbiAgICBwcm9wczogYW55O1xuICAgIGlzVmlzaWJsZTogYm9vbGVhbjtcbiAgICBvcmRlcjogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENvbXBvbmVudFRyYW5zaXRpb24ge1xuICAgIGlkOiBzdHJpbmc7XG4gICAgZnJvbTogUGFydGlhbDxDb21wb25lbnRTdGF0ZT47XG4gICAgdG86IFBhcnRpYWw8Q29tcG9uZW50U3RhdGU+O1xuICAgIGR1cmF0aW9uPzogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENvbXBvbmVudFVwZGF0ZSB7XG4gICAgaWQ6IHN0cmluZztcbiAgICB1cGRhdGVzOiBQYXJ0aWFsPENvbXBvbmVudFN0YXRlPjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBNZXNzYWdlRGF0YSB7XG4gICAgdG9vbE5hbWU/OiBDb21wb25lbnRUeXBlO1xuICAgIGNvbXBvbmVudFByb3BzPzogYW55O1xuICAgIGlzRGV0YWlsc0NhcmQ/OiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENoYXRNZXNzYWdlIGV4dGVuZHMgT21pdDxBaU1lc3NhZ2UsICdkYXRhJz4ge1xuICAgIGRhdGE/OiBNZXNzYWdlRGF0YTtcbn1cblxuZXhwb3J0IHR5cGUgVG9vbFJlc3BvbnNlPFQgZXh0ZW5kcyBDb21wb25lbnRUeXBlPiA9IHtcbiAgICB0eXBlOiBUO1xuICAgIHByb3BzOiBDb21wb25lbnRQcm9wc1tUXTtcbiAgICBtZXNzYWdlPzogc3RyaW5nO1xufVxuXG4vLyBTZXNzaW9uIFR5cGVzXG5leHBvcnQgaW50ZXJmYWNlIFRyYXZlbFNlc3Npb24ge1xuICAgIC8vIFNlc3Npb24gaW5mb1xuICAgIHNlc3Npb25JZDogc3RyaW5nO1xuICAgIHN0YXJ0VGltZTogbnVtYmVyO1xuICAgIGxhc3RBY3RpdmU6IG51bWJlcjtcbiAgICBleHBpcmVzQXQ6IG51bWJlcjtcblxuICAgIC8vIFRyYXZlbCBkZXRhaWxzXG4gICAgZGVzdGluYXRpb246IHN0cmluZztcbiAgICBzdGFydERhdGU6IHN0cmluZztcbiAgICBlbmREYXRlOiBzdHJpbmc7XG4gICAgcHJlZmVyZW5jZXM6IHN0cmluZ1tdO1xuICAgIGJ1ZGdldDogc3RyaW5nO1xuICAgIGxhbmd1YWdlOiBzdHJpbmc7XG4gICAgdHJhbnNwb3J0OiBzdHJpbmdbXTtcbiAgICBsb2NhdGlvbj86IHtcbiAgICAgICAgbGF0aXR1ZGU6IG51bWJlcjtcbiAgICAgICAgbG9uZ2l0dWRlOiBudW1iZXI7XG4gICAgfTtcblxuICAgIC8vIFBsYWNlc1xuICAgIHNhdmVkUGxhY2VzOiBhbnlbXTtcbiAgICBjdXJyZW50U3RhZ2U6IG51bWJlcjtcblxuICAgIC8vIE1ldHJpY3NcbiAgICB0b3RhbFByb21wdHM6IG51bWJlcjtcbiAgICBzdGFnZVByb21wdHM6IFJlY29yZDxudW1iZXIsIG51bWJlcj47XG4gICAgc2F2ZWRQbGFjZXNDb3VudDogbnVtYmVyO1xuICAgIFxuICAgIC8vIFBheW1lbnRcbiAgICBpc1BhaWQ6IGJvb2xlYW47XG4gICAgcGF5bWVudFJlZmVyZW5jZTogc3RyaW5nO1xuICAgIHBheW1lbnRUaW1lc3RhbXA/OiBudW1iZXI7XG59XG5cbmV4cG9ydCB0eXBlIENoYXRTdGF0ZSA9ICdpbml0aWFsJyB8ICdnYXRoZXJpbmdfaW5mbycgfCAncGxhbm5pbmcnIHwgJ2ludGVycnVwdGVkJyB8ICdjb21wbGV0ZWQnO1xuXG5leHBvcnQgaW50ZXJmYWNlIEFJUmVzcG9uc2Uge1xuICAgIG1lc3NhZ2U6IHN0cmluZztcbiAgICBwYXJhbWV0ZXJzPzogVHJhdmVsRGV0YWlscztcbiAgICBzdWdnZXN0ZWRBY3Rpb24/OiBzdHJpbmc7XG4gICAgZXJyb3I/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2FjaGVDb25maWcge1xuICAgIG1heFNpemU6IG51bWJlcjtcbiAgICB0dGw6IG51bWJlcjsgLy8gVGltZSB0byBsaXZlIGluIG1pbGxpc2Vjb25kc1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENhY2hlRW50cnkge1xuICAgIGNvbnRlbnQ6IHN0cmluZztcbiAgICB0aW1lc3RhbXA6IG51bWJlcjtcbiAgICBsYW5ndWFnZTogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENvbnRlbnRSZXNwb25zZSB7XG4gICAgY29udGVudDogc3RyaW5nO1xuICAgIGNhY2hlZDogYm9vbGVhbjtcbiAgICBsYW5ndWFnZTogc3RyaW5nO1xuICAgIGdlbmVyYXRlZDogRGF0ZTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBUb29sSW52b2NhdGlvbiB7XG4gICAgdG9vbE5hbWU6IHN0cmluZztcbiAgICB0b29sQ2FsbElkOiBzdHJpbmc7XG4gICAgc3RhdGU6ICdyZXN1bHQnIHwgJ3BlbmRpbmcnIHwgJ2Vycm9yJzsgIFxuICAgIGFyZ3M6IEpTT05WYWx1ZTsgIFxuICAgIHJlc3VsdD86IHtcbiAgICAgICAgdHlwZTogc3RyaW5nO1xuICAgICAgICBwcm9wczogUmVjb3JkPHN0cmluZywgdW5rbm93bj47ICBcbiAgICB9O1xuICAgIGVycm9yPzogc3RyaW5nOyAgXG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTWVzc2FnZSB7XG4gICAgaWQ6IHN0cmluZztcbiAgICByb2xlOiAndXNlcicgfCAnYXNzaXN0YW50JyB8ICdzeXN0ZW0nOyAgXG4gICAgY29udGVudDogc3RyaW5nO1xuICAgIGNyZWF0ZWRBdD86IERhdGU7ICBcbiAgICBkYXRhPzogTWVzc2FnZURhdGE7XG4gICAgdG9vbEludm9jYXRpb25zPzogVG9vbEludm9jYXRpb25bXTtcbiAgICBwYXJlbnRNZXNzYWdlSWQ/OiBzdHJpbmc7ICBcbn1cblxuLy8gV2VhdGhlciByZWxhdGVkIHR5cGVzXG5leHBvcnQgaW50ZXJmYWNlIFdlYXRoZXJEYXRhIHtcbiAgICBkYXRlOiBzdHJpbmc7XG4gICAgcHJlY2lwaXRhdGlvbjoge1xuICAgICAgICB0b3RhbDogbnVtYmVyO1xuICAgIH07XG4gICAgdGVtcGVyYXR1cmU6IHtcbiAgICAgICAgbWF4OiBudW1iZXI7XG4gICAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBXZWF0aGVyQ2hhcnRQcm9wcyB7XG4gICAgbGF0OiBudW1iZXI7XG4gICAgbG9uOiBudW1iZXI7XG4gICAgY2l0eTogc3RyaW5nO1xuICAgIHN0YXJ0RGF0ZTogc3RyaW5nO1xuICAgIGVuZERhdGU6IHN0cmluZztcbiAgICB1bml0cz86ICd1cycgfCAndWsnIHwgJ21ldHJpYyc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgT3BlbldlYXRoZXJEYXlSZXNwb25zZSB7XG4gICAgbGF0OiBudW1iZXI7XG4gICAgbG9uOiBudW1iZXI7XG4gICAgdHo6IHN0cmluZztcbiAgICBkYXRlOiBzdHJpbmc7XG4gICAgdW5pdHM6IHN0cmluZztcbiAgICBjbG91ZF9jb3Zlcjoge1xuICAgIGFmdGVybm9vbjogbnVtYmVyO1xuICAgIH07XG4gICAgaHVtaWRpdHk6IHtcbiAgICBhZnRlcm5vb246IG51bWJlcjtcbiAgICB9O1xuICAgIHByZWNpcGl0YXRpb246IHtcbiAgICB0b3RhbDogbnVtYmVyO1xuICAgIH07XG4gICAgdGVtcGVyYXR1cmU6IHtcbiAgICBtaW46IG51bWJlcjtcbiAgICBtYXg6IG51bWJlcjtcbiAgICBhZnRlcm5vb246IG51bWJlcjtcbiAgICBuaWdodDogbnVtYmVyO1xuICAgIGV2ZW5pbmc6IG51bWJlcjtcbiAgICBtb3JuaW5nOiBudW1iZXI7XG4gICAgfTtcbiAgICBwcmVzc3VyZToge1xuICAgIGFmdGVybm9vbjogbnVtYmVyO1xuICAgIH07XG4gICAgd2luZDoge1xuICAgIG1heDoge1xuICAgICAgICBzcGVlZDogbnVtYmVyO1xuICAgICAgICBkaXJlY3Rpb246IG51bWJlcjtcbiAgICB9XG4gICAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFdlYXRoZXJSZXNwb25zZSB7XG4gICAgZGF0YTogT3BlbldlYXRoZXJEYXlSZXNwb25zZTtcbiAgICB5ZWFyOiBudW1iZXI7ICAvLyBBZGQgdGhpcyBmaWVsZFxuICAgIGVycm9yPzogc3RyaW5nO1xufVxuXG4vLyBDdXJyZW5jeSByZWxhdGVkIHR5cGVzXG5leHBvcnQgaW50ZXJmYWNlIEN1cnJlbmN5UmF0ZSB7XG4gICAgY29kZTogc3RyaW5nO1xuICAgIG5hbWU6IHN0cmluZztcbiAgICByYXRlOiBudW1iZXI7XG4gICAgc3ltYm9sPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEN1cnJlbmN5Q29udmVydGVyUHJvcHMge1xuICAgIGJhc2VDdXJyZW5jeT86IHN0cmluZztcbiAgICBiYXNlQW1vdW50PzogbnVtYmVyO1xuICAgIG9uQW1vdW50Q2hhbmdlPzogKGFtb3VudDogbnVtYmVyKSA9PiB2b2lkO1xuICAgIGRlZmF1bHRDdXJyZW5jaWVzPzogc3RyaW5nW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ3VycmVuY3lJbmZvIHtcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgc3ltYm9sOiBzdHJpbmc7XG4gICAgcG9zaXRpb246ICdiZWZvcmUnIHwgJ2FmdGVyJztcbn1cblxuZXhwb3J0IGNvbnN0IENVUlJFTkNZX0lORk86IHsgW2tleTogc3RyaW5nXTogQ3VycmVuY3lJbmZvIH0gPSB7XG4gICAgJ1VTRCc6IHsgbmFtZTogJ1VTIERvbGxhcicsIHN5bWJvbDogJyQnLCBwb3NpdGlvbjogJ2JlZm9yZScgfSxcbiAgICAnRVVSJzogeyBuYW1lOiAnRXVybycsIHN5bWJvbDogJ+KCrCcsIHBvc2l0aW9uOiAnYmVmb3JlJyB9LFxuICAgICdHQlAnOiB7IG5hbWU6ICdCcml0aXNoIFBvdW5kJywgc3ltYm9sOiAnwqMnLCBwb3NpdGlvbjogJ2JlZm9yZScgfSxcbiAgICAnQ05ZJzogeyBuYW1lOiAnQ2hpbmVzZSBZdWFuJywgc3ltYm9sOiAnwqUnLCBwb3NpdGlvbjogJ2JlZm9yZScgfSxcbiAgICAnSlBZJzogeyBuYW1lOiAnSmFwYW5lc2UgWWVuJywgc3ltYm9sOiAnwqUnLCBwb3NpdGlvbjogJ2JlZm9yZScgfSxcbiAgICAnU0dEJzogeyBuYW1lOiAnU2luZ2Fwb3JlIERvbGxhcicsIHN5bWJvbDogJ1MkJywgcG9zaXRpb246ICdiZWZvcmUnIH0sXG4gICAgJ01ZUic6IHsgbmFtZTogJ01hbGF5c2lhbiBSaW5nZ2l0Jywgc3ltYm9sOiAnUk0nLCBwb3NpdGlvbjogJ2JlZm9yZScgfSxcbiAgICAnS1JXJzogeyBuYW1lOiAnU291dGggS29yZWFuIFdvbicsIHN5bWJvbDogJ+KCqScsIHBvc2l0aW9uOiAnYmVmb3JlJyB9LFxuICAgICdBVUQnOiB7IG5hbWU6ICdBdXN0cmFsaWFuIERvbGxhcicsIHN5bWJvbDogJ0EkJywgcG9zaXRpb246ICdiZWZvcmUnIH0sXG4gICAgJ0NBRCc6IHsgbmFtZTogJ0NhbmFkaWFuIERvbGxhcicsIHN5bWJvbDogJ0MkJywgcG9zaXRpb246ICdiZWZvcmUnIH1cbn07XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ3VycmVuY3lDYWNoZSB7XG4gICAgdGltZXN0YW1wOiBudW1iZXI7XG4gICAgcmF0ZXM6IFJlY29yZDxzdHJpbmcsIG51bWJlcj47XG4gICAgYmFzZUN1cnJlbmN5OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ3VycmVuY3lBcGlSZXNwb25zZSB7XG4gICAgZGF0YTogeyBba2V5OiBzdHJpbmddOiBudW1iZXIgfTtcbn1cblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfQ1VSUkVOQ0lFUyA9IFsnVVNEJywgJ0VVUicsICdHQlAnLCAnQ05ZJywgJ0pQWSddO1xuXG5leHBvcnQgaW50ZXJmYWNlIFN0YWdlUHJvZ3Jlc3NSZXN1bHQge1xuICAgIHR5cGU6ICdzdGFnZVByb2dyZXNzJztcbiAgICBwcm9wczoge1xuICAgICAgICBuZXh0U3RhZ2U6IG51bWJlcjtcbiAgICAgICAgcmVhc29uOiBzdHJpbmc7XG4gICAgICAgIGNyaXRlcmlhOiBzdHJpbmdbXTtcbiAgICB9O1xufVxuIl0sIm5hbWVzIjpbIkNvbXBvbmVudFR5cGUiLCJCdWRnZXRMZXZlbCIsIlRyYXZlbFByZWZlcmVuY2UiLCJTdXBwb3J0ZWRMYW5ndWFnZSIsIkJVREdFVF9ERVNDUklQVElPTlMiLCJQUkVGRVJFTkNFX0lDT05TIiwiTEFOR1VBR0VfTEFCRUxTIiwiQlVER0VUX09QVElPTlMiLCJ2YWx1ZSIsImxhYmVsIiwiZGVzY3JpcHRpb24iLCJMQU5HVUFHRV9PUFRJT05TIiwiT2JqZWN0IiwiZW50cmllcyIsIm1hcCIsImtleSIsIlBSRUZFUkVOQ0VfT1BUSU9OUyIsImljb24iLCJDVVJSRU5DWV9JTkZPIiwibmFtZSIsInN5bWJvbCIsInBvc2l0aW9uIiwiREVGQVVMVF9DVVJSRU5DSUVTIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./managers/types.ts\n");

/***/ }),

/***/ "./utils/places-utils.ts":
/*!*******************************!*\
  !*** ./utils/places-utils.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   fetchPlaces: () => (/* binding */ fetchPlaces),\n/* harmony export */   filterUniquePlaces: () => (/* binding */ filterUniquePlaces),\n/* harmony export */   formatPrimaryType: () => (/* binding */ formatPrimaryType),\n/* harmony export */   getDisplayName: () => (/* binding */ getDisplayName),\n/* harmony export */   getPlaceTypesFromPreferences: () => (/* binding */ getPlaceTypesFromPreferences),\n/* harmony export */   metricsManager: () => (/* binding */ metricsManager),\n/* harmony export */   preferenceToPlaceTypes: () => (/* binding */ preferenceToPlaceTypes),\n/* harmony export */   savedPlacesManager: () => (/* binding */ savedPlacesManager),\n/* harmony export */   searchMultiplePlacesByText: () => (/* binding */ searchMultiplePlacesByText),\n/* harmony export */   searchPlaceByText: () => (/* binding */ searchPlaceByText)\n/* harmony export */ });\n/* harmony import */ var _managers_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../managers/types */ \"./managers/types.ts\");\n/* harmony import */ var _session_manager__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./session-manager */ \"./utils/session-manager.ts\");\n// Place related interfaces\n\n\n// Updated preference to place types mapping based on travel-rizz.html\nconst preferenceToPlaceTypes = {\n    [_managers_types__WEBPACK_IMPORTED_MODULE_0__.TravelPreference.Culture]: [\n        \"museum\",\n        \"cultural_center\",\n        \"cultural_landmark\",\n        \"historical_landmark\",\n        \"monument\",\n        \"art_gallery\",\n        \"historical_place\"\n    ],\n    [_managers_types__WEBPACK_IMPORTED_MODULE_0__.TravelPreference.Nature]: [\n        \"national_park\",\n        \"state_park\",\n        \"botanical_garden\",\n        \"wildlife_park\",\n        \"garden\",\n        \"hiking_area\",\n        \"wildlife_refuge\"\n    ],\n    [_managers_types__WEBPACK_IMPORTED_MODULE_0__.TravelPreference.Food]: [\n        \"restaurant\",\n        \"fine_dining_restaurant\",\n        \"cafe\",\n        \"food_court\",\n        \"bakery\",\n        \"dessert_shop\",\n        \"bar_and_grill\"\n    ],\n    [_managers_types__WEBPACK_IMPORTED_MODULE_0__.TravelPreference.Relaxation]: [\n        \"spa\",\n        \"wellness_center\",\n        \"shopping_mall\",\n        \"beach\",\n        \"garden\",\n        \"plaza\",\n        \"yoga_studio\"\n    ],\n    [_managers_types__WEBPACK_IMPORTED_MODULE_0__.TravelPreference.Adventure]: [\n        \"adventure_sports_center\",\n        \"amusement_park\",\n        \"hiking_area\",\n        \"sports_complex\",\n        \"water_park\",\n        \"off_roading_area\",\n        \"sports_activity_location\"\n    ],\n    [_managers_types__WEBPACK_IMPORTED_MODULE_0__.TravelPreference.Shopping]: [\n        \"art_gallery\",\n        \"art_studio\",\n        \"performing_arts_theater\",\n        \"auditorium\",\n        \"concert_hall\",\n        \"museum\",\n        \"opera_house\"\n    ]\n};\n// Helper function to get place types based on preferences\nfunction getPlaceTypesFromPreferences(preferences) {\n    try {\n        // Track used types to avoid repeats\n        const usedTypes = new Set();\n        const resultTypes = [];\n        // Process each preference\n        preferences.forEach((pref)=>{\n            const availableTypes = preferenceToPlaceTypes[pref]?.filter((type)=>!usedTypes.has(type)) || [];\n            // Take 2-3 random types from each preference\n            const numTypes = Math.min(Math.floor(Math.random() * 2) + 2, availableTypes.length);\n            const selectedTypes = availableTypes.sort(()=>Math.random() - 0.5).slice(0, numTypes);\n            // Add to results and mark as used\n            selectedTypes.forEach((type)=>{\n                resultTypes.push(type);\n                usedTypes.add(type);\n            });\n        });\n        return resultTypes;\n    } catch (error) {\n        console.error(\"Error getting place types from preferences:\", error);\n        return [\n            \"tourist_attraction\"\n        ]; // Default fallback\n    }\n}\n// Helper function to format primary type\nconst formatPrimaryType = (type)=>{\n    return type.split(\"_\").map((word)=>word.charAt(0).toUpperCase() + word.slice(1)).join(\" \");\n};\n// Helper function to get display name for place type\nconst getDisplayName = (place)=>{\n    if (typeof place.displayName === \"string\") {\n        return place.displayName;\n    }\n    return place.displayName?.text || place.name || \"\";\n};\n// Function to filter out duplicate places\nfunction filterUniquePlaces(places) {\n    if (!places || !Array.isArray(places)) return [];\n    // Get saved places from global state if available\n    const savedPlaces = savedPlacesManager.getPlaces();\n    const savedPlaceIds = new Set(savedPlaces.map((place)=>place.id));\n    const savedPlaceNames = new Set(savedPlaces.map((place)=>typeof place.displayName === \"string\" ? place.displayName.toLowerCase() : place.displayName.text.toLowerCase()));\n    // Filter out places that:\n    // 1. Have same ID as saved place\n    // 2. Have same name as saved place\n    return places.filter((place)=>{\n        if (!place.id) return false;\n        if (savedPlaceIds.has(place.id)) return false;\n        const placeName = typeof place.displayName === \"string\" ? place.displayName.toLowerCase() : place.displayName.text.toLowerCase();\n        if (savedPlaceNames.has(placeName)) return false;\n        return true;\n    });\n}\nconst STORAGE_KEY = \"saved_places\";\n// SavedPlacesManager singleton\nconst createSavedPlacesManager = ()=>{\n    const places = new Map();\n    let initialized = false;\n    // Load places from sessionStorage\n    const loadFromStorage = ()=>{\n        if (!initialized && \"undefined\" !== \"undefined\") {}\n    };\n    return {\n        places,\n        addPlace (place) {\n            loadFromStorage(); // Ensure places are loaded\n            if (place?.id) {\n                places.set(place.id, place);\n                this._persist();\n                this._notifyChange();\n            }\n        },\n        removePlace (id) {\n            loadFromStorage(); // Ensure places are loaded\n            places.delete(id);\n            this._persist();\n            this._notifyChange();\n        },\n        getPlaces () {\n            loadFromStorage(); // Ensure places are loaded\n            return Array.from(places.values());\n        },\n        hasPlace (id) {\n            loadFromStorage(); // Ensure places are loaded\n            return places.has(id);\n        },\n        updatePlace (place) {\n            if (place.id && places.has(place.id)) {\n                places.set(place.id, place);\n                this._persist();\n                this._notifyChange();\n            }\n        },\n        _persist () {\n            if (false) {}\n        },\n        _notifyChange () {\n            if (false) {}\n        },\n        serialize () {\n            return JSON.stringify(Array.from(places.values()));\n        }\n    };\n};\nconst savedPlacesManager = createSavedPlacesManager();\n// Initialize on client side\nif (false) {}\n// Helper function to handle different search strategies\nasync function searchWithStrategy(searchText, location, cityName, useAlternateSearch) {\n    if (false) {}\n    const headers = {\n        \"Content-Type\": \"application/json\",\n        \"X-Goog-Api-Key\": \"AIzaSyDvcgBgSprgTRQO_6BWh5EAOPu1vdS6KD4\",\n        \"X-Goog-FieldMask\": \"places.id,places.displayName,places.formattedAddress,places.location,places.primaryType,places.primaryTypeDisplayName,places.photos.name,places.photos.widthPx,places.photos.heightPx\"\n    };\n    // Choose query based on whether we're doing alternate search\n    const query = useAlternateSearch ? `different ${searchText} in ${cityName}` : `${searchText} ${cityName}`;\n    console.log(`[searchWithStrategy] Using ${useAlternateSearch ? \"alternate\" : \"original\"} search:`, query);\n    const result = await trySearch(query, headers, location);\n    return result;\n}\nasync function trySearch(query, headers, location) {\n    try {\n        const response = await fetch(\"https://places.googleapis.com/v1/places:searchText\", {\n            method: \"POST\",\n            headers,\n            body: JSON.stringify({\n                textQuery: query,\n                locationBias: {\n                    circle: {\n                        center: {\n                            latitude: location.latitude,\n                            longitude: location.longitude\n                        },\n                        radius: 20000.0\n                    }\n                },\n                maxResultCount: 1\n            })\n        });\n        if (!response.ok) {\n            console.error(\"[trySearch] Search failed:\", {\n                status: response.status,\n                statusText: response.statusText,\n                query\n            });\n            return null;\n        }\n        const data = await response.json();\n        if (!data.places?.[0]) {\n            console.log(\"[trySearch] No places found for query:\", query);\n            return null;\n        }\n        console.log(\"[trySearch] Found new place:\", {\n            id: data.places[0].id,\n            name: data.places[0].displayName?.text || data.places[0].name\n        });\n        return {\n            places: [\n                data.places[0]\n            ]\n        };\n    } catch (error) {\n        console.error(\"[trySearch] Error:\", error);\n        return null;\n    }\n}\nasync function searchPlaceByText(searchText, location, destination) {\n    console.log(\"[searchPlaceByText] Starting search with:\", {\n        searchText,\n        location,\n        destination\n    });\n    try {\n        const cityName = destination;\n        const result = await searchWithStrategy(searchText, location, cityName, false);\n        if (!result?.places?.[0]) {\n            return null;\n        }\n        const place = transformPlaceResponse(result.places[0]);\n        if (!place) {\n            return null;\n        }\n        // Check if place is already saved using savedPlacesManager\n        const isAlreadySaved = savedPlacesManager.hasPlace(place.id);\n        if (!isAlreadySaved) {\n            console.log(\"[searchPlaceByText] Adding new place:\", {\n                id: place.id,\n                name: getDisplayName(place)\n            });\n            savedPlacesManager.addPlace(place);\n            // Update metrics\n            const metrics = metricsManager.get();\n            metrics.savedPlacesCount = savedPlacesManager.places.size;\n            metricsManager.update(metrics);\n        }\n        console.log(\"[searchPlaceByText] Found place:\", {\n            id: place.id,\n            name: getDisplayName(place),\n            isAlreadySaved\n        });\n        return place;\n    } catch (error) {\n        console.error(\"[searchPlaceByText] Error searching for place:\", error);\n        return null;\n    }\n}\n// Initialize metrics in storage\nfunction initializeMetrics() {\n    if (true) {\n        return {\n            sessionId: \"\",\n            startTime: Date.now(),\n            lastActive: Date.now(),\n            expiresAt: Date.now() + 24 * 60 * 60 * 1000,\n            destination: \"\",\n            startDate: \"\",\n            endDate: \"\",\n            preferences: [],\n            budget: \"\",\n            language: \"\",\n            transport: [],\n            savedPlaces: [],\n            currentStage: 1,\n            totalPrompts: 0,\n            stagePrompts: {\n                1: 0,\n                2: 0,\n                3: 0\n            },\n            savedPlacesCount: 0,\n            isPaid: false,\n            paymentReference: \"\"\n        };\n    }\n    const session = (0,_session_manager__WEBPACK_IMPORTED_MODULE_1__.getStoredSession)();\n    if (!session) {\n        return initializeMetrics();\n    }\n    // Always ensure savedPlacesCount matches actual saved places\n    session.savedPlacesCount = savedPlacesManager.places.size;\n    return session;\n}\n// Update metrics in storage\nfunction updateMetrics(session) {\n    if (true) return;\n    try {\n        const storedSession = (0,_session_manager__WEBPACK_IMPORTED_MODULE_1__.getStoredSession)();\n        if (!storedSession) return;\n        // Update only metrics-related fields\n        storedSession.totalPrompts = session.totalPrompts;\n        storedSession.stagePrompts = session.stagePrompts;\n        storedSession.savedPlacesCount = session.savedPlacesCount;\n        sessionStorage.setItem(_session_manager__WEBPACK_IMPORTED_MODULE_1__.SESSION_CONFIG.STORAGE_KEY, JSON.stringify(storedSession));\n    } catch (error) {\n        console.error(\"[Places] Error updating metrics:\", error);\n    }\n}\n// Export the metrics functions\nconst metricsManager = {\n    get: initializeMetrics,\n    update: updateMetrics\n};\n// Helper function to transform Google Places API response to our Place type\nfunction transformPlaceResponse(place) {\n    if (!place) return null;\n    console.log(\"[transformPlaceResponse] Input place:\", {\n        id: place.id,\n        photos: place.photos?.map((p)=>({\n                name: p.name\n            })),\n        primaryTypeDisplayName: place.primaryTypeDisplayName\n    });\n    const displayName = place.displayName?.text ? {\n        text: place.displayName.text,\n        languageCode: place.displayName.languageCode || \"en\"\n    } : place.name || \"\";\n    // Ensure photos array is properly formatted\n    const photos = (place.photos || []).filter((photo)=>Boolean(photo && photo.name)).map((photo)=>({\n            name: photo.name,\n            widthPx: photo.widthPx,\n            heightPx: photo.heightPx,\n            authorAttributions: photo.authorAttributions\n        }));\n    const transformed = {\n        id: place.id,\n        name: place.name,\n        displayName,\n        primaryType: place.primaryType || \"place\",\n        photos,\n        formattedAddress: place.formattedAddress,\n        location: place.location,\n        primaryTypeDisplayName: place.primaryTypeDisplayName ? {\n            text: place.primaryTypeDisplayName.text,\n            languageCode: place.primaryTypeDisplayName.languageCode || \"en\"\n        } : undefined\n    };\n    console.log(\"[transformPlaceResponse] Transformed place:\", {\n        id: transformed.id,\n        photos: transformed.photos.map((p)=>({\n                name: p.name\n            })),\n        primaryTypeDisplayName: transformed.primaryTypeDisplayName\n    });\n    return transformed;\n}\nconst searchMultiplePlacesByText = async (searchText, location, maxResults = 5)=>{\n    try {\n        if (false) {}\n        console.log(\"Executing searchMultiplePlacesByText with params:\", {\n            searchText,\n            location,\n            maxResults\n        });\n        const requestBody = {\n            textQuery: searchText,\n            locationBias: {\n                circle: {\n                    center: {\n                        latitude: location.latitude,\n                        longitude: location.longitude\n                    },\n                    radius: 20000.0 // 20km radius\n                }\n            },\n            maxResultCount: maxResults\n        };\n        const headers = {\n            \"Content-Type\": \"application/json\",\n            \"X-Goog-Api-Key\": \"AIzaSyDvcgBgSprgTRQO_6BWh5EAOPu1vdS6KD4\",\n            \"X-Goog-FieldMask\": \"places.id,places.displayName,places.formattedAddress,places.location,places.primaryType,places.primaryTypeDisplayName,places.photos.name,places.photos.widthPx,places.photos.heightPx\"\n        };\n        const response = await fetch(\"https://places.googleapis.com/v1/places:searchText\", {\n            method: \"POST\",\n            headers,\n            body: JSON.stringify(requestBody)\n        });\n        if (!response.ok) {\n            const errorData = await response.text();\n            console.error(\"Failed to search places:\", {\n                status: response.status,\n                statusText: response.statusText,\n                error: errorData\n            });\n            return [];\n        }\n        const data = await response.json();\n        if (!data.places || !Array.isArray(data.places) || data.places.length === 0) {\n            console.log(\"No places found for text search:\", searchText);\n            return [];\n        }\n        return data.places.map((place)=>({\n                id: place.id,\n                displayName: place.displayName?.text ? {\n                    text: place.displayName.text,\n                    languageCode: place.displayName.languageCode || \"en\"\n                } : place.displayName,\n                primaryType: place.primaryType || \"place\",\n                photos: place.photos?.map((photo)=>({\n                        name: photo.name,\n                        widthPx: photo.widthPx,\n                        heightPx: photo.heightPx\n                    })) || [],\n                formattedAddress: place.formattedAddress,\n                location: place.location,\n                primaryTypeDisplayName: place.primaryTypeDisplayName ? {\n                    text: place.primaryTypeDisplayName.text,\n                    languageCode: place.primaryTypeDisplayName.languageCode || \"en\"\n                } : undefined\n            }));\n    } catch (error) {\n        console.error(\"Error searching for places:\", error);\n        return [];\n    }\n};\n// Fetch places from Google Places API\nconst fetchPlaces = async (latitude, longitude, preferences, maxResults = 5, placeTypes)=>{\n    try {\n        if (false) {}\n        const fromPreferences = !!preferences && preferences.length > 0;\n        const fromPlaceTypes = !!placeTypes && placeTypes.length > 0;\n        if (!fromPreferences && !fromPlaceTypes) {\n            console.error(\"No preferences or place types provided\");\n            return [];\n        }\n        // Use preferences if provided, otherwise use placeTypes, otherwise use defaults\n        let includedTypes = [];\n        if (fromPreferences) {\n            includedTypes = getPlaceTypesFromPreferences(preferences);\n        } else if (fromPlaceTypes) {\n            includedTypes = placeTypes;\n        }\n        console.log(\"Executing fetchplaces with params:\", {\n            latitude,\n            longitude,\n            includedTypes,\n            maxResults,\n            fromPreferences: !!preferences?.length,\n            fromPlaceTypes: !!placeTypes?.length\n        });\n        // First try nearby search\n        try {\n            const requestBody = {\n                includedTypes,\n                maxResultCount: maxResults,\n                locationRestriction: {\n                    circle: {\n                        center: {\n                            latitude: latitude,\n                            longitude: longitude\n                        },\n                        radius: 20000.0 // 20km radius\n                    }\n                }\n            };\n            const headers = {\n                \"Content-Type\": \"application/json\",\n                \"X-Goog-Api-Key\": \"AIzaSyDvcgBgSprgTRQO_6BWh5EAOPu1vdS6KD4\",\n                \"X-Goog-FieldMask\": \"places.id,places.displayName,places.formattedAddress,places.location,places.primaryType,places.primaryTypeDisplayName,places.photos.name,places.photos.widthPx,places.photos.heightPx\"\n            };\n            const response = await fetch(\"https://places.googleapis.com/v1/places:searchNearby\", {\n                method: \"POST\",\n                headers,\n                body: JSON.stringify(requestBody)\n            });\n            if (response.ok) {\n                const data = await response.json();\n                if (data.places && Array.isArray(data.places) && data.places.length > 0) {\n                    return data.places.map((place)=>({\n                            id: place.id,\n                            displayName: place.displayName?.text ? {\n                                text: place.displayName.text,\n                                languageCode: place.displayName.languageCode || \"en\"\n                            } : place.displayName,\n                            primaryType: place.primaryType || \"place\",\n                            photos: place.photos?.map((photo)=>({\n                                    name: photo.name,\n                                    widthPx: photo.widthPx,\n                                    heightPx: photo.heightPx\n                                })) || [],\n                            formattedAddress: place.formattedAddress,\n                            location: place.location,\n                            primaryTypeDisplayName: place.primaryTypeDisplayName ? {\n                                text: place.primaryTypeDisplayName.text,\n                                languageCode: place.primaryTypeDisplayName.languageCode || \"en\"\n                            } : undefined\n                        }));\n                }\n            }\n            const errorData = await response.text();\n            console.error(\"Failed to fetch places:\", {\n                status: response.status,\n                statusText: response.statusText,\n                error: errorData\n            });\n        } catch (error) {\n            console.error(\"Error in nearby search:\", error);\n        }\n        // If nearby search fails, try text search as fallback\n        console.log(\"Falling back to text search...\");\n        const searchQuery = fromPlaceTypes ? placeTypes[0] : preferences[0];\n        return await searchMultiplePlacesByText(searchQuery, {\n            latitude,\n            longitude\n        }, maxResults);\n    } catch (error) {\n        console.error(\"Error fetching places:\", error);\n        return [];\n    }\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TUFBTThHLHNCQUFzQixDQUFDQyxZQUFZLElBQUk7NEJBQy9ELElBQUlRO3dCQUNSO2dCQUNKO1lBQ0o7WUFFQSxNQUFNSSxZQUFZLE1BQU12RCxTQUFTbEUsSUFBSTtZQUNyQ1gsUUFBUUQsS0FBSyxDQUFDLDJCQUEyQjtnQkFDckMyRixRQUFRYixTQUFTYSxNQUFNO2dCQUN2QkMsWUFBWWQsU0FBU2MsVUFBVTtnQkFDL0I1RixPQUFPcUk7WUFDWDtRQUNKLEVBQUUsT0FBT3JJLE9BQU87WUFDWkMsUUFBUUQsS0FBSyxDQUFDLDJCQUEyQkE7UUFDN0M7UUFFQSxzREFBc0Q7UUFDdERDLFFBQVFnQyxHQUFHLENBQUM7UUFDWixNQUFNMkcsY0FBY0gsaUJBQWlCRixVQUFXLENBQUMsRUFBRSxHQUFHNUosV0FBWSxDQUFDLEVBQUU7UUFDckUsT0FBTyxNQUFNdUosMkJBQTJCVSxhQUFhO1lBQUV0RDtZQUFVQztRQUFVLEdBQUc0QztJQUVsRixFQUFFLE9BQU9uSSxPQUFPO1FBQ1pDLFFBQVFELEtBQUssQ0FBQywwQkFBMEJBO1FBQ3hDLE9BQU8sRUFBRTtJQUNiO0FBQ0osRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL3RyYXZlbC1yaXp6Ly4vdXRpbHMvcGxhY2VzLXV0aWxzLnRzPzU1NWMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gUGxhY2UgcmVsYXRlZCBpbnRlcmZhY2VzXG5leHBvcnQgaW50ZXJmYWNlIFBsYWNlIHtcbiAgICBuYW1lOiBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gICAgaWQ6IHN0cmluZztcbiAgICBkaXNwbGF5TmFtZToge1xuICAgICAgICB0ZXh0OiBzdHJpbmc7XG4gICAgICAgIGxhbmd1YWdlQ29kZTogc3RyaW5nO1xuICAgIH0gfCBzdHJpbmc7XG4gICAgZm9ybWF0dGVkQWRkcmVzcz86IHN0cmluZztcbiAgICBsb2NhdGlvbj86IHtcbiAgICAgICAgbGF0aXR1ZGU6IG51bWJlcjtcbiAgICAgICAgbG9uZ2l0dWRlOiBudW1iZXI7XG4gICAgfTtcbiAgICBwcmltYXJ5VHlwZTogc3RyaW5nO1xuICAgIHByaW1hcnlUeXBlRGlzcGxheU5hbWU/OiB7XG4gICAgICAgIHRleHQ6IHN0cmluZztcbiAgICAgICAgbGFuZ3VhZ2VDb2RlOiBzdHJpbmc7XG4gICAgfTtcbiAgICBwaG90b3M6IHsgXG4gICAgICAgIG5hbWU6IHN0cmluZztcbiAgICAgICAgd2lkdGhQeD86IG51bWJlcjtcbiAgICAgICAgaGVpZ2h0UHg/OiBudW1iZXI7XG4gICAgICAgIGF1dGhvckF0dHJpYnV0aW9ucz86IEFycmF5PHtcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lPzogc3RyaW5nO1xuICAgICAgICAgICAgdXJpPzogc3RyaW5nO1xuICAgICAgICAgICAgcGhvdG9Vcmk/OiBzdHJpbmc7XG4gICAgICAgIH0+O1xuICAgIH1bXTtcbiAgICAvLyBPcHRpb25hbCBpbmRpY2VzIGZvciBpdGluZXJhcnkgcGxhbm5pbmdcbiAgICBkYXlJbmRleD86IG51bWJlcjtcbiAgICBvcmRlckluZGV4PzogbnVtYmVyO1xufVxuXG5pbnRlcmZhY2UgR29vZ2xlUGxhY2VSZXNwb25zZSB7XG4gICAgaWQ6IHN0cmluZztcbiAgICBuYW1lPzogc3RyaW5nO1xuICAgIGRpc3BsYXlOYW1lPzoge1xuICAgICAgICB0ZXh0OiBzdHJpbmc7XG4gICAgICAgIGxhbmd1YWdlQ29kZTogc3RyaW5nO1xuICAgIH07XG4gICAgZm9ybWF0dGVkQWRkcmVzcz86IHN0cmluZztcbiAgICBsb2NhdGlvbj86IHtcbiAgICAgICAgbGF0aXR1ZGU6IG51bWJlcjtcbiAgICAgICAgbG9uZ2l0dWRlOiBudW1iZXI7XG4gICAgfTtcbiAgICBwcmltYXJ5VHlwZT86IHN0cmluZztcbiAgICBwcmltYXJ5VHlwZURpc3BsYXlOYW1lPzoge1xuICAgICAgICB0ZXh0OiBzdHJpbmc7XG4gICAgICAgIGxhbmd1YWdlQ29kZTogc3RyaW5nO1xuICAgIH07XG4gICAgcGhvdG9zPzogQXJyYXk8e1xuICAgICAgICBuYW1lOiBzdHJpbmc7XG4gICAgICAgIHdpZHRoUHg/OiBudW1iZXI7XG4gICAgICAgIGhlaWdodFB4PzogbnVtYmVyO1xuICAgICAgICBhdXRob3JBdHRyaWJ1dGlvbnM/OiBBcnJheTx7XG4gICAgICAgICAgICBkaXNwbGF5TmFtZT86IHN0cmluZztcbiAgICAgICAgICAgIHVyaT86IHN0cmluZztcbiAgICAgICAgICAgIHBob3RvVXJpPzogc3RyaW5nO1xuICAgICAgICB9PjtcbiAgICB9Pjtcbn1cblxuaW1wb3J0IHsgVHJhdmVsUHJlZmVyZW5jZSwgVHJhdmVsU2Vzc2lvbiB9IGZyb20gJy4uL21hbmFnZXJzL3R5cGVzJztcbmltcG9ydCB7IGdldFN0b3JlZFNlc3Npb24sIGdldFN0b3JlZE1ldHJpY3MsIFNFU1NJT05fQ09ORklHIH0gZnJvbSAnLi9zZXNzaW9uLW1hbmFnZXInO1xuXG4vLyBVcGRhdGVkIHByZWZlcmVuY2UgdG8gcGxhY2UgdHlwZXMgbWFwcGluZyBiYXNlZCBvbiB0cmF2ZWwtcml6ei5odG1sXG5leHBvcnQgY29uc3QgcHJlZmVyZW5jZVRvUGxhY2VUeXBlczogUmVjb3JkPFRyYXZlbFByZWZlcmVuY2UsIHN0cmluZ1tdPiA9IHtcbiAgICBbVHJhdmVsUHJlZmVyZW5jZS5DdWx0dXJlXTogW1xuICAgICAgICAnbXVzZXVtJyxcbiAgICAgICAgJ2N1bHR1cmFsX2NlbnRlcicsXG4gICAgICAgICdjdWx0dXJhbF9sYW5kbWFyaycsXG4gICAgICAgICdoaXN0b3JpY2FsX2xhbmRtYXJrJyxcbiAgICAgICAgJ21vbnVtZW50JyxcbiAgICAgICAgJ2FydF9nYWxsZXJ5JyxcbiAgICAgICAgJ2hpc3RvcmljYWxfcGxhY2UnXG4gICAgXSxcbiAgICBbVHJhdmVsUHJlZmVyZW5jZS5OYXR1cmVdOiBbXG4gICAgICAgICduYXRpb25hbF9wYXJrJyxcbiAgICAgICAgJ3N0YXRlX3BhcmsnLFxuICAgICAgICAnYm90YW5pY2FsX2dhcmRlbicsXG4gICAgICAgICd3aWxkbGlmZV9wYXJrJyxcbiAgICAgICAgJ2dhcmRlbicsXG4gICAgICAgICdoaWtpbmdfYXJlYScsXG4gICAgICAgICd3aWxkbGlmZV9yZWZ1Z2UnXG4gICAgXSxcbiAgICBbVHJhdmVsUHJlZmVyZW5jZS5Gb29kXTogW1xuICAgICAgICAncmVzdGF1cmFudCcsXG4gICAgICAgICdmaW5lX2RpbmluZ19yZXN0YXVyYW50JyxcbiAgICAgICAgJ2NhZmUnLFxuICAgICAgICAnZm9vZF9jb3VydCcsXG4gICAgICAgICdiYWtlcnknLFxuICAgICAgICAnZGVzc2VydF9zaG9wJyxcbiAgICAgICAgJ2Jhcl9hbmRfZ3JpbGwnXG4gICAgXSxcbiAgICBbVHJhdmVsUHJlZmVyZW5jZS5SZWxheGF0aW9uXTogW1xuICAgICAgICAnc3BhJyxcbiAgICAgICAgJ3dlbGxuZXNzX2NlbnRlcicsXG4gICAgICAgICdzaG9wcGluZ19tYWxsJyxcbiAgICAgICAgJ2JlYWNoJyxcbiAgICAgICAgJ2dhcmRlbicsXG4gICAgICAgICdwbGF6YScsXG4gICAgICAgICd5b2dhX3N0dWRpbydcbiAgICBdLFxuICAgIFtUcmF2ZWxQcmVmZXJlbmNlLkFkdmVudHVyZV06IFtcbiAgICAgICAgJ2FkdmVudHVyZV9zcG9ydHNfY2VudGVyJyxcbiAgICAgICAgJ2FtdXNlbWVudF9wYXJrJyxcbiAgICAgICAgJ2hpa2luZ19hcmVhJyxcbiAgICAgICAgJ3Nwb3J0c19jb21wbGV4JyxcbiAgICAgICAgJ3dhdGVyX3BhcmsnLFxuICAgICAgICAnb2ZmX3JvYWRpbmdfYXJlYScsXG4gICAgICAgICdzcG9ydHNfYWN0aXZpdHlfbG9jYXRpb24nXG4gICAgXSxcbiAgICBbVHJhdmVsUHJlZmVyZW5jZS5TaG9wcGluZ106IFsgLy8gQXJ0cyAmIE11c2V1bVxuICAgICAgICAnYXJ0X2dhbGxlcnknLFxuICAgICAgICAnYXJ0X3N0dWRpbycsXG4gICAgICAgICdwZXJmb3JtaW5nX2FydHNfdGhlYXRlcicsXG4gICAgICAgICdhdWRpdG9yaXVtJyxcbiAgICAgICAgJ2NvbmNlcnRfaGFsbCcsXG4gICAgICAgICdtdXNldW0nLFxuICAgICAgICAnb3BlcmFfaG91c2UnXG4gICAgXVxufTtcblxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGdldCBwbGFjZSB0eXBlcyBiYXNlZCBvbiBwcmVmZXJlbmNlc1xuZXhwb3J0IGZ1bmN0aW9uIGdldFBsYWNlVHlwZXNGcm9tUHJlZmVyZW5jZXMocHJlZmVyZW5jZXM6IFRyYXZlbFByZWZlcmVuY2VbXSk6IHN0cmluZ1tdIHtcbiAgICB0cnkge1xuICAgICAgICAvLyBUcmFjayB1c2VkIHR5cGVzIHRvIGF2b2lkIHJlcGVhdHNcbiAgICAgICAgY29uc3QgdXNlZFR5cGVzID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gICAgICAgIGNvbnN0IHJlc3VsdFR5cGVzOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgICBcbiAgICAgICAgLy8gUHJvY2VzcyBlYWNoIHByZWZlcmVuY2VcbiAgICAgICAgcHJlZmVyZW5jZXMuZm9yRWFjaChwcmVmID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGF2YWlsYWJsZVR5cGVzID0gcHJlZmVyZW5jZVRvUGxhY2VUeXBlc1twcmVmXT8uZmlsdGVyKFxuICAgICAgICAgICAgICAgIHR5cGUgPT4gIXVzZWRUeXBlcy5oYXModHlwZSlcbiAgICAgICAgICAgICkgfHwgW107XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFRha2UgMi0zIHJhbmRvbSB0eXBlcyBmcm9tIGVhY2ggcHJlZmVyZW5jZVxuICAgICAgICAgICAgY29uc3QgbnVtVHlwZXMgPSBNYXRoLm1pbihNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAyKSArIDIsIGF2YWlsYWJsZVR5cGVzLmxlbmd0aCk7XG4gICAgICAgICAgICBjb25zdCBzZWxlY3RlZFR5cGVzID0gYXZhaWxhYmxlVHlwZXNcbiAgICAgICAgICAgICAgICAuc29ydCgoKSA9PiBNYXRoLnJhbmRvbSgpIC0gMC41KVxuICAgICAgICAgICAgICAgIC5zbGljZSgwLCBudW1UeXBlcyk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBBZGQgdG8gcmVzdWx0cyBhbmQgbWFyayBhcyB1c2VkXG4gICAgICAgICAgICBzZWxlY3RlZFR5cGVzLmZvckVhY2godHlwZSA9PiB7XG4gICAgICAgICAgICAgICAgcmVzdWx0VHlwZXMucHVzaCh0eXBlKTtcbiAgICAgICAgICAgICAgICB1c2VkVHlwZXMuYWRkKHR5cGUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiByZXN1bHRUeXBlcztcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZXR0aW5nIHBsYWNlIHR5cGVzIGZyb20gcHJlZmVyZW5jZXM6JywgZXJyb3IpO1xuICAgICAgICByZXR1cm4gWyd0b3VyaXN0X2F0dHJhY3Rpb24nXTsgLy8gRGVmYXVsdCBmYWxsYmFja1xuICAgIH1cbn1cblxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGZvcm1hdCBwcmltYXJ5IHR5cGVcbmV4cG9ydCBjb25zdCBmb3JtYXRQcmltYXJ5VHlwZSA9ICh0eXBlOiBzdHJpbmcpOiBzdHJpbmcgPT4ge1xuICAgIHJldHVybiB0eXBlLnNwbGl0KCdfJylcbiAgICAgICAgLm1hcCh3b3JkID0+IHdvcmQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyB3b3JkLnNsaWNlKDEpKVxuICAgICAgICAuam9pbignICcpO1xufTtcblxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGdldCBkaXNwbGF5IG5hbWUgZm9yIHBsYWNlIHR5cGVcbmV4cG9ydCBjb25zdCBnZXREaXNwbGF5TmFtZSA9IChwbGFjZTogUGxhY2UpOiBzdHJpbmcgPT4ge1xuICAgIGlmICh0eXBlb2YgcGxhY2UuZGlzcGxheU5hbWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJldHVybiBwbGFjZS5kaXNwbGF5TmFtZTtcbiAgICB9XG4gICAgcmV0dXJuIHBsYWNlLmRpc3BsYXlOYW1lPy50ZXh0IHx8IHBsYWNlLm5hbWUgfHwgJyc7XG59O1xuXG4vLyBGdW5jdGlvbiB0byBmaWx0ZXIgb3V0IGR1cGxpY2F0ZSBwbGFjZXNcbmV4cG9ydCBmdW5jdGlvbiBmaWx0ZXJVbmlxdWVQbGFjZXMocGxhY2VzOiBQbGFjZVtdKTogUGxhY2VbXSB7XG4gICAgaWYgKCFwbGFjZXMgfHwgIUFycmF5LmlzQXJyYXkocGxhY2VzKSkgcmV0dXJuIFtdO1xuXG4gICAgLy8gR2V0IHNhdmVkIHBsYWNlcyBmcm9tIGdsb2JhbCBzdGF0ZSBpZiBhdmFpbGFibGVcbiAgICBjb25zdCBzYXZlZFBsYWNlcyA9IHNhdmVkUGxhY2VzTWFuYWdlci5nZXRQbGFjZXMoKTtcblxuICAgIGNvbnN0IHNhdmVkUGxhY2VJZHMgPSBuZXcgU2V0KHNhdmVkUGxhY2VzLm1hcChwbGFjZSA9PiBwbGFjZS5pZCkpO1xuICAgIGNvbnN0IHNhdmVkUGxhY2VOYW1lcyA9IG5ldyBTZXQoc2F2ZWRQbGFjZXMubWFwKHBsYWNlID0+IFxuICAgICAgICB0eXBlb2YgcGxhY2UuZGlzcGxheU5hbWUgPT09ICdzdHJpbmcnIFxuICAgICAgICAgICAgPyBwbGFjZS5kaXNwbGF5TmFtZS50b0xvd2VyQ2FzZSgpIFxuICAgICAgICAgICAgOiBwbGFjZS5kaXNwbGF5TmFtZS50ZXh0LnRvTG93ZXJDYXNlKClcbiAgICApKTtcblxuICAgICAvLyBGaWx0ZXIgb3V0IHBsYWNlcyB0aGF0OlxuICAgIC8vIDEuIEhhdmUgc2FtZSBJRCBhcyBzYXZlZCBwbGFjZVxuICAgIC8vIDIuIEhhdmUgc2FtZSBuYW1lIGFzIHNhdmVkIHBsYWNlXG4gICAgcmV0dXJuIHBsYWNlcy5maWx0ZXIocGxhY2UgPT4ge1xuICAgICAgICBpZiAoIXBsYWNlLmlkKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIGlmIChzYXZlZFBsYWNlSWRzLmhhcyhwbGFjZS5pZCkpIHJldHVybiBmYWxzZTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHBsYWNlTmFtZSA9IHR5cGVvZiBwbGFjZS5kaXNwbGF5TmFtZSA9PT0gJ3N0cmluZycgXG4gICAgICAgICAgICA/IHBsYWNlLmRpc3BsYXlOYW1lLnRvTG93ZXJDYXNlKClcbiAgICAgICAgICAgIDogcGxhY2UuZGlzcGxheU5hbWUudGV4dC50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgXG4gICAgICAgIGlmIChzYXZlZFBsYWNlTmFtZXMuaGFzKHBsYWNlTmFtZSkpIHJldHVybiBmYWxzZTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0pO1xufVxuXG4vLyBBZGQgU2F2ZWRQbGFjZXNNYW5hZ2VyIGludGVyZmFjZVxuZXhwb3J0IGludGVyZmFjZSBTYXZlZFBsYWNlc01hbmFnZXIge1xuICAgIHBsYWNlczogTWFwPHN0cmluZywgUGxhY2U+O1xuICAgIGFkZFBsYWNlOiAocGxhY2U6IFBsYWNlKSA9PiB2b2lkO1xuICAgIHJlbW92ZVBsYWNlOiAoaWQ6IHN0cmluZykgPT4gdm9pZDtcbiAgICBnZXRQbGFjZXM6ICgpID0+IFBsYWNlW107XG4gICAgaGFzUGxhY2U6IChpZDogc3RyaW5nKSA9PiBib29sZWFuO1xuICAgIHVwZGF0ZVBsYWNlOiAocGxhY2U6IFBsYWNlKSA9PiB2b2lkO1xuICAgIF9wZXJzaXN0OiAoKSA9PiB2b2lkO1xuICAgIF9ub3RpZnlDaGFuZ2U6ICgpID0+IHZvaWQ7XG4gICAgc2VyaWFsaXplOiAoKSA9PiBzdHJpbmc7XG59XG5cbmNvbnN0IFNUT1JBR0VfS0VZID0gJ3NhdmVkX3BsYWNlcyc7XG5cbi8vIFNhdmVkUGxhY2VzTWFuYWdlciBzaW5nbGV0b25cbmNvbnN0IGNyZWF0ZVNhdmVkUGxhY2VzTWFuYWdlciA9ICgpOiBTYXZlZFBsYWNlc01hbmFnZXIgPT4ge1xuICAgIGNvbnN0IHBsYWNlcyA9IG5ldyBNYXA8c3RyaW5nLCBQbGFjZT4oKTtcbiAgICBsZXQgaW5pdGlhbGl6ZWQgPSBmYWxzZTtcblxuICAgIC8vIExvYWQgcGxhY2VzIGZyb20gc2Vzc2lvblN0b3JhZ2VcbiAgICBjb25zdCBsb2FkRnJvbVN0b3JhZ2UgPSAoKSA9PiB7XG4gICAgICAgIGlmICghaW5pdGlhbGl6ZWQgJiYgdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIGNvbnN0IHNhdmVkUGxhY2VzID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShTVE9SQUdFX0tFWSk7XG4gICAgICAgICAgICBpZiAoc2F2ZWRQbGFjZXMpIHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW3NhdmVkUGxhY2VzTWFuYWdlcl0gUmF3IHNhdmVkIHBsYWNlczonLCBzYXZlZFBsYWNlcyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZFBsYWNlcyA9IEpTT04ucGFyc2Uoc2F2ZWRQbGFjZXMpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnW3NhdmVkUGxhY2VzTWFuYWdlcl0gUGFyc2VkIHBsYWNlczonLCBwYXJzZWRQbGFjZXMpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkocGFyc2VkUGxhY2VzKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2xlYXIgZXhpc3RpbmcgcGxhY2VzIGJlZm9yZSBsb2FkaW5nXG4gICAgICAgICAgICAgICAgICAgICAgICBwbGFjZXMuY2xlYXIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VkUGxhY2VzLmZvckVhY2gocGxhY2UgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbc2F2ZWRQbGFjZXNNYW5hZ2VyXSBQcm9jZXNzaW5nIHBsYWNlOicsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHBsYWNlLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNQaG90b3M6IEJvb2xlYW4ocGxhY2UucGhvdG9zKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGhvdG9Db3VudDogcGxhY2UucGhvdG9zPy5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcnN0UGhvdG86IHBsYWNlLnBob3Rvcz8uWzBdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBsYWNlPy5pZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZXMuc2V0KHBsYWNlLmlkLCBwbGFjZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdbc2F2ZWRQbGFjZXNNYW5hZ2VyXSBFcnJvciBsb2FkaW5nIHBsYWNlczonLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiB7XG4gICAgICAgIHBsYWNlcyxcbiAgICAgICAgYWRkUGxhY2UocGxhY2U6IFBsYWNlKSB7XG4gICAgICAgICAgICBsb2FkRnJvbVN0b3JhZ2UoKTsgLy8gRW5zdXJlIHBsYWNlcyBhcmUgbG9hZGVkXG4gICAgICAgICAgICBpZiAocGxhY2U/LmlkKSB7XG4gICAgICAgICAgICAgICAgcGxhY2VzLnNldChwbGFjZS5pZCwgcGxhY2UpO1xuICAgICAgICAgICAgICAgIHRoaXMuX3BlcnNpc3QoKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9ub3RpZnlDaGFuZ2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgcmVtb3ZlUGxhY2UoaWQ6IHN0cmluZykge1xuICAgICAgICAgICAgbG9hZEZyb21TdG9yYWdlKCk7IC8vIEVuc3VyZSBwbGFjZXMgYXJlIGxvYWRlZFxuICAgICAgICAgICAgcGxhY2VzLmRlbGV0ZShpZCk7XG4gICAgICAgICAgICB0aGlzLl9wZXJzaXN0KCk7XG4gICAgICAgICAgICB0aGlzLl9ub3RpZnlDaGFuZ2UoKTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0UGxhY2VzKCk6IFBsYWNlW10ge1xuICAgICAgICAgICAgbG9hZEZyb21TdG9yYWdlKCk7IC8vIEVuc3VyZSBwbGFjZXMgYXJlIGxvYWRlZFxuICAgICAgICAgICAgcmV0dXJuIEFycmF5LmZyb20ocGxhY2VzLnZhbHVlcygpKTtcbiAgICAgICAgfSxcbiAgICAgICAgaGFzUGxhY2UoaWQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgICAgICAgICAgbG9hZEZyb21TdG9yYWdlKCk7IC8vIEVuc3VyZSBwbGFjZXMgYXJlIGxvYWRlZFxuICAgICAgICAgICAgcmV0dXJuIHBsYWNlcy5oYXMoaWQpO1xuICAgICAgICB9LFxuICAgICAgICB1cGRhdGVQbGFjZShwbGFjZTogUGxhY2UpIHtcbiAgICAgICAgICAgIGlmIChwbGFjZS5pZCAmJiBwbGFjZXMuaGFzKHBsYWNlLmlkKSkge1xuICAgICAgICAgICAgICAgIHBsYWNlcy5zZXQocGxhY2UuaWQsIHBsYWNlKTtcbiAgICAgICAgICAgICAgICB0aGlzLl9wZXJzaXN0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5fbm90aWZ5Q2hhbmdlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIF9wZXJzaXN0KCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGxhY2VzQXJyYXkgPSBBcnJheS5mcm9tKHBsYWNlcy52YWx1ZXMoKSk7XG4gICAgICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShTVE9SQUdFX0tFWSwgSlNPTi5zdHJpbmdpZnkocGxhY2VzQXJyYXkpKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBVcGRhdGUgbWV0cmljc1xuICAgICAgICAgICAgICAgIGNvbnN0IHNlc3Npb246IFRyYXZlbFNlc3Npb24gPSBtZXRyaWNzTWFuYWdlci5nZXQoKTtcbiAgICAgICAgICAgICAgICBzZXNzaW9uLnNhdmVkUGxhY2VzQ291bnQgPSBwbGFjZXMuc2l6ZTtcbiAgICAgICAgICAgICAgICBtZXRyaWNzTWFuYWdlci51cGRhdGUoc2Vzc2lvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIF9ub3RpZnlDaGFuZ2UoKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICB3aW5kb3cuc2F2ZWRQbGFjZXMgPSBBcnJheS5mcm9tKHBsYWNlcy52YWx1ZXMoKSk7XG4gICAgICAgICAgICAgICAgaWYgKHdpbmRvdy5nZXRTYXZlZFBsYWNlcykge1xuICAgICAgICAgICAgICAgICAgICB3aW5kb3cuZ2V0U2F2ZWRQbGFjZXMoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHNlcmlhbGl6ZSgpIHtcbiAgICAgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShBcnJheS5mcm9tKHBsYWNlcy52YWx1ZXMoKSkpO1xuICAgICAgICB9XG4gICAgfTtcbn07XG5cbmV4cG9ydCBjb25zdCBzYXZlZFBsYWNlc01hbmFnZXIgPSBjcmVhdGVTYXZlZFBsYWNlc01hbmFnZXIoKTtcblxuLy8gSW5pdGlhbGl6ZSBvbiBjbGllbnQgc2lkZVxuaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgc2F2ZWRQbGFjZXNNYW5hZ2VyLnBsYWNlcyA9IG5ldyBNYXA8c3RyaW5nLCBQbGFjZT4oKTtcbn1cblxuLy8gRGVjbGFyZSB3aW5kb3cgaW50ZXJmYWNlIGZvciBzYXZlZCBwbGFjZXNcbmRlY2xhcmUgZ2xvYmFsIHtcbiAgICBpbnRlcmZhY2UgV2luZG93IHtcbiAgICAgICAgc2F2ZWRQbGFjZXM6IFBsYWNlW107XG4gICAgICAgIGFkZFBsYWNlVG9NYXA/OiAocGxhY2U6IHtcbiAgICAgICAgICAgIGxhdGl0dWRlOiBudW1iZXI7XG4gICAgICAgICAgICBsb25naXR1ZGU6IG51bWJlcjtcbiAgICAgICAgICAgIHRpdGxlPzogc3RyaW5nO1xuICAgICAgICAgICAgcGxhY2U/OiBQbGFjZTtcbiAgICAgICAgfSkgPT4gdm9pZDtcbiAgICAgICAgZ2V0U2F2ZWRQbGFjZXM/OiAoKSA9PiBQbGFjZVtdO1xuICAgIH1cbn1cblxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGhhbmRsZSBkaWZmZXJlbnQgc2VhcmNoIHN0cmF0ZWdpZXNcbmFzeW5jIGZ1bmN0aW9uIHNlYXJjaFdpdGhTdHJhdGVneShcbiAgICBzZWFyY2hUZXh0OiBzdHJpbmcsXG4gICAgbG9jYXRpb246IHsgbGF0aXR1ZGU6IG51bWJlcjsgbG9uZ2l0dWRlOiBudW1iZXIgfSxcbiAgICBjaXR5TmFtZTogc3RyaW5nLFxuICAgIHVzZUFsdGVybmF0ZVNlYXJjaDogYm9vbGVhblxuKTogUHJvbWlzZTxhbnk+IHtcbiAgICBpZiAoIXByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0dPT0dMRV9NQVBTX0FQSV9LRVkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdHb29nbGUgTWFwcyBBUEkga2V5IGlzIG1pc3NpbmcnKTtcbiAgICB9XG5cbiAgICBjb25zdCBoZWFkZXJzID0ge1xuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAnWC1Hb29nLUFwaS1LZXknOiBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19HT09HTEVfTUFQU19BUElfS0VZLFxuICAgICAgICAnWC1Hb29nLUZpZWxkTWFzayc6ICdwbGFjZXMuaWQscGxhY2VzLmRpc3BsYXlOYW1lLHBsYWNlcy5mb3JtYXR0ZWRBZGRyZXNzLHBsYWNlcy5sb2NhdGlvbixwbGFjZXMucHJpbWFyeVR5cGUscGxhY2VzLnByaW1hcnlUeXBlRGlzcGxheU5hbWUscGxhY2VzLnBob3Rvcy5uYW1lLHBsYWNlcy5waG90b3Mud2lkdGhQeCxwbGFjZXMucGhvdG9zLmhlaWdodFB4J1xuICAgIH0gYXMgY29uc3Q7XG5cbiAgICAvLyBDaG9vc2UgcXVlcnkgYmFzZWQgb24gd2hldGhlciB3ZSdyZSBkb2luZyBhbHRlcm5hdGUgc2VhcmNoXG4gICAgY29uc3QgcXVlcnkgPSB1c2VBbHRlcm5hdGVTZWFyY2ggXG4gICAgICAgID8gYGRpZmZlcmVudCAke3NlYXJjaFRleHR9IGluICR7Y2l0eU5hbWV9YFxuICAgICAgICA6IGAke3NlYXJjaFRleHR9ICR7Y2l0eU5hbWV9YDtcblxuICAgIGNvbnNvbGUubG9nKGBbc2VhcmNoV2l0aFN0cmF0ZWd5XSBVc2luZyAke3VzZUFsdGVybmF0ZVNlYXJjaCA/ICdhbHRlcm5hdGUnIDogJ29yaWdpbmFsJ30gc2VhcmNoOmAsIHF1ZXJ5KTtcbiAgICBcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0cnlTZWFyY2gocXVlcnksIGhlYWRlcnMsIGxvY2F0aW9uKTtcbiAgICByZXR1cm4gcmVzdWx0O1xufVxuXG5hc3luYyBmdW5jdGlvbiB0cnlTZWFyY2goXG4gICAgcXVlcnk6IHN0cmluZyxcbiAgICBoZWFkZXJzOiBhbnksXG4gICAgbG9jYXRpb246IHsgbGF0aXR1ZGU6IG51bWJlcjsgbG9uZ2l0dWRlOiBudW1iZXIgfVxuKTogUHJvbWlzZTxhbnk+IHtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCdodHRwczovL3BsYWNlcy5nb29nbGVhcGlzLmNvbS92MS9wbGFjZXM6c2VhcmNoVGV4dCcsIHtcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgaGVhZGVycyxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICB0ZXh0UXVlcnk6IHF1ZXJ5LFxuICAgICAgICAgICAgICAgIGxvY2F0aW9uQmlhczoge1xuICAgICAgICAgICAgICAgICAgICBjaXJjbGU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNlbnRlcjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhdGl0dWRlOiBsb2NhdGlvbi5sYXRpdHVkZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb25naXR1ZGU6IGxvY2F0aW9uLmxvbmdpdHVkZVxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJhZGl1czogMjAwMDAuMFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBtYXhSZXN1bHRDb3VudDogMVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignW3RyeVNlYXJjaF0gU2VhcmNoIGZhaWxlZDonLCB7XG4gICAgICAgICAgICAgICAgc3RhdHVzOiByZXNwb25zZS5zdGF0dXMsXG4gICAgICAgICAgICAgICAgc3RhdHVzVGV4dDogcmVzcG9uc2Uuc3RhdHVzVGV4dCxcbiAgICAgICAgICAgICAgICBxdWVyeVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgICAgIGlmICghZGF0YS5wbGFjZXM/LlswXSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1t0cnlTZWFyY2hdIE5vIHBsYWNlcyBmb3VuZCBmb3IgcXVlcnk6JywgcXVlcnkpO1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zb2xlLmxvZygnW3RyeVNlYXJjaF0gRm91bmQgbmV3IHBsYWNlOicsIHtcbiAgICAgICAgICAgIGlkOiBkYXRhLnBsYWNlc1swXS5pZCxcbiAgICAgICAgICAgIG5hbWU6IGRhdGEucGxhY2VzWzBdLmRpc3BsYXlOYW1lPy50ZXh0IHx8IGRhdGEucGxhY2VzWzBdLm5hbWVcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHsgcGxhY2VzOiBbZGF0YS5wbGFjZXNbMF1dIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignW3RyeVNlYXJjaF0gRXJyb3I6JywgZXJyb3IpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZWFyY2hQbGFjZUJ5VGV4dChcbiAgICBzZWFyY2hUZXh0OiBzdHJpbmcsXG4gICAgbG9jYXRpb246IHsgbGF0aXR1ZGU6IG51bWJlcjsgbG9uZ2l0dWRlOiBudW1iZXIgfSxcbiAgICBkZXN0aW5hdGlvbjogc3RyaW5nXG4pOiBQcm9taXNlPFBsYWNlIHwgbnVsbD4ge1xuICAgIGNvbnNvbGUubG9nKCdbc2VhcmNoUGxhY2VCeVRleHRdIFN0YXJ0aW5nIHNlYXJjaCB3aXRoOicsIHtcbiAgICAgICAgc2VhcmNoVGV4dCxcbiAgICAgICAgbG9jYXRpb24sXG4gICAgICAgIGRlc3RpbmF0aW9uXG4gICAgfSk7XG5cbiAgICB0cnkge1xuICAgICAgICBjb25zdCBjaXR5TmFtZSA9IGRlc3RpbmF0aW9uO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzZWFyY2hXaXRoU3RyYXRlZ3koc2VhcmNoVGV4dCwgbG9jYXRpb24sIGNpdHlOYW1lLCBmYWxzZSk7XG4gICAgICAgIFxuICAgICAgICBpZiAoIXJlc3VsdD8ucGxhY2VzPy5bMF0pIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcGxhY2UgPSB0cmFuc2Zvcm1QbGFjZVJlc3BvbnNlKHJlc3VsdC5wbGFjZXNbMF0pO1xuICAgICAgICBpZiAoIXBsYWNlKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENoZWNrIGlmIHBsYWNlIGlzIGFscmVhZHkgc2F2ZWQgdXNpbmcgc2F2ZWRQbGFjZXNNYW5hZ2VyXG4gICAgICAgIGNvbnN0IGlzQWxyZWFkeVNhdmVkID0gc2F2ZWRQbGFjZXNNYW5hZ2VyLmhhc1BsYWNlKHBsYWNlLmlkKTtcbiAgICAgICAgXG4gICAgICAgIGlmICghaXNBbHJlYWR5U2F2ZWQpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdbc2VhcmNoUGxhY2VCeVRleHRdIEFkZGluZyBuZXcgcGxhY2U6Jywge1xuICAgICAgICAgICAgICAgIGlkOiBwbGFjZS5pZCxcbiAgICAgICAgICAgICAgICBuYW1lOiBnZXREaXNwbGF5TmFtZShwbGFjZSlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc2F2ZWRQbGFjZXNNYW5hZ2VyLmFkZFBsYWNlKHBsYWNlKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gVXBkYXRlIG1ldHJpY3NcbiAgICAgICAgICAgIGNvbnN0IG1ldHJpY3M6IFRyYXZlbFNlc3Npb24gPSBtZXRyaWNzTWFuYWdlci5nZXQoKTtcbiAgICAgICAgICAgIG1ldHJpY3Muc2F2ZWRQbGFjZXNDb3VudCA9IHNhdmVkUGxhY2VzTWFuYWdlci5wbGFjZXMuc2l6ZTtcbiAgICAgICAgICAgIG1ldHJpY3NNYW5hZ2VyLnVwZGF0ZShtZXRyaWNzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnNvbGUubG9nKCdbc2VhcmNoUGxhY2VCeVRleHRdIEZvdW5kIHBsYWNlOicsIHtcbiAgICAgICAgICAgIGlkOiBwbGFjZS5pZCxcbiAgICAgICAgICAgIG5hbWU6IGdldERpc3BsYXlOYW1lKHBsYWNlKSxcbiAgICAgICAgICAgIGlzQWxyZWFkeVNhdmVkXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBwbGFjZTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdbc2VhcmNoUGxhY2VCeVRleHRdIEVycm9yIHNlYXJjaGluZyBmb3IgcGxhY2U6JywgZXJyb3IpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59XG5cbi8vIEluaXRpYWxpemUgbWV0cmljcyBpbiBzdG9yYWdlXG5mdW5jdGlvbiBpbml0aWFsaXplTWV0cmljcygpOiBUcmF2ZWxTZXNzaW9uIHtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHNlc3Npb25JZDogJycsXG4gICAgICAgICAgICBzdGFydFRpbWU6IERhdGUubm93KCksXG4gICAgICAgICAgICBsYXN0QWN0aXZlOiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgZXhwaXJlc0F0OiBEYXRlLm5vdygpICsgMjQgKiA2MCAqIDYwICogMTAwMCxcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uOiAnJyxcbiAgICAgICAgICAgIHN0YXJ0RGF0ZTogJycsXG4gICAgICAgICAgICBlbmREYXRlOiAnJyxcbiAgICAgICAgICAgIHByZWZlcmVuY2VzOiBbXSxcbiAgICAgICAgICAgIGJ1ZGdldDogJycsXG4gICAgICAgICAgICBsYW5ndWFnZTogJycsXG4gICAgICAgICAgICB0cmFuc3BvcnQ6IFtdLFxuICAgICAgICAgICAgc2F2ZWRQbGFjZXM6IFtdLFxuICAgICAgICAgICAgY3VycmVudFN0YWdlOiAxLFxuICAgICAgICAgICAgdG90YWxQcm9tcHRzOiAwLFxuICAgICAgICAgICAgc3RhZ2VQcm9tcHRzOiB7IDE6IDAsIDI6IDAsIDM6IDAgfSxcbiAgICAgICAgICAgIHNhdmVkUGxhY2VzQ291bnQ6IDAsXG4gICAgICAgICAgICBpc1BhaWQ6IGZhbHNlLFxuICAgICAgICAgICAgcGF5bWVudFJlZmVyZW5jZTogJydcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBjb25zdCBzZXNzaW9uID0gZ2V0U3RvcmVkU2Vzc2lvbigpO1xuICAgIGlmICghc2Vzc2lvbikge1xuICAgICAgICByZXR1cm4gaW5pdGlhbGl6ZU1ldHJpY3MoKTtcbiAgICB9XG4gICAgLy8gQWx3YXlzIGVuc3VyZSBzYXZlZFBsYWNlc0NvdW50IG1hdGNoZXMgYWN0dWFsIHNhdmVkIHBsYWNlc1xuICAgIHNlc3Npb24uc2F2ZWRQbGFjZXNDb3VudCA9IHNhdmVkUGxhY2VzTWFuYWdlci5wbGFjZXMuc2l6ZTtcbiAgICByZXR1cm4gc2Vzc2lvbjtcbn1cblxuLy8gVXBkYXRlIG1ldHJpY3MgaW4gc3RvcmFnZVxuZnVuY3Rpb24gdXBkYXRlTWV0cmljcyhzZXNzaW9uOiBUcmF2ZWxTZXNzaW9uKSB7XG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnKSByZXR1cm47XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3Qgc3RvcmVkU2Vzc2lvbiA9IGdldFN0b3JlZFNlc3Npb24oKTtcbiAgICAgICAgaWYgKCFzdG9yZWRTZXNzaW9uKSByZXR1cm47XG4gICAgICAgIFxuICAgICAgICAvLyBVcGRhdGUgb25seSBtZXRyaWNzLXJlbGF0ZWQgZmllbGRzXG4gICAgICAgIHN0b3JlZFNlc3Npb24udG90YWxQcm9tcHRzID0gc2Vzc2lvbi50b3RhbFByb21wdHM7XG4gICAgICAgIHN0b3JlZFNlc3Npb24uc3RhZ2VQcm9tcHRzID0gc2Vzc2lvbi5zdGFnZVByb21wdHM7XG4gICAgICAgIHN0b3JlZFNlc3Npb24uc2F2ZWRQbGFjZXNDb3VudCA9IHNlc3Npb24uc2F2ZWRQbGFjZXNDb3VudDtcbiAgICAgICAgXG4gICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oU0VTU0lPTl9DT05GSUcuU1RPUkFHRV9LRVksIEpTT04uc3RyaW5naWZ5KHN0b3JlZFNlc3Npb24pKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdbUGxhY2VzXSBFcnJvciB1cGRhdGluZyBtZXRyaWNzOicsIGVycm9yKTtcbiAgICB9XG59XG5cbi8vIEV4cG9ydCB0aGUgbWV0cmljcyBmdW5jdGlvbnNcbmV4cG9ydCBjb25zdCBtZXRyaWNzTWFuYWdlciA9IHtcbiAgICBnZXQ6IGluaXRpYWxpemVNZXRyaWNzLFxuICAgIHVwZGF0ZTogdXBkYXRlTWV0cmljc1xufTtcblxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIHRyYW5zZm9ybSBHb29nbGUgUGxhY2VzIEFQSSByZXNwb25zZSB0byBvdXIgUGxhY2UgdHlwZVxuZnVuY3Rpb24gdHJhbnNmb3JtUGxhY2VSZXNwb25zZShwbGFjZTogR29vZ2xlUGxhY2VSZXNwb25zZSk6IFBsYWNlIHwgbnVsbCB7XG4gICAgaWYgKCFwbGFjZSkgcmV0dXJuIG51bGw7XG5cbiAgICBjb25zb2xlLmxvZygnW3RyYW5zZm9ybVBsYWNlUmVzcG9uc2VdIElucHV0IHBsYWNlOicsIHtcbiAgICAgICAgaWQ6IHBsYWNlLmlkLFxuICAgICAgICBwaG90b3M6IHBsYWNlLnBob3Rvcz8ubWFwKHAgPT4gKHsgbmFtZTogcC5uYW1lIH0pKSxcbiAgICAgICAgcHJpbWFyeVR5cGVEaXNwbGF5TmFtZTogcGxhY2UucHJpbWFyeVR5cGVEaXNwbGF5TmFtZVxuICAgIH0pO1xuXG4gICAgY29uc3QgZGlzcGxheU5hbWUgPSBwbGFjZS5kaXNwbGF5TmFtZT8udGV4dCBcbiAgICAgICAgPyB7IHRleHQ6IHBsYWNlLmRpc3BsYXlOYW1lLnRleHQsIGxhbmd1YWdlQ29kZTogcGxhY2UuZGlzcGxheU5hbWUubGFuZ3VhZ2VDb2RlIHx8ICdlbicgfVxuICAgICAgICA6IHBsYWNlLm5hbWUgfHwgJyc7XG5cbiAgICAvLyBFbnN1cmUgcGhvdG9zIGFycmF5IGlzIHByb3Blcmx5IGZvcm1hdHRlZFxuICAgIGNvbnN0IHBob3RvcyA9IChwbGFjZS5waG90b3MgfHwgW10pXG4gICAgICAgIC5maWx0ZXIoKHBob3RvKTogcGhvdG8gaXMgTm9uTnVsbGFibGU8dHlwZW9mIHBob3RvPiA9PiBcbiAgICAgICAgICAgIEJvb2xlYW4ocGhvdG8gJiYgcGhvdG8ubmFtZSlcbiAgICAgICAgKVxuICAgICAgICAubWFwKHBob3RvID0+ICh7XG4gICAgICAgICAgICBuYW1lOiBwaG90by5uYW1lLFxuICAgICAgICAgICAgd2lkdGhQeDogcGhvdG8ud2lkdGhQeCxcbiAgICAgICAgICAgIGhlaWdodFB4OiBwaG90by5oZWlnaHRQeCxcbiAgICAgICAgICAgIGF1dGhvckF0dHJpYnV0aW9uczogcGhvdG8uYXV0aG9yQXR0cmlidXRpb25zXG4gICAgICAgIH0pKTtcblxuICAgIGNvbnN0IHRyYW5zZm9ybWVkID0ge1xuICAgICAgICBpZDogcGxhY2UuaWQsXG4gICAgICAgIG5hbWU6IHBsYWNlLm5hbWUsXG4gICAgICAgIGRpc3BsYXlOYW1lLFxuICAgICAgICBwcmltYXJ5VHlwZTogcGxhY2UucHJpbWFyeVR5cGUgfHwgJ3BsYWNlJyxcbiAgICAgICAgcGhvdG9zLFxuICAgICAgICBmb3JtYXR0ZWRBZGRyZXNzOiBwbGFjZS5mb3JtYXR0ZWRBZGRyZXNzLFxuICAgICAgICBsb2NhdGlvbjogcGxhY2UubG9jYXRpb24sXG4gICAgICAgIHByaW1hcnlUeXBlRGlzcGxheU5hbWU6IHBsYWNlLnByaW1hcnlUeXBlRGlzcGxheU5hbWUgXG4gICAgICAgICAgICA/IHsgdGV4dDogcGxhY2UucHJpbWFyeVR5cGVEaXNwbGF5TmFtZS50ZXh0LCBsYW5ndWFnZUNvZGU6IHBsYWNlLnByaW1hcnlUeXBlRGlzcGxheU5hbWUubGFuZ3VhZ2VDb2RlIHx8ICdlbicgfVxuICAgICAgICAgICAgOiB1bmRlZmluZWRcbiAgICB9O1xuXG4gICAgY29uc29sZS5sb2coJ1t0cmFuc2Zvcm1QbGFjZVJlc3BvbnNlXSBUcmFuc2Zvcm1lZCBwbGFjZTonLCB7XG4gICAgICAgIGlkOiB0cmFuc2Zvcm1lZC5pZCxcbiAgICAgICAgcGhvdG9zOiB0cmFuc2Zvcm1lZC5waG90b3MubWFwKHAgPT4gKHsgbmFtZTogcC5uYW1lIH0pKSxcbiAgICAgICAgcHJpbWFyeVR5cGVEaXNwbGF5TmFtZTogdHJhbnNmb3JtZWQucHJpbWFyeVR5cGVEaXNwbGF5TmFtZVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHRyYW5zZm9ybWVkO1xufVxuXG5leHBvcnQgY29uc3Qgc2VhcmNoTXVsdGlwbGVQbGFjZXNCeVRleHQgPSBhc3luYyAoXG4gICAgc2VhcmNoVGV4dDogc3RyaW5nLFxuICAgIGxvY2F0aW9uOiB7IGxhdGl0dWRlOiBudW1iZXI7IGxvbmdpdHVkZTogbnVtYmVyIH0sXG4gICAgbWF4UmVzdWx0czogbnVtYmVyID0gNVxuKTogUHJvbWlzZTxQbGFjZVtdPiA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKCFwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19HT09HTEVfTUFQU19BUElfS0VZKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdHb29nbGUgTWFwcyBBUEkga2V5IGlzIG1pc3NpbmcnKTtcbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnNvbGUubG9nKCdFeGVjdXRpbmcgc2VhcmNoTXVsdGlwbGVQbGFjZXNCeVRleHQgd2l0aCBwYXJhbXM6Jywge1xuICAgICAgICAgICAgc2VhcmNoVGV4dCxcbiAgICAgICAgICAgIGxvY2F0aW9uLFxuICAgICAgICAgICAgbWF4UmVzdWx0c1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCByZXF1ZXN0Qm9keSA9IHtcbiAgICAgICAgICAgIHRleHRRdWVyeTogc2VhcmNoVGV4dCxcbiAgICAgICAgICAgIGxvY2F0aW9uQmlhczoge1xuICAgICAgICAgICAgICAgIGNpcmNsZToge1xuICAgICAgICAgICAgICAgICAgICBjZW50ZXI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhdGl0dWRlOiBsb2NhdGlvbi5sYXRpdHVkZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvbmdpdHVkZTogbG9jYXRpb24ubG9uZ2l0dWRlXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHJhZGl1czogMjAwMDAuMCAvLyAyMGttIHJhZGl1c1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBtYXhSZXN1bHRDb3VudDogbWF4UmVzdWx0c1xuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IGhlYWRlcnMgPSB7XG4gICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAgICAgJ1gtR29vZy1BcGktS2V5JzogcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfR09PR0xFX01BUFNfQVBJX0tFWSxcbiAgICAgICAgICAgICdYLUdvb2ctRmllbGRNYXNrJzogJ3BsYWNlcy5pZCxwbGFjZXMuZGlzcGxheU5hbWUscGxhY2VzLmZvcm1hdHRlZEFkZHJlc3MscGxhY2VzLmxvY2F0aW9uLHBsYWNlcy5wcmltYXJ5VHlwZSxwbGFjZXMucHJpbWFyeVR5cGVEaXNwbGF5TmFtZSxwbGFjZXMucGhvdG9zLm5hbWUscGxhY2VzLnBob3Rvcy53aWR0aFB4LHBsYWNlcy5waG90b3MuaGVpZ2h0UHgnXG4gICAgICAgIH0gYXMgY29uc3Q7XG5cbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9wbGFjZXMuZ29vZ2xlYXBpcy5jb20vdjEvcGxhY2VzOnNlYXJjaFRleHQnLCB7XG4gICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgIGhlYWRlcnMsXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShyZXF1ZXN0Qm9keSlcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgY29uc3QgZXJyb3JEYXRhID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIHNlYXJjaCBwbGFjZXM6Jywge1xuICAgICAgICAgICAgICAgIHN0YXR1czogcmVzcG9uc2Uuc3RhdHVzLFxuICAgICAgICAgICAgICAgIHN0YXR1c1RleHQ6IHJlc3BvbnNlLnN0YXR1c1RleHQsXG4gICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yRGF0YVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gW107XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICBcbiAgICAgICAgaWYgKCFkYXRhLnBsYWNlcyB8fCAhQXJyYXkuaXNBcnJheShkYXRhLnBsYWNlcykgfHwgZGF0YS5wbGFjZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnTm8gcGxhY2VzIGZvdW5kIGZvciB0ZXh0IHNlYXJjaDonLCBzZWFyY2hUZXh0KTtcbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBkYXRhLnBsYWNlcy5tYXAoKHBsYWNlOiBhbnkpID0+ICh7XG4gICAgICAgICAgICBpZDogcGxhY2UuaWQsXG4gICAgICAgICAgICBkaXNwbGF5TmFtZTogcGxhY2UuZGlzcGxheU5hbWU/LnRleHQgPyB7XG4gICAgICAgICAgICAgICAgdGV4dDogcGxhY2UuZGlzcGxheU5hbWUudGV4dCxcbiAgICAgICAgICAgICAgICBsYW5ndWFnZUNvZGU6IHBsYWNlLmRpc3BsYXlOYW1lLmxhbmd1YWdlQ29kZSB8fCAnZW4nXG4gICAgICAgICAgICB9IDogcGxhY2UuZGlzcGxheU5hbWUsXG4gICAgICAgICAgICBwcmltYXJ5VHlwZTogcGxhY2UucHJpbWFyeVR5cGUgfHwgJ3BsYWNlJyxcbiAgICAgICAgICAgIHBob3RvczogcGxhY2UucGhvdG9zPy5tYXAoKHBob3RvOiBhbnkpID0+ICh7IFxuICAgICAgICAgICAgICAgIG5hbWU6IHBob3RvLm5hbWUsXG4gICAgICAgICAgICAgICAgd2lkdGhQeDogcGhvdG8ud2lkdGhQeCxcbiAgICAgICAgICAgICAgICBoZWlnaHRQeDogcGhvdG8uaGVpZ2h0UHhcbiAgICAgICAgICAgIH0pKSB8fCBbXSxcbiAgICAgICAgICAgIGZvcm1hdHRlZEFkZHJlc3M6IHBsYWNlLmZvcm1hdHRlZEFkZHJlc3MsXG4gICAgICAgICAgICBsb2NhdGlvbjogcGxhY2UubG9jYXRpb24sXG4gICAgICAgICAgICBwcmltYXJ5VHlwZURpc3BsYXlOYW1lOiBwbGFjZS5wcmltYXJ5VHlwZURpc3BsYXlOYW1lID8ge1xuICAgICAgICAgICAgICAgIHRleHQ6IHBsYWNlLnByaW1hcnlUeXBlRGlzcGxheU5hbWUudGV4dCxcbiAgICAgICAgICAgICAgICBsYW5ndWFnZUNvZGU6IHBsYWNlLnByaW1hcnlUeXBlRGlzcGxheU5hbWUubGFuZ3VhZ2VDb2RlIHx8ICdlbidcbiAgICAgICAgICAgIH0gOiB1bmRlZmluZWRcbiAgICAgICAgfSkpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNlYXJjaGluZyBmb3IgcGxhY2VzOicsIGVycm9yKTtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbn07XG5cbi8vIEZldGNoIHBsYWNlcyBmcm9tIEdvb2dsZSBQbGFjZXMgQVBJXG5leHBvcnQgY29uc3QgZmV0Y2hQbGFjZXMgPSBhc3luYyAoXG4gICAgbGF0aXR1ZGU6IG51bWJlcixcbiAgICBsb25naXR1ZGU6IG51bWJlcixcbiAgICBwcmVmZXJlbmNlcz86IFRyYXZlbFByZWZlcmVuY2VbXSxcbiAgICBtYXhSZXN1bHRzOiBudW1iZXIgPSA1LFxuICAgIHBsYWNlVHlwZXM/OiBzdHJpbmdbXVxuKTogUHJvbWlzZTxQbGFjZVtdPiA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKCFwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19HT09HTEVfTUFQU19BUElfS0VZKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdHb29nbGUgTWFwcyBBUEkga2V5IGlzIG1pc3NpbmcnKTtcbiAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGZyb21QcmVmZXJlbmNlcyA9ICEhcHJlZmVyZW5jZXMgJiYgcHJlZmVyZW5jZXMubGVuZ3RoID4gMDtcbiAgICAgICAgY29uc3QgZnJvbVBsYWNlVHlwZXMgPSAhIXBsYWNlVHlwZXMgJiYgcGxhY2VUeXBlcy5sZW5ndGggPiAwO1xuICAgICAgICBcbiAgICAgICAgaWYgKCFmcm9tUHJlZmVyZW5jZXMgJiYgIWZyb21QbGFjZVR5cGVzKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdObyBwcmVmZXJlbmNlcyBvciBwbGFjZSB0eXBlcyBwcm92aWRlZCcpO1xuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gVXNlIHByZWZlcmVuY2VzIGlmIHByb3ZpZGVkLCBvdGhlcndpc2UgdXNlIHBsYWNlVHlwZXMsIG90aGVyd2lzZSB1c2UgZGVmYXVsdHNcbiAgICAgICAgbGV0IGluY2x1ZGVkVHlwZXM6IHN0cmluZ1tdID0gW107XG4gICAgICAgIGlmIChmcm9tUHJlZmVyZW5jZXMpIHtcbiAgICAgICAgICAgIGluY2x1ZGVkVHlwZXMgPSBnZXRQbGFjZVR5cGVzRnJvbVByZWZlcmVuY2VzKHByZWZlcmVuY2VzISk7XG4gICAgICAgIH0gZWxzZSBpZiAoZnJvbVBsYWNlVHlwZXMpIHtcbiAgICAgICAgICAgIGluY2x1ZGVkVHlwZXMgPSBwbGFjZVR5cGVzITtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnNvbGUubG9nKCdFeGVjdXRpbmcgZmV0Y2hwbGFjZXMgd2l0aCBwYXJhbXM6Jywge1xuICAgICAgICAgICAgbGF0aXR1ZGUsXG4gICAgICAgICAgICBsb25naXR1ZGUsXG4gICAgICAgICAgICBpbmNsdWRlZFR5cGVzLFxuICAgICAgICAgICAgbWF4UmVzdWx0cyxcbiAgICAgICAgICAgIGZyb21QcmVmZXJlbmNlczogISFwcmVmZXJlbmNlcz8ubGVuZ3RoLFxuICAgICAgICAgICAgZnJvbVBsYWNlVHlwZXM6ICEhcGxhY2VUeXBlcz8ubGVuZ3RoXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEZpcnN0IHRyeSBuZWFyYnkgc2VhcmNoXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0Qm9keSA9IHtcbiAgICAgICAgICAgICAgICBpbmNsdWRlZFR5cGVzLFxuICAgICAgICAgICAgICAgIG1heFJlc3VsdENvdW50OiBtYXhSZXN1bHRzLFxuICAgICAgICAgICAgICAgIGxvY2F0aW9uUmVzdHJpY3Rpb246IHtcbiAgICAgICAgICAgICAgICAgICAgY2lyY2xlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjZW50ZXI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXRpdHVkZTogbGF0aXR1ZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9uZ2l0dWRlOiBsb25naXR1ZGVcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICByYWRpdXM6IDIwMDAwLjAgLy8gMjBrbSByYWRpdXNcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGNvbnN0IGhlYWRlcnMgPSB7XG4gICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICAgICAgICAnWC1Hb29nLUFwaS1LZXknOiBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19HT09HTEVfTUFQU19BUElfS0VZLFxuICAgICAgICAgICAgICAgICdYLUdvb2ctRmllbGRNYXNrJzogJ3BsYWNlcy5pZCxwbGFjZXMuZGlzcGxheU5hbWUscGxhY2VzLmZvcm1hdHRlZEFkZHJlc3MscGxhY2VzLmxvY2F0aW9uLHBsYWNlcy5wcmltYXJ5VHlwZSxwbGFjZXMucHJpbWFyeVR5cGVEaXNwbGF5TmFtZSxwbGFjZXMucGhvdG9zLm5hbWUscGxhY2VzLnBob3Rvcy53aWR0aFB4LHBsYWNlcy5waG90b3MuaGVpZ2h0UHgnXG4gICAgICAgICAgICB9IGFzIGNvbnN0O1xuXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCdodHRwczovL3BsYWNlcy5nb29nbGVhcGlzLmNvbS92MS9wbGFjZXM6c2VhcmNoTmVhcmJ5Jywge1xuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGhlYWRlcnMsXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdEJvZHkpXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5wbGFjZXMgJiYgQXJyYXkuaXNBcnJheShkYXRhLnBsYWNlcykgJiYgZGF0YS5wbGFjZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGF0YS5wbGFjZXMubWFwKChwbGFjZTogYW55KSA9PiAoe1xuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHBsYWNlLmlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheU5hbWU6IHBsYWNlLmRpc3BsYXlOYW1lPy50ZXh0ID8ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IHBsYWNlLmRpc3BsYXlOYW1lLnRleHQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFuZ3VhZ2VDb2RlOiBwbGFjZS5kaXNwbGF5TmFtZS5sYW5ndWFnZUNvZGUgfHwgJ2VuJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfSA6IHBsYWNlLmRpc3BsYXlOYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJpbWFyeVR5cGU6IHBsYWNlLnByaW1hcnlUeXBlIHx8ICdwbGFjZScsXG4gICAgICAgICAgICAgICAgICAgICAgICBwaG90b3M6IHBsYWNlLnBob3Rvcz8ubWFwKChwaG90bzogYW55KSA9PiAoeyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBwaG90by5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoUHg6IHBob3RvLndpZHRoUHgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0UHg6IHBob3RvLmhlaWdodFB4XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSkgfHwgW10sXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JtYXR0ZWRBZGRyZXNzOiBwbGFjZS5mb3JtYXR0ZWRBZGRyZXNzLFxuICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb246IHBsYWNlLmxvY2F0aW9uLFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJpbWFyeVR5cGVEaXNwbGF5TmFtZTogcGxhY2UucHJpbWFyeVR5cGVEaXNwbGF5TmFtZSA/IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBwbGFjZS5wcmltYXJ5VHlwZURpc3BsYXlOYW1lLnRleHQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFuZ3VhZ2VDb2RlOiBwbGFjZS5wcmltYXJ5VHlwZURpc3BsYXlOYW1lLmxhbmd1YWdlQ29kZSB8fCAnZW4nXG4gICAgICAgICAgICAgICAgICAgICAgICB9IDogdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGVycm9yRGF0YSA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBmZXRjaCBwbGFjZXM6Jywge1xuICAgICAgICAgICAgICAgIHN0YXR1czogcmVzcG9uc2Uuc3RhdHVzLFxuICAgICAgICAgICAgICAgIHN0YXR1c1RleHQ6IHJlc3BvbnNlLnN0YXR1c1RleHQsXG4gICAgICAgICAgICAgICAgZXJyb3I6IGVycm9yRGF0YVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBuZWFyYnkgc2VhcmNoOicsIGVycm9yKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIElmIG5lYXJieSBzZWFyY2ggZmFpbHMsIHRyeSB0ZXh0IHNlYXJjaCBhcyBmYWxsYmFja1xuICAgICAgICBjb25zb2xlLmxvZygnRmFsbGluZyBiYWNrIHRvIHRleHQgc2VhcmNoLi4uJyk7XG4gICAgICAgIGNvbnN0IHNlYXJjaFF1ZXJ5ID0gZnJvbVBsYWNlVHlwZXMgPyBwbGFjZVR5cGVzIVswXSA6IHByZWZlcmVuY2VzIVswXTtcbiAgICAgICAgcmV0dXJuIGF3YWl0IHNlYXJjaE11bHRpcGxlUGxhY2VzQnlUZXh0KHNlYXJjaFF1ZXJ5LCB7IGxhdGl0dWRlLCBsb25naXR1ZGUgfSwgbWF4UmVzdWx0cyk7XG5cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBwbGFjZXM6JywgZXJyb3IpO1xuICAgICAgICByZXR1cm4gW107XG4gICAgfVxufTsiXSwibmFtZXMiOlsiVHJhdmVsUHJlZmVyZW5jZSIsImdldFN0b3JlZFNlc3Npb24iLCJTRVNTSU9OX0NPTkZJRyIsInByZWZlcmVuY2VUb1BsYWNlVHlwZXMiLCJDdWx0dXJlIiwiTmF0dXJlIiwiRm9vZCIsIlJlbGF4YXRpb24iLCJBZHZlbnR1cmUiLCJTaG9wcGluZyIsImdldFBsYWNlVHlwZXNGcm9tUHJlZmVyZW5jZXMiLCJwcmVmZXJlbmNlcyIsInVzZWRUeXBlcyIsIlNldCIsInJlc3VsdFR5cGVzIiwiZm9yRWFjaCIsInByZWYiLCJhdmFpbGFibGVUeXBlcyIsImZpbHRlciIsInR5cGUiLCJoYXMiLCJudW1UeXBlcyIsIk1hdGgiLCJtaW4iLCJmbG9vciIsInJhbmRvbSIsImxlbmd0aCIsInNlbGVjdGVkVHlwZXMiLCJzb3J0Iiwic2xpY2UiLCJwdXNoIiwiYWRkIiwiZXJyb3IiLCJjb25zb2xlIiwiZm9ybWF0UHJpbWFyeVR5cGUiLCJzcGxpdCIsIm1hcCIsIndvcmQiLCJjaGFyQXQiLCJ0b1VwcGVyQ2FzZSIsImpvaW4iLCJnZXREaXNwbGF5TmFtZSIsInBsYWNlIiwiZGlzcGxheU5hbWUiLCJ0ZXh0IiwibmFtZSIsImZpbHRlclVuaXF1ZVBsYWNlcyIsInBsYWNlcyIsIkFycmF5IiwiaXNBcnJheSIsInNhdmVkUGxhY2VzIiwic2F2ZWRQbGFjZXNNYW5hZ2VyIiwiZ2V0UGxhY2VzIiwic2F2ZWRQbGFjZUlkcyIsImlkIiwic2F2ZWRQbGFjZU5hbWVzIiwidG9Mb3dlckNhc2UiLCJwbGFjZU5hbWUiLCJTVE9SQUdFX0tFWSIsImNyZWF0ZVNhdmVkUGxhY2VzTWFuYWdlciIsIk1hcCIsImluaXRpYWxpemVkIiwibG9hZEZyb21TdG9yYWdlIiwic2Vzc2lvblN0b3JhZ2UiLCJnZXRJdGVtIiwibG9nIiwicGFyc2VkUGxhY2VzIiwiSlNPTiIsInBhcnNlIiwiY2xlYXIiLCJoYXNQaG90b3MiLCJCb29sZWFuIiwicGhvdG9zIiwicGhvdG9Db3VudCIsImZpcnN0UGhvdG8iLCJzZXQiLCJhZGRQbGFjZSIsIl9wZXJzaXN0IiwiX25vdGlmeUNoYW5nZSIsInJlbW92ZVBsYWNlIiwiZGVsZXRlIiwiZnJvbSIsInZhbHVlcyIsImhhc1BsYWNlIiwidXBkYXRlUGxhY2UiLCJwbGFjZXNBcnJheSIsInNldEl0ZW0iLCJzdHJpbmdpZnkiLCJzZXNzaW9uIiwibWV0cmljc01hbmFnZXIiLCJnZXQiLCJzYXZlZFBsYWNlc0NvdW50Iiwic2l6ZSIsInVwZGF0ZSIsIndpbmRvdyIsImdldFNhdmVkUGxhY2VzIiwic2VyaWFsaXplIiwic2VhcmNoV2l0aFN0cmF0ZWd5Iiwic2VhcmNoVGV4dCIsImxvY2F0aW9uIiwiY2l0eU5hbWUiLCJ1c2VBbHRlcm5hdGVTZWFyY2giLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfR09PR0xFX01BUFNfQVBJX0tFWSIsIkVycm9yIiwiaGVhZGVycyIsInF1ZXJ5IiwicmVzdWx0IiwidHJ5U2VhcmNoIiwicmVzcG9uc2UiLCJmZXRjaCIsIm1ldGhvZCIsImJvZHkiLCJ0ZXh0UXVlcnkiLCJsb2NhdGlvbkJpYXMiLCJjaXJjbGUiLCJjZW50ZXIiLCJsYXRpdHVkZSIsImxvbmdpdHVkZSIsInJhZGl1cyIsIm1heFJlc3VsdENvdW50Iiwib2siLCJzdGF0dXMiLCJzdGF0dXNUZXh0IiwiZGF0YSIsImpzb24iLCJzZWFyY2hQbGFjZUJ5VGV4dCIsImRlc3RpbmF0aW9uIiwidHJhbnNmb3JtUGxhY2VSZXNwb25zZSIsImlzQWxyZWFkeVNhdmVkIiwibWV0cmljcyIsImluaXRpYWxpemVNZXRyaWNzIiwic2Vzc2lvbklkIiwic3RhcnRUaW1lIiwiRGF0ZSIsIm5vdyIsImxhc3RBY3RpdmUiLCJleHBpcmVzQXQiLCJzdGFydERhdGUiLCJlbmREYXRlIiwiYnVkZ2V0IiwibGFuZ3VhZ2UiLCJ0cmFuc3BvcnQiLCJjdXJyZW50U3RhZ2UiLCJ0b3RhbFByb21wdHMiLCJzdGFnZVByb21wdHMiLCJpc1BhaWQiLCJwYXltZW50UmVmZXJlbmNlIiwidXBkYXRlTWV0cmljcyIsInN0b3JlZFNlc3Npb24iLCJwIiwicHJpbWFyeVR5cGVEaXNwbGF5TmFtZSIsImxhbmd1YWdlQ29kZSIsInBob3RvIiwid2lkdGhQeCIsImhlaWdodFB4IiwiYXV0aG9yQXR0cmlidXRpb25zIiwidHJhbnNmb3JtZWQiLCJwcmltYXJ5VHlwZSIsImZvcm1hdHRlZEFkZHJlc3MiLCJ1bmRlZmluZWQiLCJzZWFyY2hNdWx0aXBsZVBsYWNlc0J5VGV4dCIsIm1heFJlc3VsdHMiLCJyZXF1ZXN0Qm9keSIsImVycm9yRGF0YSIsImZldGNoUGxhY2VzIiwicGxhY2VUeXBlcyIsImZyb21QcmVmZXJlbmNlcyIsImZyb21QbGFjZVR5cGVzIiwiaW5jbHVkZWRUeXBlcyIsImxvY2F0aW9uUmVzdHJpY3Rpb24iLCJzZWFyY2hRdWVyeSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./utils/places-utils.ts\n");

/***/ })

};
;