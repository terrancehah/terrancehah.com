"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("pages/api/chat",{

/***/ "(middleware)/./ai/tools.ts":
/*!*********************!*\
  !*** ./ai/tools.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   budgetSelectorTool: () => (/* binding */ budgetSelectorTool),\n/* harmony export */   carouselTool: () => (/* binding */ carouselTool),\n/* harmony export */   currencyConverterTool: () => (/* binding */ currencyConverterTool),\n/* harmony export */   datePickerTool: () => (/* binding */ datePickerTool),\n/* harmony export */   detailsCardTool: () => (/* binding */ detailsCardTool),\n/* harmony export */   languageSelectorTool: () => (/* binding */ languageSelectorTool),\n/* harmony export */   placeCardTool: () => (/* binding */ placeCardTool),\n/* harmony export */   preferenceSelectorTool: () => (/* binding */ preferenceSelectorTool),\n/* harmony export */   quickResponseTool: () => (/* binding */ quickResponseTool),\n/* harmony export */   savedPlacesListTool: () => (/* binding */ savedPlacesListTool),\n/* harmony export */   stageProgressTool: () => (/* binding */ stageProgressTool),\n/* harmony export */   tools: () => (/* binding */ tools),\n/* harmony export */   transportSelectorTool: () => (/* binding */ transportSelectorTool),\n/* harmony export */   weatherChartTool: () => (/* binding */ weatherChartTool)\n/* harmony export */ });\n/* harmony import */ var ai__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ai */ \"(middleware)/./node_modules/ai/dist/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! zod */ \"(middleware)/./node_modules/zod/lib/index.mjs\");\n/* harmony import */ var _managers_types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../managers/types */ \"(middleware)/./managers/types.ts\");\n/* harmony import */ var _utils_places_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/places-utils */ \"(middleware)/./utils/places-utils.ts\");\n/* harmony import */ var _managers_stage_manager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../managers/stage-manager */ \"(middleware)/./managers/stage-manager.ts\");\n/* harmony import */ var _utils_currency_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/currency-utils */ \"(middleware)/./utils/currency-utils.ts\");\n\n\n\n\n\n\n// Tool for Budget Selection\nconst budgetSelectorTool = (0,ai__WEBPACK_IMPORTED_MODULE_4__.tool)({\n    description: \"Display budget level options for the trip. Use this when discussing trip costs or when the user wants to set their budget preference.\",\n    parameters: zod__WEBPACK_IMPORTED_MODULE_5__.z.object({\n        currentBudget: zod__WEBPACK_IMPORTED_MODULE_5__.z.enum([\n            \"$\",\n            \"$$\",\n            \"$$$\",\n            \"$$$$\"\n        ]).optional()\n    }),\n    execute: async function({ currentBudget }) {\n        return {\n            type: \"budgetSelector\",\n            props: {\n                currentBudget: currentBudget\n            }\n        };\n    }\n});\n// Tool for Travel Preferences\nconst preferenceSelectorTool = (0,ai__WEBPACK_IMPORTED_MODULE_4__.tool)({\n    description: \"Display options for selecting travel preferences and interests.\",\n    parameters: zod__WEBPACK_IMPORTED_MODULE_5__.z.object({\n        currentPreferences: zod__WEBPACK_IMPORTED_MODULE_5__.z.array(zod__WEBPACK_IMPORTED_MODULE_5__.z.nativeEnum(_managers_types__WEBPACK_IMPORTED_MODULE_0__.TravelPreference)).optional()\n    }),\n    execute: async function({ currentPreferences }) {\n        return {\n            type: \"preferenceSelector\",\n            props: {\n                currentPreferences: currentPreferences\n            }\n        };\n    }\n});\n// Tool for Date Selection\nconst datePickerTool = (0,ai__WEBPACK_IMPORTED_MODULE_4__.tool)({\n    description: \"Display a date picker for selecting travel dates. Only provide dates in the parameters if you want to confirm a change. Otherwise, call without parameters to just show the picker.\",\n    parameters: zod__WEBPACK_IMPORTED_MODULE_5__.z.object({\n        startDate: zod__WEBPACK_IMPORTED_MODULE_5__.z.string().optional(),\n        endDate: zod__WEBPACK_IMPORTED_MODULE_5__.z.string().optional()\n    }),\n    execute: async function({ startDate, endDate }) {\n        return {\n            type: \"datePicker\",\n            props: {\n                startDate,\n                endDate\n            }\n        };\n    }\n});\n// Tool for Language Selection\nconst languageSelectorTool = (0,ai__WEBPACK_IMPORTED_MODULE_4__.tool)({\n    description: \"Display language selection options.\",\n    parameters: zod__WEBPACK_IMPORTED_MODULE_5__.z.object({\n        currentLanguage: zod__WEBPACK_IMPORTED_MODULE_5__.z.string().optional()\n    }),\n    execute: async function({ currentLanguage }) {\n        return {\n            type: \"languageSelector\",\n            props: {\n                currentLanguage: currentLanguage\n            }\n        };\n    }\n});\n// Tool for Transport Selection\nconst transportSelectorTool = (0,ai__WEBPACK_IMPORTED_MODULE_4__.tool)({\n    description: \"Display transport method selection options. Use this when discussing transportation options for the trip, such as flights, trains, or car rentals.\",\n    parameters: zod__WEBPACK_IMPORTED_MODULE_5__.z.object({\n        selectedMethod: zod__WEBPACK_IMPORTED_MODULE_5__.z.string().optional()\n    }),\n    execute: async function({ selectedMethod }) {\n        return {\n            type: \"transportSelector\",\n            props: {\n                selectedMethod\n            }\n        };\n    }\n});\n// Tool for Place Display\nconst placeCardTool = (0,ai__WEBPACK_IMPORTED_MODULE_4__.tool)({\n    description: 'Display information about one specific place. Use this whenever the user explicitly asks for ONE place, whether by name or type (e.g., \"show me one theatre\", \"show me one restaurant\", \"show me The Little Mermaid statue\").',\n    parameters: zod__WEBPACK_IMPORTED_MODULE_5__.z.object({\n        searchText: zod__WEBPACK_IMPORTED_MODULE_5__.z.string().describe(\"The name or description of the place to search for\"),\n        location: zod__WEBPACK_IMPORTED_MODULE_5__.z.object({\n            latitude: zod__WEBPACK_IMPORTED_MODULE_5__.z.number(),\n            longitude: zod__WEBPACK_IMPORTED_MODULE_5__.z.number()\n        }),\n        destination: zod__WEBPACK_IMPORTED_MODULE_5__.z.string().describe(\"Name of the destination city\")\n    }),\n    execute: async function({ searchText, location, destination }) {\n        try {\n            const place = await (0,_utils_places_utils__WEBPACK_IMPORTED_MODULE_1__.searchPlaceByText)(searchText, location, destination);\n            if (!place) {\n                console.error(\"No place found for search text:\", searchText);\n                return {\n                    type: \"placeCard\",\n                    props: {\n                        place: null\n                    },\n                    error: \"Could not find a unique place. Try searching for something else.\"\n                };\n            }\n            return {\n                type: \"placeCard\",\n                props: {\n                    place\n                }\n            };\n        } catch (error) {\n            console.error(\"Error searching for place:\", error);\n            return {\n                type: \"placeCard\",\n                props: {\n                    place: null\n                }\n            };\n        }\n    }\n});\n// Tool for Place Carousel\nconst carouselTool = (0,ai__WEBPACK_IMPORTED_MODULE_4__.tool)({\n    description: \"Display multiple places in a carousel based on preferences or specific place types and automatically save them into savedPlaces.\",\n    parameters: zod__WEBPACK_IMPORTED_MODULE_5__.z.object({\n        preferences: zod__WEBPACK_IMPORTED_MODULE_5__.z.array(zod__WEBPACK_IMPORTED_MODULE_5__.z.nativeEnum(_managers_types__WEBPACK_IMPORTED_MODULE_0__.TravelPreference)).optional(),\n        placeType: zod__WEBPACK_IMPORTED_MODULE_5__.z.string().optional().describe(\"Specific place type to search for\"),\n        location: zod__WEBPACK_IMPORTED_MODULE_5__.z.object({\n            latitude: zod__WEBPACK_IMPORTED_MODULE_5__.z.number(),\n            longitude: zod__WEBPACK_IMPORTED_MODULE_5__.z.number()\n        }),\n        maxResults: zod__WEBPACK_IMPORTED_MODULE_5__.z.number().optional().default(5)\n    }),\n    execute: async function({ preferences, placeType, location, maxResults }) {\n        try {\n            let places = [];\n            if (preferences && preferences.length > 0) {\n                // Use our existing function to get places by preference\n                places = await (0,_utils_places_utils__WEBPACK_IMPORTED_MODULE_1__.fetchPlaces)(location.latitude, location.longitude, preferences, maxResults);\n            } else if (placeType) {\n                // Search by specific place type\n                places = await (0,_utils_places_utils__WEBPACK_IMPORTED_MODULE_1__.fetchPlaces)(location.latitude, location.longitude, undefined, maxResults, [\n                    placeType\n                ]);\n            }\n            return {\n                type: \"carousel\",\n                props: {\n                    places\n                }\n            };\n        } catch (error) {\n            console.error(\"Error in carousel tool:\", error);\n            return {\n                type: \"carousel\",\n                props: {\n                    places: []\n                }\n            };\n        }\n    }\n});\n// Tool for Details Card\nconst detailsCardTool = (0,ai__WEBPACK_IMPORTED_MODULE_4__.tool)({\n    description: \"Display travel details summary. Use this when the user wants to view a summary of their trip details, including destination, dates, preferences, budget, and more.\",\n    parameters: zod__WEBPACK_IMPORTED_MODULE_5__.z.object({\n        content: zod__WEBPACK_IMPORTED_MODULE_5__.z.object({\n            destination: zod__WEBPACK_IMPORTED_MODULE_5__.z.string(),\n            dates: zod__WEBPACK_IMPORTED_MODULE_5__.z.object({\n                startDate: zod__WEBPACK_IMPORTED_MODULE_5__.z.string(),\n                endDate: zod__WEBPACK_IMPORTED_MODULE_5__.z.string()\n            }).optional(),\n            preferences: zod__WEBPACK_IMPORTED_MODULE_5__.z.array(zod__WEBPACK_IMPORTED_MODULE_5__.z.string()).optional(),\n            budget: zod__WEBPACK_IMPORTED_MODULE_5__.z.string().optional(),\n            language: zod__WEBPACK_IMPORTED_MODULE_5__.z.string().optional(),\n            transport: zod__WEBPACK_IMPORTED_MODULE_5__.z.array(zod__WEBPACK_IMPORTED_MODULE_5__.z.string()).optional(),\n            dining: zod__WEBPACK_IMPORTED_MODULE_5__.z.array(zod__WEBPACK_IMPORTED_MODULE_5__.z.string()).optional()\n        })\n    }),\n    execute: async function({ content }) {\n        return {\n            type: \"detailsCard\",\n            props: {\n                content\n            }\n        };\n    }\n});\nconst weatherChartTool = (0,ai__WEBPACK_IMPORTED_MODULE_4__.tool)({\n    description: \"Display historical weather data including temperature and precipitation for a location.\",\n    parameters: zod__WEBPACK_IMPORTED_MODULE_5__.z.object({\n        lat: zod__WEBPACK_IMPORTED_MODULE_5__.z.number().min(-90).max(90).describe(\"Latitude of the location\"),\n        lon: zod__WEBPACK_IMPORTED_MODULE_5__.z.number().min(-180).max(180).describe(\"Longitude of the location\"),\n        city: zod__WEBPACK_IMPORTED_MODULE_5__.z.string().describe(\"City name for display\"),\n        startDate: zod__WEBPACK_IMPORTED_MODULE_5__.z.string().describe(\"Trip start date in DD/MM/YYYY format\"),\n        endDate: zod__WEBPACK_IMPORTED_MODULE_5__.z.string().describe(\"Trip end date in DD/MM/YYYY format\"),\n        units: zod__WEBPACK_IMPORTED_MODULE_5__.z.enum([\n            \"us\",\n            \"uk\",\n            \"metric\"\n        ]).optional().default(\"metric\")\n    }),\n    execute: async function({ lat, lon, city, startDate, endDate, units = \"metric\" }) {\n        // Parse DD/MM/YYYY dates\n        const [startDay, startMonth, startYear] = startDate.split(\"/\").map(Number);\n        const [endDay, endMonth, endYear] = endDate.split(\"/\").map(Number);\n        // Format dates for API (YYYY-MM-DD)\n        const formattedStartDate = `${startYear}-${String(startMonth).padStart(2, \"0\")}-${String(startDay).padStart(2, \"0\")}`;\n        const formattedEndDate = `${endYear}-${String(endMonth).padStart(2, \"0\")}-${String(endDay).padStart(2, \"0\")}`;\n        // Calculate number of days in the range\n        const start = new Date(formattedStartDate);\n        const end = new Date(formattedEndDate);\n        const daysDiff = Math.ceil((end.getTime() - start.getTime()) / (1000 * 60 * 60 * 24)) + 1;\n        // Calculate how many extra days we need for 30 days total\n        const extraDays = Math.max(0, 30 - daysDiff);\n        const daysToAddBefore = Math.floor(extraDays / 2);\n        const daysToAddAfter = extraDays - daysToAddBefore;\n        // Extend dates to get 30 days\n        start.setDate(start.getDate() - daysToAddBefore);\n        end.setDate(end.getDate() + daysToAddAfter);\n        // Format extended dates for API\n        const extendedStartDate = start.toISOString().split(\"T\")[0];\n        const extendedEndDate = end.toISOString().split(\"T\")[0];\n        console.log(\"[weatherChartTool] Date conversion:\", {\n            originalDate: startDate,\n            originalEndDate: endDate,\n            formattedStartDate: extendedStartDate,\n            formattedEndDate: extendedEndDate,\n            totalDays: 30,\n            originalRange: daysDiff,\n            addedBefore: daysToAddBefore,\n            addedAfter: daysToAddAfter\n        });\n        return {\n            type: \"weatherChart\",\n            props: {\n                lat,\n                lon,\n                city,\n                startDate: extendedStartDate,\n                endDate: extendedEndDate,\n                units\n            }\n        };\n    }\n});\nconst savedPlacesListTool = (0,ai__WEBPACK_IMPORTED_MODULE_4__.tool)({\n    description: 'Display all currently saved places in a list view. When user asks to see saved places (e.g. \"show me my saved places\", \"what places have I saved\", etc), pass ALL places from the savedPlaces parameter to this tool.',\n    parameters: zod__WEBPACK_IMPORTED_MODULE_5__.z.object({\n        savedPlaces: zod__WEBPACK_IMPORTED_MODULE_5__.z.array(zod__WEBPACK_IMPORTED_MODULE_5__.z.object({\n            id: zod__WEBPACK_IMPORTED_MODULE_5__.z.string(),\n            displayName: zod__WEBPACK_IMPORTED_MODULE_5__.z.union([\n                zod__WEBPACK_IMPORTED_MODULE_5__.z.object({\n                    text: zod__WEBPACK_IMPORTED_MODULE_5__.z.string(),\n                    languageCode: zod__WEBPACK_IMPORTED_MODULE_5__.z.string()\n                }),\n                zod__WEBPACK_IMPORTED_MODULE_5__.z.string()\n            ]).optional(),\n            primaryType: zod__WEBPACK_IMPORTED_MODULE_5__.z.string().optional(),\n            location: zod__WEBPACK_IMPORTED_MODULE_5__.z.object({\n                latitude: zod__WEBPACK_IMPORTED_MODULE_5__.z.number(),\n                longitude: zod__WEBPACK_IMPORTED_MODULE_5__.z.number()\n            }).optional(),\n            formattedAddress: zod__WEBPACK_IMPORTED_MODULE_5__.z.string().optional(),\n            photos: zod__WEBPACK_IMPORTED_MODULE_5__.z.array(zod__WEBPACK_IMPORTED_MODULE_5__.z.object({\n                name: zod__WEBPACK_IMPORTED_MODULE_5__.z.string(),\n                widthPx: zod__WEBPACK_IMPORTED_MODULE_5__.z.number().optional(),\n                heightPx: zod__WEBPACK_IMPORTED_MODULE_5__.z.number().optional(),\n                authorAttributions: zod__WEBPACK_IMPORTED_MODULE_5__.z.array(zod__WEBPACK_IMPORTED_MODULE_5__.z.object({\n                    displayName: zod__WEBPACK_IMPORTED_MODULE_5__.z.string().optional(),\n                    uri: zod__WEBPACK_IMPORTED_MODULE_5__.z.string().optional(),\n                    photoUri: zod__WEBPACK_IMPORTED_MODULE_5__.z.string().optional()\n                })).optional() // Make optional\n            })).optional().default([]),\n            primaryTypeDisplayName: zod__WEBPACK_IMPORTED_MODULE_5__.z.object({\n                text: zod__WEBPACK_IMPORTED_MODULE_5__.z.string(),\n                languageCode: zod__WEBPACK_IMPORTED_MODULE_5__.z.string()\n            }).optional() // Already optional\n        }))\n    }),\n    execute: async function({ savedPlaces }) {\n        console.log(\"[savedPlacesListTool] Executing with places:\", savedPlaces?.map((p)=>({\n                id: p.id,\n                hasPhotos: Boolean(p.photos?.length),\n                photoCount: p.photos?.length,\n                firstPhoto: p.photos?.[0],\n                primaryTypeDisplayName: p.primaryTypeDisplayName\n            })));\n        // Ensure we're passing the full array of places\n        if (!Array.isArray(savedPlaces)) {\n            console.error(\"[savedPlacesListTool] savedPlaces is not an array:\", savedPlaces);\n            return {\n                type: \"savedPlacesList\",\n                props: {\n                    places: []\n                }\n            };\n        }\n        // Make sure we pass the complete place objects\n        return {\n            type: \"savedPlacesList\",\n            props: {\n                places: savedPlaces.map((place)=>({\n                        ...place,\n                        photos: place.photos || [],\n                        primaryTypeDisplayName: place.primaryTypeDisplayName || {\n                            text: \"\",\n                            languageCode: \"en\"\n                        }\n                    })),\n                onRemove: undefined // Make it explicit that we're not handling removal here\n            }\n        };\n    }\n});\n// Simplify the stage progress tool to only include nextStage\nconst stageProgressTool = (0,ai__WEBPACK_IMPORTED_MODULE_4__.tool)({\n    description: \"Update the current planning stage only when certain criteria are met.\",\n    parameters: zod__WEBPACK_IMPORTED_MODULE_5__.z.object({\n        nextStage: zod__WEBPACK_IMPORTED_MODULE_5__.z.number().min(1).max(5),\n        currentStage: zod__WEBPACK_IMPORTED_MODULE_5__.z.number().min(1).max(5),\n        travelDetails: zod__WEBPACK_IMPORTED_MODULE_5__.z.object({\n            destination: zod__WEBPACK_IMPORTED_MODULE_5__.z.string(),\n            location: zod__WEBPACK_IMPORTED_MODULE_5__.z.object({\n                latitude: zod__WEBPACK_IMPORTED_MODULE_5__.z.number(),\n                longitude: zod__WEBPACK_IMPORTED_MODULE_5__.z.number()\n            }),\n            startDate: zod__WEBPACK_IMPORTED_MODULE_5__.z.string(),\n            endDate: zod__WEBPACK_IMPORTED_MODULE_5__.z.string(),\n            preferences: zod__WEBPACK_IMPORTED_MODULE_5__.z.array(zod__WEBPACK_IMPORTED_MODULE_5__.z.string()),\n            budget: zod__WEBPACK_IMPORTED_MODULE_5__.z.string(),\n            language: zod__WEBPACK_IMPORTED_MODULE_5__.z.string(),\n            transport: zod__WEBPACK_IMPORTED_MODULE_5__.z.array(zod__WEBPACK_IMPORTED_MODULE_5__.z.string())\n        }),\n        metrics: zod__WEBPACK_IMPORTED_MODULE_5__.z.object({\n            totalPrompts: zod__WEBPACK_IMPORTED_MODULE_5__.z.number(),\n            savedPlacesCount: zod__WEBPACK_IMPORTED_MODULE_5__.z.number(),\n            isPaid: zod__WEBPACK_IMPORTED_MODULE_5__.z.boolean(),\n            paymentReference: zod__WEBPACK_IMPORTED_MODULE_5__.z.string()\n        })\n    }),\n    execute: async function({ nextStage, currentStage, travelDetails, metrics }) {\n        // console.log('[StageProgressTool] Executing:', { nextStage, currentStage, metrics });\n        const validationResult = (0,_managers_stage_manager__WEBPACK_IMPORTED_MODULE_2__.validateStageProgression)(currentStage, nextStage, travelDetails);\n        if (!validationResult.canProgress) {\n            console.log(\"[StageProgressTool] Validation failed:\", validationResult.missingRequirements);\n            return {\n                type: \"stageProgress\",\n                status: \"error\",\n                props: {\n                    nextStage: currentStage,\n                    error: `Cannot progress to stage ${nextStage}. Missing requirements: ${validationResult.missingRequirements.join(\", \")}`\n                }\n            };\n        }\n        return {\n            type: \"stageProgress\",\n            status: \"success\",\n            props: {\n                nextStage\n            }\n        };\n    }\n});\n// Tool for Quick Response\nconst quickResponseTool = (0,ai__WEBPACK_IMPORTED_MODULE_4__.tool)({\n    description: `Present users with exactly 3 contextually relevant quick response options.\n    \n    CRITICAL RULES:\n    1. YOU MUST ALWAYS RETURN EXACTLY 3 OPTIONS - NO EXCEPTIONS\n    2. Keep options concise and action-oriented\n    3. Options must make sense as natural chat responses\n    4. Each option should be 2-6 words\n    \n    Stage-specific guidelines:\n    Stage 1: Focus on parameter updates (e.g., \\\"Update my travel dates\\\", \\\"Change my budget\\\")\n    Stage 2: Focus on city info (e.g., \\\"Check the weather\\\", \\\"See currency rates\\\")\n    Stage 3: Focus on places (e.g., \\\"Show me museums\\\", \\\"Find restaurants\\\")\n    Stage 4: Focus on itinerary (e.g., \\\"Add more activities\\\", \\\"Review the plan\\\")\n    Stage 5: Focus on completion (e.g., \\\"Download itinerary\\\", \\\"Share with friends\\\")`,\n    parameters: zod__WEBPACK_IMPORTED_MODULE_5__.z.object({\n        responses: zod__WEBPACK_IMPORTED_MODULE_5__.z.array(zod__WEBPACK_IMPORTED_MODULE_5__.z.string()).length(3).describe(\"Exactly 3 quick response options\")\n    }),\n    execute: async function({ responses }) {\n        // console.log('[QuickResponse Tool] Executing with responses:', responses);\n        if (!Array.isArray(responses) || responses.length !== 3) {\n            console.error(\"[QuickResponse Tool] Invalid responses:\", responses);\n            throw new Error(\"Must provide exactly 3 responses\");\n        }\n        // Validate each response\n        responses.forEach((response, index)=>{\n            if (!response || typeof response !== \"string\" || response.trim().length === 0) {\n                throw new Error(`Invalid response at index ${index}`);\n            }\n        });\n        console.log(\"[QuickResponse Tool] Returning valid responses\");\n        return {\n            type: \"quickResponse\",\n            props: {\n                responses\n            }\n        };\n    }\n});\n// Tool for Currency Conversion\nconst currencyConverterTool = (0,ai__WEBPACK_IMPORTED_MODULE_4__.tool)({\n    description: \"Display currency conversion rates for the destination country. Use this when discussing costs, budgets, or when the user wants to understand currency exchange rates.\",\n    parameters: zod__WEBPACK_IMPORTED_MODULE_5__.z.object({\n        amount: zod__WEBPACK_IMPORTED_MODULE_5__.z.number().optional().describe(\"Amount to convert in the destination currency\"),\n        destination: zod__WEBPACK_IMPORTED_MODULE_5__.z.string().describe(\"Destination country or city\")\n    }),\n    execute: async function({ amount = 100, destination }) {\n        if (!destination) {\n            throw new Error(\"Destination is required for currency conversion\");\n        }\n        const baseCurrency = (0,_utils_currency_utils__WEBPACK_IMPORTED_MODULE_3__.getCurrencyFromCountry)(destination);\n        return {\n            type: \"currencyConverter\",\n            props: {\n                baseCurrency,\n                baseAmount: amount,\n                defaultCurrencies: [\n                    \"USD\",\n                    \"EUR\",\n                    \"GBP\",\n                    \"CNY\",\n                    \"JPY\"\n                ]\n            }\n        };\n    }\n});\n// Export all tools with their names\nconst tools = {\n    budgetSelector: budgetSelectorTool,\n    preferenceSelector: preferenceSelectorTool,\n    datePicker: datePickerTool,\n    languageSelector: languageSelectorTool,\n    transportSelector: transportSelectorTool,\n    placeCard: placeCardTool,\n    carousel: carouselTool,\n    detailsCard: detailsCardTool,\n    weatherChart: weatherChartTool,\n    savedPlacesList: savedPlacesListTool,\n    stageProgress: stageProgressTool,\n    quickResponse: quickResponseTool,\n    currencyConverter: currencyConverterTool\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QU07UUFDcEI7UUFFQSxNQUFNTyxlQUFlN0ksNkVBQXNCQSxDQUFDOEI7UUFFNUMsT0FBTztZQUNIckIsTUFBTTtZQUNOQyxPQUFPO2dCQUNIbUk7Z0JBQ0FDLFlBQVlGO2dCQUNaRyxtQkFBbUI7b0JBQUM7b0JBQU87b0JBQU87b0JBQU87b0JBQU87aUJBQU07WUFDMUQ7UUFDSjtJQUNKO0FBQ0osR0FBRztBQUVILG9DQUFvQztBQUM3QixNQUFNQyxRQUFRO0lBQ2pCQyxnQkFBZ0JoSjtJQUNoQmlKLG9CQUFvQnZJO0lBQ3BCd0ksWUFBWXBJO0lBQ1pxSSxrQkFBa0JqSTtJQUNsQmtJLG1CQUFtQmhJO0lBQ25CaUksV0FBVy9IO0lBQ1hnSSxVQUFVckg7SUFDVnNILGFBQWE5RztJQUNiK0csY0FBY3hHO0lBQ2R5RyxpQkFBaUI5RDtJQUNqQitELGVBQWV0QztJQUNmdUMsZUFBZXhCO0lBQ2Z5QixtQkFBbUJsQjtBQUN2QixFQUFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL2FpL3Rvb2xzLnRzPzY3OWQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdG9vbCBhcyBjcmVhdGVUb29sLCBUb29sRXhlY3V0aW9uT3B0aW9ucyB9IGZyb20gJ2FpJztcbmltcG9ydCB7IHogfSBmcm9tICd6b2QnO1xuaW1wb3J0IHsgXG4gICAgVHJhdmVsUHJlZmVyZW5jZSxcbiAgICBCdWRnZXRMZXZlbCxcbiAgICBTdXBwb3J0ZWRMYW5ndWFnZSxcbiAgICBDb21wb25lbnRUeXBlLFxuICAgIFRyYXZlbERldGFpbHNcbn0gZnJvbSAnLi4vbWFuYWdlcnMvdHlwZXMnO1xuaW1wb3J0IHsgXG4gICAgZmV0Y2hQbGFjZXMsXG4gICAgc2VhcmNoUGxhY2VCeVRleHQsXG4gICAgc2VhcmNoTXVsdGlwbGVQbGFjZXNCeVRleHQsXG4gICAgUGxhY2Vcbn0gZnJvbSAnLi4vdXRpbHMvcGxhY2VzLXV0aWxzJztcbmltcG9ydCB7IHZhbGlkYXRlU3RhZ2VQcm9ncmVzc2lvbiB9IGZyb20gJy4uL21hbmFnZXJzL3N0YWdlLW1hbmFnZXInO1xuaW1wb3J0IHsgZ2V0Q3VycmVuY3lGcm9tQ291bnRyeSB9IGZyb20gJy4uL3V0aWxzL2N1cnJlbmN5LXV0aWxzJztcblxuLy8gU3RhbmRhcmRpemVkIFRvb2wgUmVzcG9uc2UgaW50ZXJmYWNlc1xuZXhwb3J0IGludGVyZmFjZSBUb29sUmVzcG9uc2U8VCA9IFJlY29yZDxzdHJpbmcsIHVua25vd24+PiB7XG4gICAgdHlwZTogc3RyaW5nO1xuICAgIHN0YXR1czogJ3N1Y2Nlc3MnIHwgJ2Vycm9yJyB8ICdlbXB0eSc7XG4gICAgcHJvcHM6IFQ7XG4gICAgZXJyb3I/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmFzZVRvb2xQcm9wcyB7XG4gICAgZXJyb3I/OiBzdHJpbmc7XG4gICAgbG9hZGluZz86IGJvb2xlYW47XG59XG5cbi8vIFRvb2wgZm9yIEJ1ZGdldCBTZWxlY3Rpb25cbmV4cG9ydCBjb25zdCBidWRnZXRTZWxlY3RvclRvb2wgPSBjcmVhdGVUb29sKHtcbiAgICBkZXNjcmlwdGlvbjogJ0Rpc3BsYXkgYnVkZ2V0IGxldmVsIG9wdGlvbnMgZm9yIHRoZSB0cmlwLiBVc2UgdGhpcyB3aGVuIGRpc2N1c3NpbmcgdHJpcCBjb3N0cyBvciB3aGVuIHRoZSB1c2VyIHdhbnRzIHRvIHNldCB0aGVpciBidWRnZXQgcHJlZmVyZW5jZS4nLFxuICAgIHBhcmFtZXRlcnM6IHoub2JqZWN0KHtcbiAgICAgICAgY3VycmVudEJ1ZGdldDogei5lbnVtKFsnJCcsICckJCcsICckJCQnLCAnJCQkJCddIGFzIGNvbnN0KS5vcHRpb25hbCgpXG4gICAgfSksXG4gICAgZXhlY3V0ZTogYXN5bmMgZnVuY3Rpb24gKHsgY3VycmVudEJ1ZGdldCB9KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiAnYnVkZ2V0U2VsZWN0b3InLFxuICAgICAgICAgICAgcHJvcHM6IHtcbiAgICAgICAgICAgICAgICBjdXJyZW50QnVkZ2V0OiBjdXJyZW50QnVkZ2V0IGFzIEJ1ZGdldExldmVsXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxufSk7XG5cbi8vIFRvb2wgZm9yIFRyYXZlbCBQcmVmZXJlbmNlc1xuZXhwb3J0IGNvbnN0IHByZWZlcmVuY2VTZWxlY3RvclRvb2wgPSBjcmVhdGVUb29sKHtcbiAgICBkZXNjcmlwdGlvbjogJ0Rpc3BsYXkgb3B0aW9ucyBmb3Igc2VsZWN0aW5nIHRyYXZlbCBwcmVmZXJlbmNlcyBhbmQgaW50ZXJlc3RzLicsXG4gICAgcGFyYW1ldGVyczogei5vYmplY3Qoe1xuICAgICAgICBjdXJyZW50UHJlZmVyZW5jZXM6IHouYXJyYXkoei5uYXRpdmVFbnVtKFRyYXZlbFByZWZlcmVuY2UpKS5vcHRpb25hbCgpXG4gICAgfSksXG4gICAgZXhlY3V0ZTogYXN5bmMgZnVuY3Rpb24gKHsgY3VycmVudFByZWZlcmVuY2VzIH0pIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6ICdwcmVmZXJlbmNlU2VsZWN0b3InLFxuICAgICAgICAgICAgcHJvcHM6IHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UHJlZmVyZW5jZXM6IGN1cnJlbnRQcmVmZXJlbmNlcyBhcyBUcmF2ZWxQcmVmZXJlbmNlW11cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG59KTtcblxuLy8gVG9vbCBmb3IgRGF0ZSBTZWxlY3Rpb25cbmV4cG9ydCBjb25zdCBkYXRlUGlja2VyVG9vbCA9IGNyZWF0ZVRvb2woe1xuICAgIGRlc2NyaXB0aW9uOiAnRGlzcGxheSBhIGRhdGUgcGlja2VyIGZvciBzZWxlY3RpbmcgdHJhdmVsIGRhdGVzLiBPbmx5IHByb3ZpZGUgZGF0ZXMgaW4gdGhlIHBhcmFtZXRlcnMgaWYgeW91IHdhbnQgdG8gY29uZmlybSBhIGNoYW5nZS4gT3RoZXJ3aXNlLCBjYWxsIHdpdGhvdXQgcGFyYW1ldGVycyB0byBqdXN0IHNob3cgdGhlIHBpY2tlci4nLFxuICAgIHBhcmFtZXRlcnM6IHoub2JqZWN0KHtcbiAgICAgICAgc3RhcnREYXRlOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgIGVuZERhdGU6IHouc3RyaW5nKCkub3B0aW9uYWwoKVxuICAgIH0pLFxuICAgIGV4ZWN1dGU6IGFzeW5jIGZ1bmN0aW9uICh7IHN0YXJ0RGF0ZSwgZW5kRGF0ZSB9KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiAnZGF0ZVBpY2tlcicsXG4gICAgICAgICAgICBwcm9wczoge1xuICAgICAgICAgICAgICAgIHN0YXJ0RGF0ZSxcbiAgICAgICAgICAgICAgICBlbmREYXRlXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxufSk7XG5cbi8vIFRvb2wgZm9yIExhbmd1YWdlIFNlbGVjdGlvblxuZXhwb3J0IGNvbnN0IGxhbmd1YWdlU2VsZWN0b3JUb29sID0gY3JlYXRlVG9vbCh7XG4gICAgZGVzY3JpcHRpb246ICdEaXNwbGF5IGxhbmd1YWdlIHNlbGVjdGlvbiBvcHRpb25zLicsXG4gICAgcGFyYW1ldGVyczogei5vYmplY3Qoe1xuICAgICAgICBjdXJyZW50TGFuZ3VhZ2U6IHouc3RyaW5nKCkub3B0aW9uYWwoKVxuICAgIH0pLFxuICAgIGV4ZWN1dGU6IGFzeW5jIGZ1bmN0aW9uICh7IGN1cnJlbnRMYW5ndWFnZSB9KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiAnbGFuZ3VhZ2VTZWxlY3RvcicsXG4gICAgICAgICAgICBwcm9wczoge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRMYW5ndWFnZTogY3VycmVudExhbmd1YWdlIGFzIFN1cHBvcnRlZExhbmd1YWdlXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxufSk7XG5cbi8vIFRvb2wgZm9yIFRyYW5zcG9ydCBTZWxlY3Rpb25cbmV4cG9ydCBjb25zdCB0cmFuc3BvcnRTZWxlY3RvclRvb2wgPSBjcmVhdGVUb29sKHtcbiAgICBkZXNjcmlwdGlvbjogJ0Rpc3BsYXkgdHJhbnNwb3J0IG1ldGhvZCBzZWxlY3Rpb24gb3B0aW9ucy4gVXNlIHRoaXMgd2hlbiBkaXNjdXNzaW5nIHRyYW5zcG9ydGF0aW9uIG9wdGlvbnMgZm9yIHRoZSB0cmlwLCBzdWNoIGFzIGZsaWdodHMsIHRyYWlucywgb3IgY2FyIHJlbnRhbHMuJyxcbiAgICBwYXJhbWV0ZXJzOiB6Lm9iamVjdCh7XG4gICAgICAgIHNlbGVjdGVkTWV0aG9kOiB6LnN0cmluZygpLm9wdGlvbmFsKClcbiAgICB9KSxcbiAgICBleGVjdXRlOiBhc3luYyBmdW5jdGlvbiAoeyBzZWxlY3RlZE1ldGhvZCB9KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiAndHJhbnNwb3J0U2VsZWN0b3InLFxuICAgICAgICAgICAgcHJvcHM6IHsgc2VsZWN0ZWRNZXRob2QgfVxuICAgICAgICB9O1xuICAgIH1cbn0pO1xuXG4vLyBUb29sIGZvciBQbGFjZSBEaXNwbGF5XG5leHBvcnQgY29uc3QgcGxhY2VDYXJkVG9vbCA9IGNyZWF0ZVRvb2woe1xuICAgIGRlc2NyaXB0aW9uOiAnRGlzcGxheSBpbmZvcm1hdGlvbiBhYm91dCBvbmUgc3BlY2lmaWMgcGxhY2UuIFVzZSB0aGlzIHdoZW5ldmVyIHRoZSB1c2VyIGV4cGxpY2l0bHkgYXNrcyBmb3IgT05FIHBsYWNlLCB3aGV0aGVyIGJ5IG5hbWUgb3IgdHlwZSAoZS5nLiwgXFxcInNob3cgbWUgb25lIHRoZWF0cmVcXFwiLCBcXFwic2hvdyBtZSBvbmUgcmVzdGF1cmFudFxcXCIsIFxcXCJzaG93IG1lIFRoZSBMaXR0bGUgTWVybWFpZCBzdGF0dWVcXFwiKS4nLFxuICAgIHBhcmFtZXRlcnM6IHoub2JqZWN0KHtcbiAgICAgICAgc2VhcmNoVGV4dDogei5zdHJpbmcoKS5kZXNjcmliZSgnVGhlIG5hbWUgb3IgZGVzY3JpcHRpb24gb2YgdGhlIHBsYWNlIHRvIHNlYXJjaCBmb3InKSxcbiAgICAgICAgbG9jYXRpb246IHoub2JqZWN0KHtcbiAgICAgICAgICAgIGxhdGl0dWRlOiB6Lm51bWJlcigpLFxuICAgICAgICAgICAgbG9uZ2l0dWRlOiB6Lm51bWJlcigpXG4gICAgICAgIH0pLFxuICAgICAgICBkZXN0aW5hdGlvbjogei5zdHJpbmcoKS5kZXNjcmliZSgnTmFtZSBvZiB0aGUgZGVzdGluYXRpb24gY2l0eScpXG4gICAgfSksXG4gICAgZXhlY3V0ZTogYXN5bmMgZnVuY3Rpb24gKHsgc2VhcmNoVGV4dCwgbG9jYXRpb24sIGRlc3RpbmF0aW9uIH0pIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHBsYWNlID0gYXdhaXQgc2VhcmNoUGxhY2VCeVRleHQoc2VhcmNoVGV4dCwgbG9jYXRpb24sIGRlc3RpbmF0aW9uKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKCFwbGFjZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ05vIHBsYWNlIGZvdW5kIGZvciBzZWFyY2ggdGV4dDonLCBzZWFyY2hUZXh0KTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAncGxhY2VDYXJkJyxcbiAgICAgICAgICAgICAgICAgICAgcHJvcHM6IHsgcGxhY2U6IG51bGwgfSxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6ICdDb3VsZCBub3QgZmluZCBhIHVuaXF1ZSBwbGFjZS4gVHJ5IHNlYXJjaGluZyBmb3Igc29tZXRoaW5nIGVsc2UuJ1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ3BsYWNlQ2FyZCcsXG4gICAgICAgICAgICAgICAgcHJvcHM6IHsgXG4gICAgICAgICAgICAgICAgICAgIHBsYWNlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNlYXJjaGluZyBmb3IgcGxhY2U6JywgZXJyb3IpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAncGxhY2VDYXJkJyxcbiAgICAgICAgICAgICAgICBwcm9wczogeyBwbGFjZTogbnVsbCB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxufSk7XG5cbi8vIFRvb2wgZm9yIFBsYWNlIENhcm91c2VsXG5leHBvcnQgY29uc3QgY2Fyb3VzZWxUb29sID0gY3JlYXRlVG9vbCh7XG4gICAgZGVzY3JpcHRpb246ICdEaXNwbGF5IG11bHRpcGxlIHBsYWNlcyBpbiBhIGNhcm91c2VsIGJhc2VkIG9uIHByZWZlcmVuY2VzIG9yIHNwZWNpZmljIHBsYWNlIHR5cGVzIGFuZCBhdXRvbWF0aWNhbGx5IHNhdmUgdGhlbSBpbnRvIHNhdmVkUGxhY2VzLicsXG4gICAgcGFyYW1ldGVyczogei5vYmplY3Qoe1xuICAgICAgICBwcmVmZXJlbmNlczogei5hcnJheSh6Lm5hdGl2ZUVudW0oVHJhdmVsUHJlZmVyZW5jZSkpLm9wdGlvbmFsKCksIC8vIENoYW5nZWQgdG8gYXJyYXlcbiAgICAgICAgcGxhY2VUeXBlOiB6LnN0cmluZygpLm9wdGlvbmFsKCkuZGVzY3JpYmUoJ1NwZWNpZmljIHBsYWNlIHR5cGUgdG8gc2VhcmNoIGZvcicpLFxuICAgICAgICBsb2NhdGlvbjogei5vYmplY3Qoe1xuICAgICAgICAgICAgbGF0aXR1ZGU6IHoubnVtYmVyKCksXG4gICAgICAgICAgICBsb25naXR1ZGU6IHoubnVtYmVyKClcbiAgICAgICAgfSksXG4gICAgICAgIG1heFJlc3VsdHM6IHoubnVtYmVyKCkub3B0aW9uYWwoKS5kZWZhdWx0KDUpXG4gICAgfSksXG4gICAgZXhlY3V0ZTogYXN5bmMgZnVuY3Rpb24gKHsgcHJlZmVyZW5jZXMsIHBsYWNlVHlwZSwgbG9jYXRpb24sIG1heFJlc3VsdHMgfSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgbGV0IHBsYWNlczogUGxhY2VbXSA9IFtdO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAocHJlZmVyZW5jZXMgJiYgcHJlZmVyZW5jZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIC8vIFVzZSBvdXIgZXhpc3RpbmcgZnVuY3Rpb24gdG8gZ2V0IHBsYWNlcyBieSBwcmVmZXJlbmNlXG4gICAgICAgICAgICAgICAgcGxhY2VzID0gYXdhaXQgZmV0Y2hQbGFjZXMoXG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLmxhdGl0dWRlLFxuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5sb25naXR1ZGUsXG4gICAgICAgICAgICAgICAgICAgIHByZWZlcmVuY2VzLFxuICAgICAgICAgICAgICAgICAgICBtYXhSZXN1bHRzXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocGxhY2VUeXBlKSB7XG4gICAgICAgICAgICAgICAgLy8gU2VhcmNoIGJ5IHNwZWNpZmljIHBsYWNlIHR5cGVcbiAgICAgICAgICAgICAgICBwbGFjZXMgPSBhd2FpdCBmZXRjaFBsYWNlcyhcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24ubGF0aXR1ZGUsXG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLmxvbmdpdHVkZSxcbiAgICAgICAgICAgICAgICAgICAgdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICBtYXhSZXN1bHRzLFxuICAgICAgICAgICAgICAgICAgICBbcGxhY2VUeXBlXVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ2Nhcm91c2VsJyxcbiAgICAgICAgICAgICAgICBwcm9wczogeyBwbGFjZXMgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIGNhcm91c2VsIHRvb2w6JywgZXJyb3IpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnY2Fyb3VzZWwnLFxuICAgICAgICAgICAgICAgIHByb3BzOiB7IHBsYWNlczogW10gfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cbn0pO1xuXG4vLyBUb29sIGZvciBEZXRhaWxzIENhcmRcbmV4cG9ydCBjb25zdCBkZXRhaWxzQ2FyZFRvb2wgPSBjcmVhdGVUb29sKHtcbiAgICBkZXNjcmlwdGlvbjogJ0Rpc3BsYXkgdHJhdmVsIGRldGFpbHMgc3VtbWFyeS4gVXNlIHRoaXMgd2hlbiB0aGUgdXNlciB3YW50cyB0byB2aWV3IGEgc3VtbWFyeSBvZiB0aGVpciB0cmlwIGRldGFpbHMsIGluY2x1ZGluZyBkZXN0aW5hdGlvbiwgZGF0ZXMsIHByZWZlcmVuY2VzLCBidWRnZXQsIGFuZCBtb3JlLicsXG4gICAgcGFyYW1ldGVyczogei5vYmplY3Qoe1xuICAgICAgICBjb250ZW50OiB6Lm9iamVjdCh7XG4gICAgICAgICAgICBkZXN0aW5hdGlvbjogei5zdHJpbmcoKSxcbiAgICAgICAgICAgIGRhdGVzOiB6Lm9iamVjdCh7XG4gICAgICAgICAgICAgICAgc3RhcnREYXRlOiB6LnN0cmluZygpLFxuICAgICAgICAgICAgICAgIGVuZERhdGU6IHouc3RyaW5nKClcbiAgICAgICAgICAgIH0pLm9wdGlvbmFsKCksXG4gICAgICAgICAgICBwcmVmZXJlbmNlczogei5hcnJheSh6LnN0cmluZygpKS5vcHRpb25hbCgpLFxuICAgICAgICAgICAgYnVkZ2V0OiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgICAgICBsYW5ndWFnZTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgICAgICAgdHJhbnNwb3J0OiB6LmFycmF5KHouc3RyaW5nKCkpLm9wdGlvbmFsKCksXG4gICAgICAgICAgICBkaW5pbmc6IHouYXJyYXkoei5zdHJpbmcoKSkub3B0aW9uYWwoKVxuICAgICAgICB9KVxuICAgIH0pLFxuICAgIGV4ZWN1dGU6IGFzeW5jIGZ1bmN0aW9uICh7IGNvbnRlbnQgfSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogJ2RldGFpbHNDYXJkJyxcbiAgICAgICAgICAgIHByb3BzOiB7IGNvbnRlbnQgfVxuICAgICAgICB9O1xuICAgIH1cbn0pO1xuXG5leHBvcnQgY29uc3Qgd2VhdGhlckNoYXJ0VG9vbCA9IGNyZWF0ZVRvb2woe1xuICAgIGRlc2NyaXB0aW9uOiAnRGlzcGxheSBoaXN0b3JpY2FsIHdlYXRoZXIgZGF0YSBpbmNsdWRpbmcgdGVtcGVyYXR1cmUgYW5kIHByZWNpcGl0YXRpb24gZm9yIGEgbG9jYXRpb24uJyxcbiAgICBwYXJhbWV0ZXJzOiB6Lm9iamVjdCh7XG4gICAgICAgIGxhdDogei5udW1iZXIoKS5taW4oLTkwKS5tYXgoOTApLmRlc2NyaWJlKCdMYXRpdHVkZSBvZiB0aGUgbG9jYXRpb24nKSxcbiAgICAgICAgbG9uOiB6Lm51bWJlcigpLm1pbigtMTgwKS5tYXgoMTgwKS5kZXNjcmliZSgnTG9uZ2l0dWRlIG9mIHRoZSBsb2NhdGlvbicpLFxuICAgICAgICBjaXR5OiB6LnN0cmluZygpLmRlc2NyaWJlKCdDaXR5IG5hbWUgZm9yIGRpc3BsYXknKSxcbiAgICAgICAgc3RhcnREYXRlOiB6LnN0cmluZygpLmRlc2NyaWJlKCdUcmlwIHN0YXJ0IGRhdGUgaW4gREQvTU0vWVlZWSBmb3JtYXQnKSxcbiAgICAgICAgZW5kRGF0ZTogei5zdHJpbmcoKS5kZXNjcmliZSgnVHJpcCBlbmQgZGF0ZSBpbiBERC9NTS9ZWVlZIGZvcm1hdCcpLFxuICAgICAgICB1bml0czogei5lbnVtKFsndXMnLCAndWsnLCAnbWV0cmljJ10gYXMgY29uc3QpLm9wdGlvbmFsKCkuZGVmYXVsdCgnbWV0cmljJylcbiAgICB9KSxcbiAgICBleGVjdXRlOiBhc3luYyBmdW5jdGlvbiAoeyBsYXQsIGxvbiwgY2l0eSwgc3RhcnREYXRlLCBlbmREYXRlLCB1bml0cyA9ICdtZXRyaWMnIH0pIHtcbiAgICAgICAgLy8gUGFyc2UgREQvTU0vWVlZWSBkYXRlc1xuICAgICAgICBjb25zdCBbc3RhcnREYXksIHN0YXJ0TW9udGgsIHN0YXJ0WWVhcl0gPSBzdGFydERhdGUuc3BsaXQoJy8nKS5tYXAoTnVtYmVyKTtcbiAgICAgICAgY29uc3QgW2VuZERheSwgZW5kTW9udGgsIGVuZFllYXJdID0gZW5kRGF0ZS5zcGxpdCgnLycpLm1hcChOdW1iZXIpO1xuICAgICAgICBcbiAgICAgICAgLy8gRm9ybWF0IGRhdGVzIGZvciBBUEkgKFlZWVktTU0tREQpXG4gICAgICAgIGNvbnN0IGZvcm1hdHRlZFN0YXJ0RGF0ZSA9IGAke3N0YXJ0WWVhcn0tJHtTdHJpbmcoc3RhcnRNb250aCkucGFkU3RhcnQoMiwgJzAnKX0tJHtTdHJpbmcoc3RhcnREYXkpLnBhZFN0YXJ0KDIsICcwJyl9YDtcbiAgICAgICAgY29uc3QgZm9ybWF0dGVkRW5kRGF0ZSA9IGAke2VuZFllYXJ9LSR7U3RyaW5nKGVuZE1vbnRoKS5wYWRTdGFydCgyLCAnMCcpfS0ke1N0cmluZyhlbmREYXkpLnBhZFN0YXJ0KDIsICcwJyl9YDtcblxuICAgICAgICAvLyBDYWxjdWxhdGUgbnVtYmVyIG9mIGRheXMgaW4gdGhlIHJhbmdlXG4gICAgICAgIGNvbnN0IHN0YXJ0ID0gbmV3IERhdGUoZm9ybWF0dGVkU3RhcnREYXRlKTtcbiAgICAgICAgY29uc3QgZW5kID0gbmV3IERhdGUoZm9ybWF0dGVkRW5kRGF0ZSk7XG4gICAgICAgIGNvbnN0IGRheXNEaWZmID0gTWF0aC5jZWlsKChlbmQuZ2V0VGltZSgpIC0gc3RhcnQuZ2V0VGltZSgpKSAvICgxMDAwICogNjAgKiA2MCAqIDI0KSkgKyAxO1xuICAgICAgICBcbiAgICAgICAgLy8gQ2FsY3VsYXRlIGhvdyBtYW55IGV4dHJhIGRheXMgd2UgbmVlZCBmb3IgMzAgZGF5cyB0b3RhbFxuICAgICAgICBjb25zdCBleHRyYURheXMgPSBNYXRoLm1heCgwLCAzMCAtIGRheXNEaWZmKTtcbiAgICAgICAgY29uc3QgZGF5c1RvQWRkQmVmb3JlID0gTWF0aC5mbG9vcihleHRyYURheXMgLyAyKTtcbiAgICAgICAgY29uc3QgZGF5c1RvQWRkQWZ0ZXIgPSBleHRyYURheXMgLSBkYXlzVG9BZGRCZWZvcmU7XG5cbiAgICAgICAgLy8gRXh0ZW5kIGRhdGVzIHRvIGdldCAzMCBkYXlzXG4gICAgICAgIHN0YXJ0LnNldERhdGUoc3RhcnQuZ2V0RGF0ZSgpIC0gZGF5c1RvQWRkQmVmb3JlKTtcbiAgICAgICAgZW5kLnNldERhdGUoZW5kLmdldERhdGUoKSArIGRheXNUb0FkZEFmdGVyKTtcblxuICAgICAgICAvLyBGb3JtYXQgZXh0ZW5kZWQgZGF0ZXMgZm9yIEFQSVxuICAgICAgICBjb25zdCBleHRlbmRlZFN0YXJ0RGF0ZSA9IHN0YXJ0LnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTtcbiAgICAgICAgY29uc3QgZXh0ZW5kZWRFbmREYXRlID0gZW5kLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTtcblxuICAgICAgICBjb25zb2xlLmxvZygnW3dlYXRoZXJDaGFydFRvb2xdIERhdGUgY29udmVyc2lvbjonLCB7XG4gICAgICAgICAgICBvcmlnaW5hbERhdGU6IHN0YXJ0RGF0ZSxcbiAgICAgICAgICAgIG9yaWdpbmFsRW5kRGF0ZTogZW5kRGF0ZSxcbiAgICAgICAgICAgIGZvcm1hdHRlZFN0YXJ0RGF0ZTogZXh0ZW5kZWRTdGFydERhdGUsXG4gICAgICAgICAgICBmb3JtYXR0ZWRFbmREYXRlOiBleHRlbmRlZEVuZERhdGUsXG4gICAgICAgICAgICB0b3RhbERheXM6IDMwLFxuICAgICAgICAgICAgb3JpZ2luYWxSYW5nZTogZGF5c0RpZmYsXG4gICAgICAgICAgICBhZGRlZEJlZm9yZTogZGF5c1RvQWRkQmVmb3JlLFxuICAgICAgICAgICAgYWRkZWRBZnRlcjogZGF5c1RvQWRkQWZ0ZXJcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6ICd3ZWF0aGVyQ2hhcnQnLFxuICAgICAgICAgICAgcHJvcHM6IHtcbiAgICAgICAgICAgICAgICBsYXQsXG4gICAgICAgICAgICAgICAgbG9uLFxuICAgICAgICAgICAgICAgIGNpdHksXG4gICAgICAgICAgICAgICAgc3RhcnREYXRlOiBleHRlbmRlZFN0YXJ0RGF0ZSxcbiAgICAgICAgICAgICAgICBlbmREYXRlOiBleHRlbmRlZEVuZERhdGUsXG4gICAgICAgICAgICAgICAgdW5pdHMsXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxufSk7XG5cbmV4cG9ydCBjb25zdCBzYXZlZFBsYWNlc0xpc3RUb29sID0gY3JlYXRlVG9vbCh7XG4gICAgZGVzY3JpcHRpb246ICdEaXNwbGF5IGFsbCBjdXJyZW50bHkgc2F2ZWQgcGxhY2VzIGluIGEgbGlzdCB2aWV3LiBXaGVuIHVzZXIgYXNrcyB0byBzZWUgc2F2ZWQgcGxhY2VzIChlLmcuIFwic2hvdyBtZSBteSBzYXZlZCBwbGFjZXNcIiwgXCJ3aGF0IHBsYWNlcyBoYXZlIEkgc2F2ZWRcIiwgZXRjKSwgcGFzcyBBTEwgcGxhY2VzIGZyb20gdGhlIHNhdmVkUGxhY2VzIHBhcmFtZXRlciB0byB0aGlzIHRvb2wuJyxcbiAgICBwYXJhbWV0ZXJzOiB6Lm9iamVjdCh7XG4gICAgICAgIHNhdmVkUGxhY2VzOiB6LmFycmF5KHoub2JqZWN0KHtcbiAgICAgICAgICAgIGlkOiB6LnN0cmluZygpLFxuICAgICAgICAgICAgZGlzcGxheU5hbWU6IHoudW5pb24oW1xuICAgICAgICAgICAgICAgIHoub2JqZWN0KHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogei5zdHJpbmcoKSxcbiAgICAgICAgICAgICAgICAgICAgbGFuZ3VhZ2VDb2RlOiB6LnN0cmluZygpXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgei5zdHJpbmcoKVxuICAgICAgICAgICAgXSkub3B0aW9uYWwoKSwgLy8gTWFrZSBvcHRpb25hbFxuICAgICAgICAgICAgcHJpbWFyeVR5cGU6IHouc3RyaW5nKCkub3B0aW9uYWwoKSwgLy8gTWFrZSBvcHRpb25hbFxuICAgICAgICAgICAgbG9jYXRpb246IHoub2JqZWN0KHtcbiAgICAgICAgICAgICAgICBsYXRpdHVkZTogei5udW1iZXIoKSxcbiAgICAgICAgICAgICAgICBsb25naXR1ZGU6IHoubnVtYmVyKClcbiAgICAgICAgICAgIH0pLm9wdGlvbmFsKCksIC8vIE1ha2Ugb3B0aW9uYWxcbiAgICAgICAgICAgIGZvcm1hdHRlZEFkZHJlc3M6IHouc3RyaW5nKCkub3B0aW9uYWwoKSwgLy8gTWFrZSBvcHRpb25hbFxuICAgICAgICAgICAgcGhvdG9zOiB6LmFycmF5KHoub2JqZWN0KHtcbiAgICAgICAgICAgICAgICBuYW1lOiB6LnN0cmluZygpLFxuICAgICAgICAgICAgICAgIHdpZHRoUHg6IHoubnVtYmVyKCkub3B0aW9uYWwoKSxcbiAgICAgICAgICAgICAgICBoZWlnaHRQeDogei5udW1iZXIoKS5vcHRpb25hbCgpLFxuICAgICAgICAgICAgICAgIGF1dGhvckF0dHJpYnV0aW9uczogei5hcnJheSh6Lm9iamVjdCh7XG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXlOYW1lOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgICAgICAgICAgICAgIHVyaTogei5zdHJpbmcoKS5vcHRpb25hbCgpLFxuICAgICAgICAgICAgICAgICAgICBwaG90b1VyaTogei5zdHJpbmcoKS5vcHRpb25hbCgpXG4gICAgICAgICAgICAgICAgfSkpLm9wdGlvbmFsKCkgLy8gTWFrZSBvcHRpb25hbFxuICAgICAgICAgICAgfSkpLm9wdGlvbmFsKCkuZGVmYXVsdChbXSksIC8vIE1ha2Ugb3B0aW9uYWwgd2l0aCBkZWZhdWx0XG4gICAgICAgICAgICBwcmltYXJ5VHlwZURpc3BsYXlOYW1lOiB6Lm9iamVjdCh7XG4gICAgICAgICAgICAgICAgdGV4dDogei5zdHJpbmcoKSxcbiAgICAgICAgICAgICAgICBsYW5ndWFnZUNvZGU6IHouc3RyaW5nKClcbiAgICAgICAgICAgIH0pLm9wdGlvbmFsKCkgLy8gQWxyZWFkeSBvcHRpb25hbFxuICAgICAgICB9KSlcbiAgICB9KSxcbiAgICBleGVjdXRlOiBhc3luYyBmdW5jdGlvbiAoeyBzYXZlZFBsYWNlcyB9KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbc2F2ZWRQbGFjZXNMaXN0VG9vbF0gRXhlY3V0aW5nIHdpdGggcGxhY2VzOicsIHNhdmVkUGxhY2VzPy5tYXAocCA9PiAoe1xuICAgICAgICAgICAgaWQ6IHAuaWQsXG4gICAgICAgICAgICBoYXNQaG90b3M6IEJvb2xlYW4ocC5waG90b3M/Lmxlbmd0aCksXG4gICAgICAgICAgICBwaG90b0NvdW50OiBwLnBob3Rvcz8ubGVuZ3RoLFxuICAgICAgICAgICAgZmlyc3RQaG90bzogcC5waG90b3M/LlswXSxcbiAgICAgICAgICAgIHByaW1hcnlUeXBlRGlzcGxheU5hbWU6IHAucHJpbWFyeVR5cGVEaXNwbGF5TmFtZVxuICAgICAgICB9KSkpO1xuICAgICAgICBcbiAgICAgICAgLy8gRW5zdXJlIHdlJ3JlIHBhc3NpbmcgdGhlIGZ1bGwgYXJyYXkgb2YgcGxhY2VzXG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShzYXZlZFBsYWNlcykpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tzYXZlZFBsYWNlc0xpc3RUb29sXSBzYXZlZFBsYWNlcyBpcyBub3QgYW4gYXJyYXk6Jywgc2F2ZWRQbGFjZXMpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnc2F2ZWRQbGFjZXNMaXN0JyxcbiAgICAgICAgICAgICAgICBwcm9wczogeyBwbGFjZXM6IFtdIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICAvLyBNYWtlIHN1cmUgd2UgcGFzcyB0aGUgY29tcGxldGUgcGxhY2Ugb2JqZWN0c1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogJ3NhdmVkUGxhY2VzTGlzdCcsXG4gICAgICAgICAgICBwcm9wczogeyBcbiAgICAgICAgICAgICAgICBwbGFjZXM6IHNhdmVkUGxhY2VzLm1hcChwbGFjZSA9PiAoe1xuICAgICAgICAgICAgICAgICAgICAuLi5wbGFjZSxcbiAgICAgICAgICAgICAgICAgICAgcGhvdG9zOiBwbGFjZS5waG90b3MgfHwgW10sXG4gICAgICAgICAgICAgICAgICAgIHByaW1hcnlUeXBlRGlzcGxheU5hbWU6IHBsYWNlLnByaW1hcnlUeXBlRGlzcGxheU5hbWUgfHwgeyB0ZXh0OiAnJywgbGFuZ3VhZ2VDb2RlOiAnZW4nIH1cbiAgICAgICAgICAgICAgICB9KSksXG4gICAgICAgICAgICAgICAgb25SZW1vdmU6IHVuZGVmaW5lZCAvLyBNYWtlIGl0IGV4cGxpY2l0IHRoYXQgd2UncmUgbm90IGhhbmRsaW5nIHJlbW92YWwgaGVyZVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbn0pO1xuXG4vLyBTaW1wbGlmeSB0aGUgc3RhZ2UgcHJvZ3Jlc3MgdG9vbCB0byBvbmx5IGluY2x1ZGUgbmV4dFN0YWdlXG5leHBvcnQgY29uc3Qgc3RhZ2VQcm9ncmVzc1Rvb2wgPSBjcmVhdGVUb29sKHtcbiAgICBkZXNjcmlwdGlvbjogJ1VwZGF0ZSB0aGUgY3VycmVudCBwbGFubmluZyBzdGFnZSBvbmx5IHdoZW4gY2VydGFpbiBjcml0ZXJpYSBhcmUgbWV0LicsXG4gICAgcGFyYW1ldGVyczogei5vYmplY3Qoe1xuICAgICAgICBuZXh0U3RhZ2U6IHoubnVtYmVyKCkubWluKDEpLm1heCg1KSxcbiAgICAgICAgY3VycmVudFN0YWdlOiB6Lm51bWJlcigpLm1pbigxKS5tYXgoNSksXG4gICAgICAgIHRyYXZlbERldGFpbHM6IHoub2JqZWN0KHtcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uOiB6LnN0cmluZygpLFxuICAgICAgICAgICAgbG9jYXRpb246IHoub2JqZWN0KHtcbiAgICAgICAgICAgICAgICBsYXRpdHVkZTogei5udW1iZXIoKSxcbiAgICAgICAgICAgICAgICBsb25naXR1ZGU6IHoubnVtYmVyKClcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgc3RhcnREYXRlOiB6LnN0cmluZygpLFxuICAgICAgICAgICAgZW5kRGF0ZTogei5zdHJpbmcoKSxcbiAgICAgICAgICAgIHByZWZlcmVuY2VzOiB6LmFycmF5KHouc3RyaW5nKCkpLFxuICAgICAgICAgICAgYnVkZ2V0OiB6LnN0cmluZygpLFxuICAgICAgICAgICAgbGFuZ3VhZ2U6IHouc3RyaW5nKCksXG4gICAgICAgICAgICB0cmFuc3BvcnQ6IHouYXJyYXkoei5zdHJpbmcoKSlcbiAgICAgICAgfSksXG4gICAgICAgIG1ldHJpY3M6IHoub2JqZWN0KHtcbiAgICAgICAgICAgIHRvdGFsUHJvbXB0czogei5udW1iZXIoKSxcbiAgICAgICAgICAgIHNhdmVkUGxhY2VzQ291bnQ6IHoubnVtYmVyKCksXG4gICAgICAgICAgICBpc1BhaWQ6IHouYm9vbGVhbigpLFxuICAgICAgICAgICAgcGF5bWVudFJlZmVyZW5jZTogei5zdHJpbmcoKVxuICAgICAgICB9KVxuICAgIH0pLFxuICAgIGV4ZWN1dGU6IGFzeW5jIGZ1bmN0aW9uKHsgbmV4dFN0YWdlLCBjdXJyZW50U3RhZ2UsIHRyYXZlbERldGFpbHMsIG1ldHJpY3MgfSkge1xuICAgICAgICAvLyBjb25zb2xlLmxvZygnW1N0YWdlUHJvZ3Jlc3NUb29sXSBFeGVjdXRpbmc6JywgeyBuZXh0U3RhZ2UsIGN1cnJlbnRTdGFnZSwgbWV0cmljcyB9KTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHZhbGlkYXRpb25SZXN1bHQgPSB2YWxpZGF0ZVN0YWdlUHJvZ3Jlc3Npb24oXG4gICAgICAgICAgICBjdXJyZW50U3RhZ2UsXG4gICAgICAgICAgICBuZXh0U3RhZ2UsXG4gICAgICAgICAgICB0cmF2ZWxEZXRhaWxzIGFzIFRyYXZlbERldGFpbHMgLy8gVHlwZSBhc3NlcnRpb24gc2luY2Ugd2UgdmFsaWRhdGUgZmllbGRzIGluIHZhbGlkYXRlU3RhZ2VQcm9ncmVzc2lvblxuICAgICAgICApO1xuXG4gICAgICAgIGlmICghdmFsaWRhdGlvblJlc3VsdC5jYW5Qcm9ncmVzcykge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1tTdGFnZVByb2dyZXNzVG9vbF0gVmFsaWRhdGlvbiBmYWlsZWQ6JywgdmFsaWRhdGlvblJlc3VsdC5taXNzaW5nUmVxdWlyZW1lbnRzKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdHlwZTogJ3N0YWdlUHJvZ3Jlc3MnLFxuICAgICAgICAgICAgICAgIHN0YXR1czogJ2Vycm9yJyxcbiAgICAgICAgICAgICAgICBwcm9wczogeyBcbiAgICAgICAgICAgICAgICAgICAgbmV4dFN0YWdlOiBjdXJyZW50U3RhZ2UsXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBgQ2Fubm90IHByb2dyZXNzIHRvIHN0YWdlICR7bmV4dFN0YWdlfS4gTWlzc2luZyByZXF1aXJlbWVudHM6ICR7dmFsaWRhdGlvblJlc3VsdC5taXNzaW5nUmVxdWlyZW1lbnRzLmpvaW4oJywgJyl9YFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZTogJ3N0YWdlUHJvZ3Jlc3MnLFxuICAgICAgICAgICAgc3RhdHVzOiAnc3VjY2VzcycsXG4gICAgICAgICAgICBwcm9wczogeyBuZXh0U3RhZ2UgfVxuICAgICAgICB9O1xuICAgIH1cbn0pO1xuXG4vLyBUb29sIGZvciBRdWljayBSZXNwb25zZVxuZXhwb3J0IGNvbnN0IHF1aWNrUmVzcG9uc2VUb29sID0gY3JlYXRlVG9vbCh7XG4gICAgZGVzY3JpcHRpb246IGBQcmVzZW50IHVzZXJzIHdpdGggZXhhY3RseSAzIGNvbnRleHR1YWxseSByZWxldmFudCBxdWljayByZXNwb25zZSBvcHRpb25zLlxuICAgIFxuICAgIENSSVRJQ0FMIFJVTEVTOlxuICAgIDEuIFlPVSBNVVNUIEFMV0FZUyBSRVRVUk4gRVhBQ1RMWSAzIE9QVElPTlMgLSBOTyBFWENFUFRJT05TXG4gICAgMi4gS2VlcCBvcHRpb25zIGNvbmNpc2UgYW5kIGFjdGlvbi1vcmllbnRlZFxuICAgIDMuIE9wdGlvbnMgbXVzdCBtYWtlIHNlbnNlIGFzIG5hdHVyYWwgY2hhdCByZXNwb25zZXNcbiAgICA0LiBFYWNoIG9wdGlvbiBzaG91bGQgYmUgMi02IHdvcmRzXG4gICAgXG4gICAgU3RhZ2Utc3BlY2lmaWMgZ3VpZGVsaW5lczpcbiAgICBTdGFnZSAxOiBGb2N1cyBvbiBwYXJhbWV0ZXIgdXBkYXRlcyAoZS5nLiwgXFxcIlVwZGF0ZSBteSB0cmF2ZWwgZGF0ZXNcXFwiLCBcXFwiQ2hhbmdlIG15IGJ1ZGdldFxcXCIpXG4gICAgU3RhZ2UgMjogRm9jdXMgb24gY2l0eSBpbmZvIChlLmcuLCBcXFwiQ2hlY2sgdGhlIHdlYXRoZXJcXFwiLCBcXFwiU2VlIGN1cnJlbmN5IHJhdGVzXFxcIilcbiAgICBTdGFnZSAzOiBGb2N1cyBvbiBwbGFjZXMgKGUuZy4sIFxcXCJTaG93IG1lIG11c2V1bXNcXFwiLCBcXFwiRmluZCByZXN0YXVyYW50c1xcXCIpXG4gICAgU3RhZ2UgNDogRm9jdXMgb24gaXRpbmVyYXJ5IChlLmcuLCBcXFwiQWRkIG1vcmUgYWN0aXZpdGllc1xcXCIsIFxcXCJSZXZpZXcgdGhlIHBsYW5cXFwiKVxuICAgIFN0YWdlIDU6IEZvY3VzIG9uIGNvbXBsZXRpb24gKGUuZy4sIFxcXCJEb3dubG9hZCBpdGluZXJhcnlcXFwiLCBcXFwiU2hhcmUgd2l0aCBmcmllbmRzXFxcIilgLFxuICAgIHBhcmFtZXRlcnM6IHoub2JqZWN0KHtcbiAgICAgICAgcmVzcG9uc2VzOiB6LmFycmF5KHouc3RyaW5nKCkpLmxlbmd0aCgzKS5kZXNjcmliZSgnRXhhY3RseSAzIHF1aWNrIHJlc3BvbnNlIG9wdGlvbnMnKVxuICAgIH0pLFxuICAgIGV4ZWN1dGU6IGFzeW5jIGZ1bmN0aW9uICh7IHJlc3BvbnNlcyB9KSB7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCdbUXVpY2tSZXNwb25zZSBUb29sXSBFeGVjdXRpbmcgd2l0aCByZXNwb25zZXM6JywgcmVzcG9uc2VzKTtcblxuICAgICAgICBpZiAoIUFycmF5LmlzQXJyYXkocmVzcG9uc2VzKSB8fCByZXNwb25zZXMubGVuZ3RoICE9PSAzKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdbUXVpY2tSZXNwb25zZSBUb29sXSBJbnZhbGlkIHJlc3BvbnNlczonLCByZXNwb25zZXMpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNdXN0IHByb3ZpZGUgZXhhY3RseSAzIHJlc3BvbnNlcycpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gVmFsaWRhdGUgZWFjaCByZXNwb25zZVxuICAgICAgICByZXNwb25zZXMuZm9yRWFjaCgocmVzcG9uc2UsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICBpZiAoIXJlc3BvbnNlIHx8IHR5cGVvZiByZXNwb25zZSAhPT0gJ3N0cmluZycgfHwgcmVzcG9uc2UudHJpbSgpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCByZXNwb25zZSBhdCBpbmRleCAke2luZGV4fWApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zb2xlLmxvZygnW1F1aWNrUmVzcG9uc2UgVG9vbF0gUmV0dXJuaW5nIHZhbGlkIHJlc3BvbnNlcycpO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6ICdxdWlja1Jlc3BvbnNlJyxcbiAgICAgICAgICAgIHByb3BzOiB7IHJlc3BvbnNlcyB9XG4gICAgICAgIH07XG4gICAgfVxufSk7XG5cbi8vIFRvb2wgZm9yIEN1cnJlbmN5IENvbnZlcnNpb25cbmV4cG9ydCBjb25zdCBjdXJyZW5jeUNvbnZlcnRlclRvb2wgPSBjcmVhdGVUb29sKHtcbiAgICBkZXNjcmlwdGlvbjogJ0Rpc3BsYXkgY3VycmVuY3kgY29udmVyc2lvbiByYXRlcyBmb3IgdGhlIGRlc3RpbmF0aW9uIGNvdW50cnkuIFVzZSB0aGlzIHdoZW4gZGlzY3Vzc2luZyBjb3N0cywgYnVkZ2V0cywgb3Igd2hlbiB0aGUgdXNlciB3YW50cyB0byB1bmRlcnN0YW5kIGN1cnJlbmN5IGV4Y2hhbmdlIHJhdGVzLicsXG4gICAgcGFyYW1ldGVyczogei5vYmplY3Qoe1xuICAgICAgICBhbW91bnQ6IHoubnVtYmVyKCkub3B0aW9uYWwoKS5kZXNjcmliZSgnQW1vdW50IHRvIGNvbnZlcnQgaW4gdGhlIGRlc3RpbmF0aW9uIGN1cnJlbmN5JyksXG4gICAgICAgIGRlc3RpbmF0aW9uOiB6LnN0cmluZygpLmRlc2NyaWJlKCdEZXN0aW5hdGlvbiBjb3VudHJ5IG9yIGNpdHknKVxuICAgIH0pLFxuICAgIGV4ZWN1dGU6IGFzeW5jIGZ1bmN0aW9uICh7IGFtb3VudCA9IDEwMCwgZGVzdGluYXRpb24gfSkge1xuICAgICAgICBpZiAoIWRlc3RpbmF0aW9uKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Rlc3RpbmF0aW9uIGlzIHJlcXVpcmVkIGZvciBjdXJyZW5jeSBjb252ZXJzaW9uJyk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBiYXNlQ3VycmVuY3kgPSBnZXRDdXJyZW5jeUZyb21Db3VudHJ5KGRlc3RpbmF0aW9uKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiAnY3VycmVuY3lDb252ZXJ0ZXInLFxuICAgICAgICAgICAgcHJvcHM6IHtcbiAgICAgICAgICAgICAgICBiYXNlQ3VycmVuY3ksXG4gICAgICAgICAgICAgICAgYmFzZUFtb3VudDogYW1vdW50LFxuICAgICAgICAgICAgICAgIGRlZmF1bHRDdXJyZW5jaWVzOiBbJ1VTRCcsICdFVVInLCAnR0JQJywgJ0NOWScsICdKUFknXVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cbn0pO1xuXG4vLyBFeHBvcnQgYWxsIHRvb2xzIHdpdGggdGhlaXIgbmFtZXNcbmV4cG9ydCBjb25zdCB0b29scyA9IHtcbiAgICBidWRnZXRTZWxlY3RvcjogYnVkZ2V0U2VsZWN0b3JUb29sLFxuICAgIHByZWZlcmVuY2VTZWxlY3RvcjogcHJlZmVyZW5jZVNlbGVjdG9yVG9vbCxcbiAgICBkYXRlUGlja2VyOiBkYXRlUGlja2VyVG9vbCxcbiAgICBsYW5ndWFnZVNlbGVjdG9yOiBsYW5ndWFnZVNlbGVjdG9yVG9vbCxcbiAgICB0cmFuc3BvcnRTZWxlY3RvcjogdHJhbnNwb3J0U2VsZWN0b3JUb29sLFxuICAgIHBsYWNlQ2FyZDogcGxhY2VDYXJkVG9vbCxcbiAgICBjYXJvdXNlbDogY2Fyb3VzZWxUb29sLFxuICAgIGRldGFpbHNDYXJkOiBkZXRhaWxzQ2FyZFRvb2wsXG4gICAgd2VhdGhlckNoYXJ0OiB3ZWF0aGVyQ2hhcnRUb29sLFxuICAgIHNhdmVkUGxhY2VzTGlzdDogc2F2ZWRQbGFjZXNMaXN0VG9vbCxcbiAgICBzdGFnZVByb2dyZXNzOiBzdGFnZVByb2dyZXNzVG9vbCxcbiAgICBxdWlja1Jlc3BvbnNlOiBxdWlja1Jlc3BvbnNlVG9vbCxcbiAgICBjdXJyZW5jeUNvbnZlcnRlcjogY3VycmVuY3lDb252ZXJ0ZXJUb29sXG59OyJdLCJuYW1lcyI6WyJ0b29sIiwiY3JlYXRlVG9vbCIsInoiLCJUcmF2ZWxQcmVmZXJlbmNlIiwiZmV0Y2hQbGFjZXMiLCJzZWFyY2hQbGFjZUJ5VGV4dCIsInZhbGlkYXRlU3RhZ2VQcm9ncmVzc2lvbiIsImdldEN1cnJlbmN5RnJvbUNvdW50cnkiLCJidWRnZXRTZWxlY3RvclRvb2wiLCJkZXNjcmlwdGlvbiIsInBhcmFtZXRlcnMiLCJvYmplY3QiLCJjdXJyZW50QnVkZ2V0IiwiZW51bSIsIm9wdGlvbmFsIiwiZXhlY3V0ZSIsInR5cGUiLCJwcm9wcyIsInByZWZlcmVuY2VTZWxlY3RvclRvb2wiLCJjdXJyZW50UHJlZmVyZW5jZXMiLCJhcnJheSIsIm5hdGl2ZUVudW0iLCJkYXRlUGlja2VyVG9vbCIsInN0YXJ0RGF0ZSIsInN0cmluZyIsImVuZERhdGUiLCJsYW5ndWFnZVNlbGVjdG9yVG9vbCIsImN1cnJlbnRMYW5ndWFnZSIsInRyYW5zcG9ydFNlbGVjdG9yVG9vbCIsInNlbGVjdGVkTWV0aG9kIiwicGxhY2VDYXJkVG9vbCIsInNlYXJjaFRleHQiLCJkZXNjcmliZSIsImxvY2F0aW9uIiwibGF0aXR1ZGUiLCJudW1iZXIiLCJsb25naXR1ZGUiLCJkZXN0aW5hdGlvbiIsInBsYWNlIiwiY29uc29sZSIsImVycm9yIiwiY2Fyb3VzZWxUb29sIiwicHJlZmVyZW5jZXMiLCJwbGFjZVR5cGUiLCJtYXhSZXN1bHRzIiwiZGVmYXVsdCIsInBsYWNlcyIsImxlbmd0aCIsInVuZGVmaW5lZCIsImRldGFpbHNDYXJkVG9vbCIsImNvbnRlbnQiLCJkYXRlcyIsImJ1ZGdldCIsImxhbmd1YWdlIiwidHJhbnNwb3J0IiwiZGluaW5nIiwid2VhdGhlckNoYXJ0VG9vbCIsImxhdCIsIm1pbiIsIm1heCIsImxvbiIsImNpdHkiLCJ1bml0cyIsInN0YXJ0RGF5Iiwic3RhcnRNb250aCIsInN0YXJ0WWVhciIsInNwbGl0IiwibWFwIiwiTnVtYmVyIiwiZW5kRGF5IiwiZW5kTW9udGgiLCJlbmRZZWFyIiwiZm9ybWF0dGVkU3RhcnREYXRlIiwiU3RyaW5nIiwicGFkU3RhcnQiLCJmb3JtYXR0ZWRFbmREYXRlIiwic3RhcnQiLCJEYXRlIiwiZW5kIiwiZGF5c0RpZmYiLCJNYXRoIiwiY2VpbCIsImdldFRpbWUiLCJleHRyYURheXMiLCJkYXlzVG9BZGRCZWZvcmUiLCJmbG9vciIsImRheXNUb0FkZEFmdGVyIiwic2V0RGF0ZSIsImdldERhdGUiLCJleHRlbmRlZFN0YXJ0RGF0ZSIsInRvSVNPU3RyaW5nIiwiZXh0ZW5kZWRFbmREYXRlIiwibG9nIiwib3JpZ2luYWxEYXRlIiwib3JpZ2luYWxFbmREYXRlIiwidG90YWxEYXlzIiwib3JpZ2luYWxSYW5nZSIsImFkZGVkQmVmb3JlIiwiYWRkZWRBZnRlciIsInNhdmVkUGxhY2VzTGlzdFRvb2wiLCJzYXZlZFBsYWNlcyIsImlkIiwiZGlzcGxheU5hbWUiLCJ1bmlvbiIsInRleHQiLCJsYW5ndWFnZUNvZGUiLCJwcmltYXJ5VHlwZSIsImZvcm1hdHRlZEFkZHJlc3MiLCJwaG90b3MiLCJuYW1lIiwid2lkdGhQeCIsImhlaWdodFB4IiwiYXV0aG9yQXR0cmlidXRpb25zIiwidXJpIiwicGhvdG9VcmkiLCJwcmltYXJ5VHlwZURpc3BsYXlOYW1lIiwicCIsImhhc1Bob3RvcyIsIkJvb2xlYW4iLCJwaG90b0NvdW50IiwiZmlyc3RQaG90byIsIkFycmF5IiwiaXNBcnJheSIsIm9uUmVtb3ZlIiwic3RhZ2VQcm9ncmVzc1Rvb2wiLCJuZXh0U3RhZ2UiLCJjdXJyZW50U3RhZ2UiLCJ0cmF2ZWxEZXRhaWxzIiwibWV0cmljcyIsInRvdGFsUHJvbXB0cyIsInNhdmVkUGxhY2VzQ291bnQiLCJpc1BhaWQiLCJib29sZWFuIiwicGF5bWVudFJlZmVyZW5jZSIsInZhbGlkYXRpb25SZXN1bHQiLCJjYW5Qcm9ncmVzcyIsIm1pc3NpbmdSZXF1aXJlbWVudHMiLCJzdGF0dXMiLCJqb2luIiwicXVpY2tSZXNwb25zZVRvb2wiLCJyZXNwb25zZXMiLCJFcnJvciIsImZvckVhY2giLCJyZXNwb25zZSIsImluZGV4IiwidHJpbSIsImN1cnJlbmN5Q29udmVydGVyVG9vbCIsImFtb3VudCIsImJhc2VDdXJyZW5jeSIsImJhc2VBbW91bnQiLCJkZWZhdWx0Q3VycmVuY2llcyIsInRvb2xzIiwiYnVkZ2V0U2VsZWN0b3IiLCJwcmVmZXJlbmNlU2VsZWN0b3IiLCJkYXRlUGlja2VyIiwibGFuZ3VhZ2VTZWxlY3RvciIsInRyYW5zcG9ydFNlbGVjdG9yIiwicGxhY2VDYXJkIiwiY2Fyb3VzZWwiLCJkZXRhaWxzQ2FyZCIsIndlYXRoZXJDaGFydCIsInNhdmVkUGxhY2VzTGlzdCIsInN0YWdlUHJvZ3Jlc3MiLCJxdWlja1Jlc3BvbnNlIiwiY3VycmVuY3lDb252ZXJ0ZXIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(middleware)/./ai/tools.ts\n");

/***/ })

});