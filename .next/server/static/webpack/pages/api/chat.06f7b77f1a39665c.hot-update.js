"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("pages/api/chat",{

/***/ "(middleware)/./ai/tools.ts":
/*!*********************!*\
  !*** ./ai/tools.ts ***!
  \*********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   budgetSelectorTool: () => (/* binding */ budgetSelectorTool),\n/* harmony export */   carouselTool: () => (/* binding */ carouselTool),\n/* harmony export */   datePickerTool: () => (/* binding */ datePickerTool),\n/* harmony export */   detailsCardTool: () => (/* binding */ detailsCardTool),\n/* harmony export */   languageSelectorTool: () => (/* binding */ languageSelectorTool),\n/* harmony export */   placeCardTool: () => (/* binding */ placeCardTool),\n/* harmony export */   preferenceSelectorTool: () => (/* binding */ preferenceSelectorTool),\n/* harmony export */   tools: () => (/* binding */ tools),\n/* harmony export */   transportSelectorTool: () => (/* binding */ transportSelectorTool),\n/* harmony export */   weatherChartTool: () => (/* binding */ weatherChartTool)\n/* harmony export */ });\n/* harmony import */ var ai__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ai */ \"(middleware)/./node_modules/ai/dist/index.mjs\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! zod */ \"(middleware)/./node_modules/zod/lib/index.mjs\");\n/* harmony import */ var _utils_places_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/places-utils */ \"(middleware)/./utils/places-utils.ts\");\n\n\n\n// Tool for Budget Selection\nconst budgetSelectorTool = (0,ai__WEBPACK_IMPORTED_MODULE_1__.tool)({\n    description: \"Display budget level options for the trip. Use this when discussing trip costs or when the user wants to set their budget preference.\",\n    parameters: zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n        currentBudget: zod__WEBPACK_IMPORTED_MODULE_2__.z.enum([\n            \"$\",\n            \"$$\",\n            \"$$$\",\n            \"$$$$\"\n        ]).optional()\n    }),\n    execute: async function({ currentBudget }) {\n        return {\n            type: \"budgetSelector\",\n            props: {\n                currentBudget\n            }\n        };\n    }\n});\n// Tool for Travel Preferences\nconst preferenceSelectorTool = (0,ai__WEBPACK_IMPORTED_MODULE_1__.tool)({\n    description: \"Display options for selecting travel preferences and interests.\",\n    parameters: zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n        currentPreferences: zod__WEBPACK_IMPORTED_MODULE_2__.z.array(zod__WEBPACK_IMPORTED_MODULE_2__.z.enum([\n            \"Culture and Heritage\",\n            \"Nature\",\n            \"Foodie\",\n            \"Leisure\",\n            \"Adventure\",\n            \"Arts and Museums\"\n        ])).optional()\n    }),\n    execute: async function({ currentPreferences }) {\n        return {\n            type: \"preferenceSelector\",\n            props: {\n                currentPreferences\n            }\n        };\n    }\n});\n// Tool for Date Selection\nconst datePickerTool = (0,ai__WEBPACK_IMPORTED_MODULE_1__.tool)({\n    description: \"Display a date picker for selecting travel dates.\",\n    parameters: zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n        startDate: zod__WEBPACK_IMPORTED_MODULE_2__.z.string().optional(),\n        endDate: zod__WEBPACK_IMPORTED_MODULE_2__.z.string().optional()\n    }),\n    execute: async function({ startDate, endDate }) {\n        return {\n            type: \"datePicker\",\n            props: {\n                dates: {\n                    startDate,\n                    endDate\n                }\n            }\n        };\n    }\n});\n// Tool for Language Selection\nconst languageSelectorTool = (0,ai__WEBPACK_IMPORTED_MODULE_1__.tool)({\n    description: \"Display language selection options.\",\n    parameters: zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n        currentLanguage: zod__WEBPACK_IMPORTED_MODULE_2__.z.string().optional()\n    }),\n    execute: async function({ currentLanguage }) {\n        return {\n            type: \"languageSelector\",\n            props: {\n                currentLanguage: currentLanguage\n            }\n        };\n    }\n});\n// Tool for Transport Selection\nconst transportSelectorTool = (0,ai__WEBPACK_IMPORTED_MODULE_1__.tool)({\n    description: \"Display transport method selection options. Use this when discussing transportation options for the trip, such as flights, trains, or car rentals.\",\n    parameters: zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n        selectedMethod: zod__WEBPACK_IMPORTED_MODULE_2__.z.string().optional()\n    }),\n    execute: async function({ selectedMethod }) {\n        return {\n            type: \"transportSelector\",\n            props: {\n                selectedMethod\n            }\n        };\n    }\n});\n// Tool for Place Display\nconst placeCardTool = (0,ai__WEBPACK_IMPORTED_MODULE_1__.tool)({\n    description: 'Display information about one specific place. Use this whenever the user explicitly asks for ONE place, whether by name or type (e.g., \"show me one theatre\", \"show me one restaurant\", \"show me The Little Mermaid statue\").',\n    parameters: zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n        searchText: zod__WEBPACK_IMPORTED_MODULE_2__.z.string().describe(\"The name or description of the place to search for\"),\n        location: zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n            latitude: zod__WEBPACK_IMPORTED_MODULE_2__.z.number(),\n            longitude: zod__WEBPACK_IMPORTED_MODULE_2__.z.number()\n        })\n    }),\n    execute: async function({ searchText, location }) {\n        try {\n            const place = await (0,_utils_places_utils__WEBPACK_IMPORTED_MODULE_0__.searchPlaceByText)(searchText, location);\n            if (!place) {\n                console.error(\"No place found for search text:\", searchText);\n                return {\n                    type: \"placeCard\",\n                    props: {\n                        place: null,\n                        showActions: false\n                    }\n                };\n            }\n            return {\n                type: \"placeCard\",\n                props: {\n                    place,\n                    showActions: false\n                }\n            };\n        } catch (error) {\n            console.error(\"Error searching for place:\", error);\n            return {\n                type: \"placeCard\",\n                props: {\n                    place: null,\n                    showActions: false\n                }\n            };\n        }\n    }\n});\n// Tool for Place Carousel\nconst carouselTool = (0,ai__WEBPACK_IMPORTED_MODULE_1__.tool)({\n    description: 'Display multiple places in a carousel. Use this when the user wants to search for multiple places (e.g., \"show me cafes\", \"show me museums near me\", \"find restaurants\").',\n    parameters: zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n        searchText: zod__WEBPACK_IMPORTED_MODULE_2__.z.string().describe('The search query for places (e.g., \"cafes\", \"museums\", \"restaurants\")'),\n        location: zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n            latitude: zod__WEBPACK_IMPORTED_MODULE_2__.z.number(),\n            longitude: zod__WEBPACK_IMPORTED_MODULE_2__.z.number()\n        }),\n        maxResults: zod__WEBPACK_IMPORTED_MODULE_2__.z.number().optional().default(5)\n    }),\n    execute: async function({ searchText, location, maxResults }) {\n        try {\n            const places = await (0,_utils_places_utils__WEBPACK_IMPORTED_MODULE_0__.searchMultiplePlacesByText)(searchText, location, maxResults);\n            if (!places || places.length === 0) {\n                console.error(\"No places found for search:\", {\n                    searchText\n                });\n                return {\n                    type: \"carousel\",\n                    props: {\n                        places: []\n                    }\n                };\n            }\n            return {\n                type: \"carousel\",\n                props: {\n                    places\n                }\n            };\n        } catch (error) {\n            console.error(\"Error searching places for carousel:\", error);\n            return {\n                type: \"carousel\",\n                props: {\n                    places: []\n                }\n            };\n        }\n    }\n});\n// Tool for Details Card\nconst detailsCardTool = (0,ai__WEBPACK_IMPORTED_MODULE_1__.tool)({\n    description: \"Display travel details summary. Use this when the user wants to view a summary of their trip details, including destination, dates, preferences, budget, and more.\",\n    parameters: zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n        content: zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n            destination: zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n            dates: zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n                startDate: zod__WEBPACK_IMPORTED_MODULE_2__.z.string(),\n                endDate: zod__WEBPACK_IMPORTED_MODULE_2__.z.string()\n            }).optional(),\n            preferences: zod__WEBPACK_IMPORTED_MODULE_2__.z.array(zod__WEBPACK_IMPORTED_MODULE_2__.z.string()).optional(),\n            budget: zod__WEBPACK_IMPORTED_MODULE_2__.z.string().optional(),\n            language: zod__WEBPACK_IMPORTED_MODULE_2__.z.string().optional(),\n            transport: zod__WEBPACK_IMPORTED_MODULE_2__.z.array(zod__WEBPACK_IMPORTED_MODULE_2__.z.string()).optional(),\n            dining: zod__WEBPACK_IMPORTED_MODULE_2__.z.array(zod__WEBPACK_IMPORTED_MODULE_2__.z.string()).optional()\n        })\n    }),\n    execute: async function({ content }) {\n        return {\n            type: \"detailsCard\",\n            props: {\n                content\n            }\n        };\n    }\n});\n// Tool for Weather Chart\nconst weatherChartTool = (0,ai__WEBPACK_IMPORTED_MODULE_1__.tool)({\n    description: \"Display historical weather data including temperature and precipitation for a location. Since we cannot provide future weather data, we will show historical data from the same month last year. For example, if a user asks about December 2024, we will show data from December 2023. Use this when discussing weather patterns or climate for a destination.\",\n    parameters: zod__WEBPACK_IMPORTED_MODULE_2__.z.object({\n        lat: zod__WEBPACK_IMPORTED_MODULE_2__.z.number().min(-90).max(90).describe(\"Latitude of the location\"),\n        lon: zod__WEBPACK_IMPORTED_MODULE_2__.z.number().min(-180).max(180).describe(\"Longitude of the location\"),\n        targetMonth: zod__WEBPACK_IMPORTED_MODULE_2__.z.number().min(1).max(12).describe(\"Target month (1-12)\"),\n        units: zod__WEBPACK_IMPORTED_MODULE_2__.z.enum([\n            \"standard\",\n            \"metric\",\n            \"imperial\"\n        ]).optional().default(\"metric\")\n    }),\n    execute: async function({ lat, lon, targetMonth, units = \"metric\" }) {\n        // Calculate date range for the same month last year\n        const now = new Date(\"2024-12-11T03:04:40+08:00\"); // Use provided time\n        const lastYear = now.getFullYear() - 1;\n        const startDate = new Date(lastYear, targetMonth - 1, 1);\n        const endDate = new Date(lastYear, targetMonth, 0); // Last day of the month\n        console.log(\"[weatherChartTool] Fetching weather data:\", {\n            lat,\n            lon,\n            targetMonth,\n            units,\n            startDate: startDate.toISOString(),\n            endDate: endDate.toISOString()\n        });\n        // Format dates in YYYY-MM-DD format as required by the API\n        const formattedStartDate = startDate.toISOString().split(\"T\")[0];\n        const formattedEndDate = endDate.toISOString().split(\"T\")[0];\n        // Fetch weather data\n        const baseUrl =  true ? process.env.NEXT_PUBLIC_BASE_URL || \"http://localhost:3000\" : 0;\n        const url = `${baseUrl}/api/weather/historical?lat=${lat.toFixed(6)}&lon=${lon.toFixed(6)}&startDate=${formattedStartDate}&endDate=${formattedEndDate}&units=${units}`;\n        console.log(\"[weatherChartTool] API URL:\", url);\n        try {\n            const response = await fetch(url);\n            console.log(\"[weatherChartTool] API response status:\", response.status);\n            if (!response.ok) {\n                const errorText = await response.text();\n                console.error(\"[weatherChartTool] API error:\", errorText);\n                throw new Error(`Failed to fetch weather data: ${response.statusText}`);\n            }\n            const weatherData = await response.json();\n            console.log(\"[weatherChartTool] Weather data:\", weatherData);\n            return {\n                type: \"weatherChart\",\n                props: {\n                    lat,\n                    lon,\n                    units,\n                    initialData: weatherData\n                }\n            };\n        } catch (error) {\n            console.error(\"[weatherChartTool] Error:\", error);\n            throw error;\n        }\n    }\n});\n// Export all tools with their names\nconst tools = {\n    budgetSelector: budgetSelectorTool,\n    preferenceSelector: preferenceSelectorTool,\n    datePicker: datePickerTool,\n    languageSelector: languageSelectorTool,\n    transportSelector: transportSelectorTool,\n    placeCard: placeCardTool,\n    carousel: carouselTool,\n    detailsCard: detailsCardTool,\n    weatherChart: weatherChartTool\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKG1pZGRsZXdhcmUpLy4vYWkvdG9vbHMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQUF3QztBQUNoQjtBQVdPO0FBZ0IvQiw0QkFBNEI7QUFDckIsTUFBTUsscUJBQXFCSix3Q0FBVUEsQ0FBQztJQUN6Q0ssYUFBYTtJQUNiQyxZQUFZTCxrQ0FBQ0EsQ0FBQ00sTUFBTSxDQUFDO1FBQ2pCQyxlQUFlUCxrQ0FBQ0EsQ0FBQ1EsSUFBSSxDQUFDO1lBQUM7WUFBSztZQUFNO1lBQU87U0FBTyxFQUFXQyxRQUFRO0lBQ3ZFO0lBQ0FDLFNBQVMsZUFBZ0IsRUFBRUgsYUFBYSxFQUFFO1FBQ3RDLE9BQU87WUFDSEksTUFBTTtZQUNOQyxPQUFPO2dCQUNITDtZQUNKO1FBQ0o7SUFDSjtBQUNKLEdBQUc7QUFFSCw4QkFBOEI7QUFDdkIsTUFBTU0seUJBQXlCZCx3Q0FBVUEsQ0FBQztJQUM3Q0ssYUFBYTtJQUNiQyxZQUFZTCxrQ0FBQ0EsQ0FBQ00sTUFBTSxDQUFDO1FBQ2pCUSxvQkFBb0JkLGtDQUFDQSxDQUFDZSxLQUFLLENBQUNmLGtDQUFDQSxDQUFDUSxJQUFJLENBQUM7WUFDL0I7WUFDQTtZQUNBO1lBQ0E7WUFDQTtZQUNBO1NBQ0gsR0FBWUMsUUFBUTtJQUN6QjtJQUNBQyxTQUFTLGVBQWdCLEVBQUVJLGtCQUFrQixFQUFFO1FBQzNDLE9BQU87WUFDSEgsTUFBTTtZQUNOQyxPQUFPO2dCQUNIRTtZQUNKO1FBQ0o7SUFDSjtBQUNKLEdBQUc7QUFFSCwwQkFBMEI7QUFDbkIsTUFBTUUsaUJBQWlCakIsd0NBQVVBLENBQUM7SUFDckNLLGFBQWE7SUFDYkMsWUFBWUwsa0NBQUNBLENBQUNNLE1BQU0sQ0FBQztRQUNqQlcsV0FBV2pCLGtDQUFDQSxDQUFDa0IsTUFBTSxHQUFHVCxRQUFRO1FBQzlCVSxTQUFTbkIsa0NBQUNBLENBQUNrQixNQUFNLEdBQUdULFFBQVE7SUFDaEM7SUFDQUMsU0FBUyxlQUFnQixFQUFFTyxTQUFTLEVBQUVFLE9BQU8sRUFBRTtRQUMzQyxPQUFPO1lBQ0hSLE1BQU07WUFDTkMsT0FBTztnQkFDSFEsT0FBTztvQkFDSEg7b0JBQ0FFO2dCQUNKO1lBQ0o7UUFDSjtJQUNKO0FBQ0osR0FBRztBQUVILDhCQUE4QjtBQUN2QixNQUFNRSx1QkFBdUJ0Qix3Q0FBVUEsQ0FBQztJQUMzQ0ssYUFBYTtJQUNiQyxZQUFZTCxrQ0FBQ0EsQ0FBQ00sTUFBTSxDQUFDO1FBQ2pCZ0IsaUJBQWlCdEIsa0NBQUNBLENBQUNrQixNQUFNLEdBQUdULFFBQVE7SUFDeEM7SUFDQUMsU0FBUyxlQUFnQixFQUFFWSxlQUFlLEVBQUU7UUFDeEMsT0FBTztZQUNIWCxNQUFNO1lBQ05DLE9BQU87Z0JBQ0hVLGlCQUFpQkE7WUFDckI7UUFDSjtJQUNKO0FBQ0osR0FBRztBQUVILCtCQUErQjtBQUN4QixNQUFNQyx3QkFBd0J4Qix3Q0FBVUEsQ0FBQztJQUM1Q0ssYUFBYTtJQUNiQyxZQUFZTCxrQ0FBQ0EsQ0FBQ00sTUFBTSxDQUFDO1FBQ2pCa0IsZ0JBQWdCeEIsa0NBQUNBLENBQUNrQixNQUFNLEdBQUdULFFBQVE7SUFDdkM7SUFDQUMsU0FBUyxlQUFnQixFQUFFYyxjQUFjLEVBQUU7UUFDdkMsT0FBTztZQUNIYixNQUFNO1lBQ05DLE9BQU87Z0JBQUVZO1lBQWU7UUFDNUI7SUFDSjtBQUNKLEdBQUc7QUFFSCx5QkFBeUI7QUFDbEIsTUFBTUMsZ0JBQWdCMUIsd0NBQVVBLENBQUM7SUFDcENLLGFBQWE7SUFDYkMsWUFBWUwsa0NBQUNBLENBQUNNLE1BQU0sQ0FBQztRQUNqQm9CLFlBQVkxQixrQ0FBQ0EsQ0FBQ2tCLE1BQU0sR0FBR1MsUUFBUSxDQUFDO1FBQ2hDQyxVQUFVNUIsa0NBQUNBLENBQUNNLE1BQU0sQ0FBQztZQUNmdUIsVUFBVTdCLGtDQUFDQSxDQUFDOEIsTUFBTTtZQUNsQkMsV0FBVy9CLGtDQUFDQSxDQUFDOEIsTUFBTTtRQUN2QjtJQUNKO0lBQ0FwQixTQUFTLGVBQWdCLEVBQUVnQixVQUFVLEVBQUVFLFFBQVEsRUFBRTtRQUM3QyxJQUFJO1lBQ0EsTUFBTUksUUFBUSxNQUFNL0Isc0VBQWlCQSxDQUFDeUIsWUFBWUU7WUFFbEQsSUFBSSxDQUFDSSxPQUFPO2dCQUNSQyxRQUFRQyxLQUFLLENBQUMsbUNBQW1DUjtnQkFDakQsT0FBTztvQkFDSGYsTUFBTTtvQkFDTkMsT0FBTzt3QkFBRW9CLE9BQU87d0JBQU1HLGFBQWE7b0JBQU07Z0JBQzdDO1lBQ0o7WUFFQSxPQUFPO2dCQUNIeEIsTUFBTTtnQkFDTkMsT0FBTztvQkFDSG9CO29CQUNBRyxhQUFhO2dCQUNqQjtZQUNKO1FBQ0osRUFBRSxPQUFPRCxPQUFPO1lBQ1pELFFBQVFDLEtBQUssQ0FBQyw4QkFBOEJBO1lBQzVDLE9BQU87Z0JBQ0h2QixNQUFNO2dCQUNOQyxPQUFPO29CQUFFb0IsT0FBTztvQkFBTUcsYUFBYTtnQkFBTTtZQUM3QztRQUNKO0lBQ0o7QUFDSixHQUFHO0FBRUgsMEJBQTBCO0FBQ25CLE1BQU1DLGVBQWVyQyx3Q0FBVUEsQ0FBQztJQUNuQ0ssYUFBYTtJQUNiQyxZQUFZTCxrQ0FBQ0EsQ0FBQ00sTUFBTSxDQUFDO1FBQ2pCb0IsWUFBWTFCLGtDQUFDQSxDQUFDa0IsTUFBTSxHQUFHUyxRQUFRLENBQUM7UUFDaENDLFVBQVU1QixrQ0FBQ0EsQ0FBQ00sTUFBTSxDQUFDO1lBQ2Z1QixVQUFVN0Isa0NBQUNBLENBQUM4QixNQUFNO1lBQ2xCQyxXQUFXL0Isa0NBQUNBLENBQUM4QixNQUFNO1FBQ3ZCO1FBQ0FPLFlBQVlyQyxrQ0FBQ0EsQ0FBQzhCLE1BQU0sR0FBR3JCLFFBQVEsR0FBRzZCLE9BQU8sQ0FBQztJQUM5QztJQUNBNUIsU0FBUyxlQUFnQixFQUFFZ0IsVUFBVSxFQUFFRSxRQUFRLEVBQUVTLFVBQVUsRUFBRTtRQUN6RCxJQUFJO1lBQ0EsTUFBTUUsU0FBUyxNQUFNckMsK0VBQTBCQSxDQUMzQ3dCLFlBQ0FFLFVBQ0FTO1lBR0osSUFBSSxDQUFDRSxVQUFVQSxPQUFPQyxNQUFNLEtBQUssR0FBRztnQkFDaENQLFFBQVFDLEtBQUssQ0FBQywrQkFBK0I7b0JBQUVSO2dCQUFXO2dCQUMxRCxPQUFPO29CQUNIZixNQUFNO29CQUNOQyxPQUFPO3dCQUFFMkIsUUFBUSxFQUFFO29CQUFDO2dCQUN4QjtZQUNKO1lBRUEsT0FBTztnQkFDSDVCLE1BQU07Z0JBQ05DLE9BQU87b0JBQUUyQjtnQkFBTztZQUNwQjtRQUNKLEVBQUUsT0FBT0wsT0FBTztZQUNaRCxRQUFRQyxLQUFLLENBQUMsd0NBQXdDQTtZQUN0RCxPQUFPO2dCQUNIdkIsTUFBTTtnQkFDTkMsT0FBTztvQkFBRTJCLFFBQVEsRUFBRTtnQkFBQztZQUN4QjtRQUNKO0lBQ0o7QUFDSixHQUFHO0FBRUgsd0JBQXdCO0FBQ2pCLE1BQU1FLGtCQUFrQjFDLHdDQUFVQSxDQUFDO0lBQ3RDSyxhQUFhO0lBQ2JDLFlBQVlMLGtDQUFDQSxDQUFDTSxNQUFNLENBQUM7UUFDakJvQyxTQUFTMUMsa0NBQUNBLENBQUNNLE1BQU0sQ0FBQztZQUNkcUMsYUFBYTNDLGtDQUFDQSxDQUFDa0IsTUFBTTtZQUNyQkUsT0FBT3BCLGtDQUFDQSxDQUFDTSxNQUFNLENBQUM7Z0JBQ1pXLFdBQVdqQixrQ0FBQ0EsQ0FBQ2tCLE1BQU07Z0JBQ25CQyxTQUFTbkIsa0NBQUNBLENBQUNrQixNQUFNO1lBQ3JCLEdBQUdULFFBQVE7WUFDWG1DLGFBQWE1QyxrQ0FBQ0EsQ0FBQ2UsS0FBSyxDQUFDZixrQ0FBQ0EsQ0FBQ2tCLE1BQU0sSUFBSVQsUUFBUTtZQUN6Q29DLFFBQVE3QyxrQ0FBQ0EsQ0FBQ2tCLE1BQU0sR0FBR1QsUUFBUTtZQUMzQnFDLFVBQVU5QyxrQ0FBQ0EsQ0FBQ2tCLE1BQU0sR0FBR1QsUUFBUTtZQUM3QnNDLFdBQVcvQyxrQ0FBQ0EsQ0FBQ2UsS0FBSyxDQUFDZixrQ0FBQ0EsQ0FBQ2tCLE1BQU0sSUFBSVQsUUFBUTtZQUN2Q3VDLFFBQVFoRCxrQ0FBQ0EsQ0FBQ2UsS0FBSyxDQUFDZixrQ0FBQ0EsQ0FBQ2tCLE1BQU0sSUFBSVQsUUFBUTtRQUN4QztJQUNKO0lBQ0FDLFNBQVMsZUFBZ0IsRUFBRWdDLE9BQU8sRUFBRTtRQUNoQyxPQUFPO1lBQ0gvQixNQUFNO1lBQ05DLE9BQU87Z0JBQUU4QjtZQUFRO1FBQ3JCO0lBQ0o7QUFDSixHQUFHO0FBRUgseUJBQXlCO0FBQ2xCLE1BQU1PLG1CQUFtQmxELHdDQUFVQSxDQUFDO0lBQ3ZDSyxhQUFhO0lBQ2JDLFlBQVlMLGtDQUFDQSxDQUFDTSxNQUFNLENBQUM7UUFDakI0QyxLQUFLbEQsa0NBQUNBLENBQUM4QixNQUFNLEdBQUdxQixHQUFHLENBQUMsQ0FBQyxJQUFJQyxHQUFHLENBQUMsSUFBSXpCLFFBQVEsQ0FBQztRQUMxQzBCLEtBQUtyRCxrQ0FBQ0EsQ0FBQzhCLE1BQU0sR0FBR3FCLEdBQUcsQ0FBQyxDQUFDLEtBQUtDLEdBQUcsQ0FBQyxLQUFLekIsUUFBUSxDQUFDO1FBQzVDMkIsYUFBYXRELGtDQUFDQSxDQUFDOEIsTUFBTSxHQUFHcUIsR0FBRyxDQUFDLEdBQUdDLEdBQUcsQ0FBQyxJQUFJekIsUUFBUSxDQUFDO1FBQ2hENEIsT0FBT3ZELGtDQUFDQSxDQUFDUSxJQUFJLENBQUM7WUFBQztZQUFZO1lBQVU7U0FBVyxFQUFXQyxRQUFRLEdBQUc2QixPQUFPLENBQUM7SUFDbEY7SUFDQTVCLFNBQVMsZUFBZ0IsRUFBRXdDLEdBQUcsRUFBRUcsR0FBRyxFQUFFQyxXQUFXLEVBQUVDLFFBQVEsUUFBUSxFQUFFO1FBQ2hFLG9EQUFvRDtRQUNwRCxNQUFNQyxNQUFNLElBQUlDLEtBQUssOEJBQThCLG9CQUFvQjtRQUN2RSxNQUFNQyxXQUFXRixJQUFJRyxXQUFXLEtBQUs7UUFDckMsTUFBTTFDLFlBQVksSUFBSXdDLEtBQUtDLFVBQVVKLGNBQWMsR0FBRztRQUN0RCxNQUFNbkMsVUFBVSxJQUFJc0MsS0FBS0MsVUFBVUosYUFBYSxJQUFJLHdCQUF3QjtRQUU1RXJCLFFBQVEyQixHQUFHLENBQUMsNkNBQTZDO1lBQ3JEVjtZQUNBRztZQUNBQztZQUNBQztZQUNBdEMsV0FBV0EsVUFBVTRDLFdBQVc7WUFDaEMxQyxTQUFTQSxRQUFRMEMsV0FBVztRQUNoQztRQUVBLDJEQUEyRDtRQUMzRCxNQUFNQyxxQkFBcUI3QyxVQUFVNEMsV0FBVyxHQUFHRSxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUU7UUFDaEUsTUFBTUMsbUJBQW1CN0MsUUFBUTBDLFdBQVcsR0FBR0UsS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFO1FBRTVELHFCQUFxQjtRQUNyQixNQUFNRSxVQUFVLEtBQWtCLEdBQWNDLFFBQVFDLEdBQUcsQ0FBQ0Msb0JBQW9CLElBQUksMEJBQTBCQyxDQUFzQjtRQUNwSSxNQUFNRSxNQUFNLENBQUMsRUFBRU4sUUFBUSw0QkFBNEIsRUFBRWYsSUFBSXNCLE9BQU8sQ0FBQyxHQUFHLEtBQUssRUFBRW5CLElBQUltQixPQUFPLENBQUMsR0FBRyxXQUFXLEVBQUVWLG1CQUFtQixTQUFTLEVBQUVFLGlCQUFpQixPQUFPLEVBQUVULE1BQU0sQ0FBQztRQUN0S3RCLFFBQVEyQixHQUFHLENBQUMsK0JBQStCVztRQUUzQyxJQUFJO1lBQ0EsTUFBTUUsV0FBVyxNQUFNQyxNQUFNSDtZQUM3QnRDLFFBQVEyQixHQUFHLENBQUMsMkNBQTJDYSxTQUFTRSxNQUFNO1lBRXRFLElBQUksQ0FBQ0YsU0FBU0csRUFBRSxFQUFFO2dCQUNkLE1BQU1DLFlBQVksTUFBTUosU0FBU0ssSUFBSTtnQkFDckM3QyxRQUFRQyxLQUFLLENBQUMsaUNBQWlDMkM7Z0JBQy9DLE1BQU0sSUFBSUUsTUFBTSxDQUFDLDhCQUE4QixFQUFFTixTQUFTTyxVQUFVLENBQUMsQ0FBQztZQUMxRTtZQUVBLE1BQU1DLGNBQWMsTUFBTVIsU0FBU1MsSUFBSTtZQUN2Q2pELFFBQVEyQixHQUFHLENBQUMsb0NBQW9DcUI7WUFFaEQsT0FBTztnQkFDSHRFLE1BQU07Z0JBQ05DLE9BQU87b0JBQ0hzQztvQkFDQUc7b0JBQ0FFO29CQUNBNEIsYUFBYUY7Z0JBQ2pCO1lBQ0o7UUFDSixFQUFFLE9BQU8vQyxPQUFPO1lBQ1pELFFBQVFDLEtBQUssQ0FBQyw2QkFBNkJBO1lBQzNDLE1BQU1BO1FBQ1Y7SUFDSjtBQUNKLEdBQUc7QUFFSCxvQ0FBb0M7QUFDN0IsTUFBTWtELFFBQVE7SUFDakJDLGdCQUFnQmxGO0lBQ2hCbUYsb0JBQW9CekU7SUFDcEIwRSxZQUFZdkU7SUFDWndFLGtCQUFrQm5FO0lBQ2xCb0UsbUJBQW1CbEU7SUFDbkJtRSxXQUFXakU7SUFDWGtFLFVBQVV2RDtJQUNWd0QsYUFBYW5EO0lBQ2JvRCxjQUFjNUM7QUFDbEIsRUFBRSIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9haS90b29scy50cz82NzlkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHRvb2wgYXMgY3JlYXRlVG9vbCB9IGZyb20gJ2FpJztcbmltcG9ydCB7IHogfSBmcm9tICd6b2QnO1xuaW1wb3J0IHsgXG4gICAgVHJhdmVsUHJlZmVyZW5jZSxcbiAgICBCdWRnZXRMZXZlbCxcbiAgICBTdXBwb3J0ZWRMYW5ndWFnZVxufSBmcm9tICcuLi9tYW5hZ2Vycy90eXBlcyc7XG5pbXBvcnQgeyBcbiAgICBmZXRjaFBsYWNlcyxcbiAgICBzZWFyY2hQbGFjZUJ5VGV4dCxcbiAgICBzZWFyY2hNdWx0aXBsZVBsYWNlc0J5VGV4dCxcbiAgICBQbGFjZVxufSBmcm9tICcuLi91dGlscy9wbGFjZXMtdXRpbHMnO1xuXG4vLyBTdGFuZGFyZGl6ZWQgVG9vbCBSZXNwb25zZSBpbnRlcmZhY2VzXG5pbnRlcmZhY2UgVG9vbFJlc3BvbnNlPFQgPSBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPj4ge1xuICAgIHR5cGU6IHN0cmluZztcbiAgICBzdGF0dXM6ICdzdWNjZXNzJyB8ICdlcnJvcicgfCAnZW1wdHknO1xuICAgIHByb3BzOiBUO1xuICAgIGVycm9yPzogc3RyaW5nO1xufVxuXG5cbmludGVyZmFjZSBCYXNlVG9vbFByb3BzIHtcbiAgICBlcnJvcj86IHN0cmluZztcbiAgICBsb2FkaW5nPzogYm9vbGVhbjtcbn1cblxuLy8gVG9vbCBmb3IgQnVkZ2V0IFNlbGVjdGlvblxuZXhwb3J0IGNvbnN0IGJ1ZGdldFNlbGVjdG9yVG9vbCA9IGNyZWF0ZVRvb2woe1xuICAgIGRlc2NyaXB0aW9uOiAnRGlzcGxheSBidWRnZXQgbGV2ZWwgb3B0aW9ucyBmb3IgdGhlIHRyaXAuIFVzZSB0aGlzIHdoZW4gZGlzY3Vzc2luZyB0cmlwIGNvc3RzIG9yIHdoZW4gdGhlIHVzZXIgd2FudHMgdG8gc2V0IHRoZWlyIGJ1ZGdldCBwcmVmZXJlbmNlLicsXG4gICAgcGFyYW1ldGVyczogei5vYmplY3Qoe1xuICAgICAgICBjdXJyZW50QnVkZ2V0OiB6LmVudW0oWyckJywgJyQkJywgJyQkJCcsICckJCQkJ10gYXMgY29uc3QpLm9wdGlvbmFsKClcbiAgICB9KSxcbiAgICBleGVjdXRlOiBhc3luYyBmdW5jdGlvbiAoeyBjdXJyZW50QnVkZ2V0IH0pIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6ICdidWRnZXRTZWxlY3RvcicsXG4gICAgICAgICAgICBwcm9wczoge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRCdWRnZXRcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG59KTtcblxuLy8gVG9vbCBmb3IgVHJhdmVsIFByZWZlcmVuY2VzXG5leHBvcnQgY29uc3QgcHJlZmVyZW5jZVNlbGVjdG9yVG9vbCA9IGNyZWF0ZVRvb2woe1xuICAgIGRlc2NyaXB0aW9uOiAnRGlzcGxheSBvcHRpb25zIGZvciBzZWxlY3RpbmcgdHJhdmVsIHByZWZlcmVuY2VzIGFuZCBpbnRlcmVzdHMuJyxcbiAgICBwYXJhbWV0ZXJzOiB6Lm9iamVjdCh7XG4gICAgICAgIGN1cnJlbnRQcmVmZXJlbmNlczogei5hcnJheSh6LmVudW0oW1xuICAgICAgICAgICAgJ0N1bHR1cmUgYW5kIEhlcml0YWdlJyxcbiAgICAgICAgICAgICdOYXR1cmUnLFxuICAgICAgICAgICAgJ0Zvb2RpZScsXG4gICAgICAgICAgICAnTGVpc3VyZScsXG4gICAgICAgICAgICAnQWR2ZW50dXJlJyxcbiAgICAgICAgICAgICdBcnRzIGFuZCBNdXNldW1zJ1xuICAgICAgICBdIGFzIGNvbnN0KSkub3B0aW9uYWwoKVxuICAgIH0pLFxuICAgIGV4ZWN1dGU6IGFzeW5jIGZ1bmN0aW9uICh7IGN1cnJlbnRQcmVmZXJlbmNlcyB9KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiAncHJlZmVyZW5jZVNlbGVjdG9yJyxcbiAgICAgICAgICAgIHByb3BzOiB7XG4gICAgICAgICAgICAgICAgY3VycmVudFByZWZlcmVuY2VzXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxufSk7XG5cbi8vIFRvb2wgZm9yIERhdGUgU2VsZWN0aW9uXG5leHBvcnQgY29uc3QgZGF0ZVBpY2tlclRvb2wgPSBjcmVhdGVUb29sKHtcbiAgICBkZXNjcmlwdGlvbjogJ0Rpc3BsYXkgYSBkYXRlIHBpY2tlciBmb3Igc2VsZWN0aW5nIHRyYXZlbCBkYXRlcy4nLFxuICAgIHBhcmFtZXRlcnM6IHoub2JqZWN0KHtcbiAgICAgICAgc3RhcnREYXRlOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgIGVuZERhdGU6IHouc3RyaW5nKCkub3B0aW9uYWwoKVxuICAgIH0pLFxuICAgIGV4ZWN1dGU6IGFzeW5jIGZ1bmN0aW9uICh7IHN0YXJ0RGF0ZSwgZW5kRGF0ZSB9KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiAnZGF0ZVBpY2tlcicsXG4gICAgICAgICAgICBwcm9wczoge1xuICAgICAgICAgICAgICAgIGRhdGVzOiB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0RGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgZW5kRGF0ZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG59KTtcblxuLy8gVG9vbCBmb3IgTGFuZ3VhZ2UgU2VsZWN0aW9uXG5leHBvcnQgY29uc3QgbGFuZ3VhZ2VTZWxlY3RvclRvb2wgPSBjcmVhdGVUb29sKHtcbiAgICBkZXNjcmlwdGlvbjogJ0Rpc3BsYXkgbGFuZ3VhZ2Ugc2VsZWN0aW9uIG9wdGlvbnMuJyxcbiAgICBwYXJhbWV0ZXJzOiB6Lm9iamVjdCh7XG4gICAgICAgIGN1cnJlbnRMYW5ndWFnZTogei5zdHJpbmcoKS5vcHRpb25hbCgpXG4gICAgfSksXG4gICAgZXhlY3V0ZTogYXN5bmMgZnVuY3Rpb24gKHsgY3VycmVudExhbmd1YWdlIH0pIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6ICdsYW5ndWFnZVNlbGVjdG9yJyxcbiAgICAgICAgICAgIHByb3BzOiB7XG4gICAgICAgICAgICAgICAgY3VycmVudExhbmd1YWdlOiBjdXJyZW50TGFuZ3VhZ2UgYXMgU3VwcG9ydGVkTGFuZ3VhZ2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG59KTtcblxuLy8gVG9vbCBmb3IgVHJhbnNwb3J0IFNlbGVjdGlvblxuZXhwb3J0IGNvbnN0IHRyYW5zcG9ydFNlbGVjdG9yVG9vbCA9IGNyZWF0ZVRvb2woe1xuICAgIGRlc2NyaXB0aW9uOiAnRGlzcGxheSB0cmFuc3BvcnQgbWV0aG9kIHNlbGVjdGlvbiBvcHRpb25zLiBVc2UgdGhpcyB3aGVuIGRpc2N1c3NpbmcgdHJhbnNwb3J0YXRpb24gb3B0aW9ucyBmb3IgdGhlIHRyaXAsIHN1Y2ggYXMgZmxpZ2h0cywgdHJhaW5zLCBvciBjYXIgcmVudGFscy4nLFxuICAgIHBhcmFtZXRlcnM6IHoub2JqZWN0KHtcbiAgICAgICAgc2VsZWN0ZWRNZXRob2Q6IHouc3RyaW5nKCkub3B0aW9uYWwoKVxuICAgIH0pLFxuICAgIGV4ZWN1dGU6IGFzeW5jIGZ1bmN0aW9uICh7IHNlbGVjdGVkTWV0aG9kIH0pIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6ICd0cmFuc3BvcnRTZWxlY3RvcicsXG4gICAgICAgICAgICBwcm9wczogeyBzZWxlY3RlZE1ldGhvZCB9XG4gICAgICAgIH07XG4gICAgfVxufSk7XG5cbi8vIFRvb2wgZm9yIFBsYWNlIERpc3BsYXlcbmV4cG9ydCBjb25zdCBwbGFjZUNhcmRUb29sID0gY3JlYXRlVG9vbCh7XG4gICAgZGVzY3JpcHRpb246ICdEaXNwbGF5IGluZm9ybWF0aW9uIGFib3V0IG9uZSBzcGVjaWZpYyBwbGFjZS4gVXNlIHRoaXMgd2hlbmV2ZXIgdGhlIHVzZXIgZXhwbGljaXRseSBhc2tzIGZvciBPTkUgcGxhY2UsIHdoZXRoZXIgYnkgbmFtZSBvciB0eXBlIChlLmcuLCBcInNob3cgbWUgb25lIHRoZWF0cmVcIiwgXCJzaG93IG1lIG9uZSByZXN0YXVyYW50XCIsIFwic2hvdyBtZSBUaGUgTGl0dGxlIE1lcm1haWQgc3RhdHVlXCIpLicsXG4gICAgcGFyYW1ldGVyczogei5vYmplY3Qoe1xuICAgICAgICBzZWFyY2hUZXh0OiB6LnN0cmluZygpLmRlc2NyaWJlKCdUaGUgbmFtZSBvciBkZXNjcmlwdGlvbiBvZiB0aGUgcGxhY2UgdG8gc2VhcmNoIGZvcicpLFxuICAgICAgICBsb2NhdGlvbjogei5vYmplY3Qoe1xuICAgICAgICAgICAgbGF0aXR1ZGU6IHoubnVtYmVyKCksXG4gICAgICAgICAgICBsb25naXR1ZGU6IHoubnVtYmVyKClcbiAgICAgICAgfSlcbiAgICB9KSxcbiAgICBleGVjdXRlOiBhc3luYyBmdW5jdGlvbiAoeyBzZWFyY2hUZXh0LCBsb2NhdGlvbiB9KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBwbGFjZSA9IGF3YWl0IHNlYXJjaFBsYWNlQnlUZXh0KHNlYXJjaFRleHQsIGxvY2F0aW9uKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKCFwbGFjZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ05vIHBsYWNlIGZvdW5kIGZvciBzZWFyY2ggdGV4dDonLCBzZWFyY2hUZXh0KTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAncGxhY2VDYXJkJyxcbiAgICAgICAgICAgICAgICAgICAgcHJvcHM6IHsgcGxhY2U6IG51bGwsIHNob3dBY3Rpb25zOiBmYWxzZSB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAncGxhY2VDYXJkJyxcbiAgICAgICAgICAgICAgICBwcm9wczogeyBcbiAgICAgICAgICAgICAgICAgICAgcGxhY2UsXG4gICAgICAgICAgICAgICAgICAgIHNob3dBY3Rpb25zOiBmYWxzZSBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2VhcmNoaW5nIGZvciBwbGFjZTonLCBlcnJvcik7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdwbGFjZUNhcmQnLFxuICAgICAgICAgICAgICAgIHByb3BzOiB7IHBsYWNlOiBudWxsLCBzaG93QWN0aW9uczogZmFsc2UgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH1cbn0pO1xuXG4vLyBUb29sIGZvciBQbGFjZSBDYXJvdXNlbFxuZXhwb3J0IGNvbnN0IGNhcm91c2VsVG9vbCA9IGNyZWF0ZVRvb2woe1xuICAgIGRlc2NyaXB0aW9uOiAnRGlzcGxheSBtdWx0aXBsZSBwbGFjZXMgaW4gYSBjYXJvdXNlbC4gVXNlIHRoaXMgd2hlbiB0aGUgdXNlciB3YW50cyB0byBzZWFyY2ggZm9yIG11bHRpcGxlIHBsYWNlcyAoZS5nLiwgXCJzaG93IG1lIGNhZmVzXCIsIFwic2hvdyBtZSBtdXNldW1zIG5lYXIgbWVcIiwgXCJmaW5kIHJlc3RhdXJhbnRzXCIpLicsXG4gICAgcGFyYW1ldGVyczogei5vYmplY3Qoe1xuICAgICAgICBzZWFyY2hUZXh0OiB6LnN0cmluZygpLmRlc2NyaWJlKCdUaGUgc2VhcmNoIHF1ZXJ5IGZvciBwbGFjZXMgKGUuZy4sIFwiY2FmZXNcIiwgXCJtdXNldW1zXCIsIFwicmVzdGF1cmFudHNcIiknKSxcbiAgICAgICAgbG9jYXRpb246IHoub2JqZWN0KHtcbiAgICAgICAgICAgIGxhdGl0dWRlOiB6Lm51bWJlcigpLFxuICAgICAgICAgICAgbG9uZ2l0dWRlOiB6Lm51bWJlcigpXG4gICAgICAgIH0pLFxuICAgICAgICBtYXhSZXN1bHRzOiB6Lm51bWJlcigpLm9wdGlvbmFsKCkuZGVmYXVsdCg1KVxuICAgIH0pLFxuICAgIGV4ZWN1dGU6IGFzeW5jIGZ1bmN0aW9uICh7IHNlYXJjaFRleHQsIGxvY2F0aW9uLCBtYXhSZXN1bHRzIH0pIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHBsYWNlcyA9IGF3YWl0IHNlYXJjaE11bHRpcGxlUGxhY2VzQnlUZXh0KFxuICAgICAgICAgICAgICAgIHNlYXJjaFRleHQsXG4gICAgICAgICAgICAgICAgbG9jYXRpb24sXG4gICAgICAgICAgICAgICAgbWF4UmVzdWx0c1xuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgaWYgKCFwbGFjZXMgfHwgcGxhY2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ05vIHBsYWNlcyBmb3VuZCBmb3Igc2VhcmNoOicsIHsgc2VhcmNoVGV4dCB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnY2Fyb3VzZWwnLFxuICAgICAgICAgICAgICAgICAgICBwcm9wczogeyBwbGFjZXM6IFtdIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdjYXJvdXNlbCcsXG4gICAgICAgICAgICAgICAgcHJvcHM6IHsgcGxhY2VzIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBzZWFyY2hpbmcgcGxhY2VzIGZvciBjYXJvdXNlbDonLCBlcnJvcik7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdjYXJvdXNlbCcsXG4gICAgICAgICAgICAgICAgcHJvcHM6IHsgcGxhY2VzOiBbXSB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgfVxufSk7XG5cbi8vIFRvb2wgZm9yIERldGFpbHMgQ2FyZFxuZXhwb3J0IGNvbnN0IGRldGFpbHNDYXJkVG9vbCA9IGNyZWF0ZVRvb2woe1xuICAgIGRlc2NyaXB0aW9uOiAnRGlzcGxheSB0cmF2ZWwgZGV0YWlscyBzdW1tYXJ5LiBVc2UgdGhpcyB3aGVuIHRoZSB1c2VyIHdhbnRzIHRvIHZpZXcgYSBzdW1tYXJ5IG9mIHRoZWlyIHRyaXAgZGV0YWlscywgaW5jbHVkaW5nIGRlc3RpbmF0aW9uLCBkYXRlcywgcHJlZmVyZW5jZXMsIGJ1ZGdldCwgYW5kIG1vcmUuJyxcbiAgICBwYXJhbWV0ZXJzOiB6Lm9iamVjdCh7XG4gICAgICAgIGNvbnRlbnQ6IHoub2JqZWN0KHtcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uOiB6LnN0cmluZygpLFxuICAgICAgICAgICAgZGF0ZXM6IHoub2JqZWN0KHtcbiAgICAgICAgICAgICAgICBzdGFydERhdGU6IHouc3RyaW5nKCksXG4gICAgICAgICAgICAgICAgZW5kRGF0ZTogei5zdHJpbmcoKVxuICAgICAgICAgICAgfSkub3B0aW9uYWwoKSxcbiAgICAgICAgICAgIHByZWZlcmVuY2VzOiB6LmFycmF5KHouc3RyaW5nKCkpLm9wdGlvbmFsKCksXG4gICAgICAgICAgICBidWRnZXQ6IHouc3RyaW5nKCkub3B0aW9uYWwoKSxcbiAgICAgICAgICAgIGxhbmd1YWdlOiB6LnN0cmluZygpLm9wdGlvbmFsKCksXG4gICAgICAgICAgICB0cmFuc3BvcnQ6IHouYXJyYXkoei5zdHJpbmcoKSkub3B0aW9uYWwoKSxcbiAgICAgICAgICAgIGRpbmluZzogei5hcnJheSh6LnN0cmluZygpKS5vcHRpb25hbCgpXG4gICAgICAgIH0pXG4gICAgfSksXG4gICAgZXhlY3V0ZTogYXN5bmMgZnVuY3Rpb24gKHsgY29udGVudCB9KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiAnZGV0YWlsc0NhcmQnLFxuICAgICAgICAgICAgcHJvcHM6IHsgY29udGVudCB9XG4gICAgICAgIH07XG4gICAgfVxufSk7XG5cbi8vIFRvb2wgZm9yIFdlYXRoZXIgQ2hhcnRcbmV4cG9ydCBjb25zdCB3ZWF0aGVyQ2hhcnRUb29sID0gY3JlYXRlVG9vbCh7XG4gICAgZGVzY3JpcHRpb246ICdEaXNwbGF5IGhpc3RvcmljYWwgd2VhdGhlciBkYXRhIGluY2x1ZGluZyB0ZW1wZXJhdHVyZSBhbmQgcHJlY2lwaXRhdGlvbiBmb3IgYSBsb2NhdGlvbi4gU2luY2Ugd2UgY2Fubm90IHByb3ZpZGUgZnV0dXJlIHdlYXRoZXIgZGF0YSwgd2Ugd2lsbCBzaG93IGhpc3RvcmljYWwgZGF0YSBmcm9tIHRoZSBzYW1lIG1vbnRoIGxhc3QgeWVhci4gRm9yIGV4YW1wbGUsIGlmIGEgdXNlciBhc2tzIGFib3V0IERlY2VtYmVyIDIwMjQsIHdlIHdpbGwgc2hvdyBkYXRhIGZyb20gRGVjZW1iZXIgMjAyMy4gVXNlIHRoaXMgd2hlbiBkaXNjdXNzaW5nIHdlYXRoZXIgcGF0dGVybnMgb3IgY2xpbWF0ZSBmb3IgYSBkZXN0aW5hdGlvbi4nLFxuICAgIHBhcmFtZXRlcnM6IHoub2JqZWN0KHtcbiAgICAgICAgbGF0OiB6Lm51bWJlcigpLm1pbigtOTApLm1heCg5MCkuZGVzY3JpYmUoJ0xhdGl0dWRlIG9mIHRoZSBsb2NhdGlvbicpLFxuICAgICAgICBsb246IHoubnVtYmVyKCkubWluKC0xODApLm1heCgxODApLmRlc2NyaWJlKCdMb25naXR1ZGUgb2YgdGhlIGxvY2F0aW9uJyksXG4gICAgICAgIHRhcmdldE1vbnRoOiB6Lm51bWJlcigpLm1pbigxKS5tYXgoMTIpLmRlc2NyaWJlKCdUYXJnZXQgbW9udGggKDEtMTIpJyksXG4gICAgICAgIHVuaXRzOiB6LmVudW0oWydzdGFuZGFyZCcsICdtZXRyaWMnLCAnaW1wZXJpYWwnXSBhcyBjb25zdCkub3B0aW9uYWwoKS5kZWZhdWx0KCdtZXRyaWMnKVxuICAgIH0pLFxuICAgIGV4ZWN1dGU6IGFzeW5jIGZ1bmN0aW9uICh7IGxhdCwgbG9uLCB0YXJnZXRNb250aCwgdW5pdHMgPSAnbWV0cmljJyB9KSB7XG4gICAgICAgIC8vIENhbGN1bGF0ZSBkYXRlIHJhbmdlIGZvciB0aGUgc2FtZSBtb250aCBsYXN0IHllYXJcbiAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoJzIwMjQtMTItMTFUMDM6MDQ6NDArMDg6MDAnKTsgLy8gVXNlIHByb3ZpZGVkIHRpbWVcbiAgICAgICAgY29uc3QgbGFzdFllYXIgPSBub3cuZ2V0RnVsbFllYXIoKSAtIDE7XG4gICAgICAgIGNvbnN0IHN0YXJ0RGF0ZSA9IG5ldyBEYXRlKGxhc3RZZWFyLCB0YXJnZXRNb250aCAtIDEsIDEpO1xuICAgICAgICBjb25zdCBlbmREYXRlID0gbmV3IERhdGUobGFzdFllYXIsIHRhcmdldE1vbnRoLCAwKTsgLy8gTGFzdCBkYXkgb2YgdGhlIG1vbnRoXG5cbiAgICAgICAgY29uc29sZS5sb2coJ1t3ZWF0aGVyQ2hhcnRUb29sXSBGZXRjaGluZyB3ZWF0aGVyIGRhdGE6Jywge1xuICAgICAgICAgICAgbGF0LFxuICAgICAgICAgICAgbG9uLFxuICAgICAgICAgICAgdGFyZ2V0TW9udGgsXG4gICAgICAgICAgICB1bml0cyxcbiAgICAgICAgICAgIHN0YXJ0RGF0ZTogc3RhcnREYXRlLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICBlbmREYXRlOiBlbmREYXRlLnRvSVNPU3RyaW5nKClcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gRm9ybWF0IGRhdGVzIGluIFlZWVktTU0tREQgZm9ybWF0IGFzIHJlcXVpcmVkIGJ5IHRoZSBBUElcbiAgICAgICAgY29uc3QgZm9ybWF0dGVkU3RhcnREYXRlID0gc3RhcnREYXRlLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTtcbiAgICAgICAgY29uc3QgZm9ybWF0dGVkRW5kRGF0ZSA9IGVuZERhdGUudG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdO1xuXG4gICAgICAgIC8vIEZldGNoIHdlYXRoZXIgZGF0YVxuICAgICAgICBjb25zdCBiYXNlVXJsID0gdHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcgPyBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19CQVNFX1VSTCB8fCAnaHR0cDovL2xvY2FsaG9zdDozMDAwJyA6IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW47XG4gICAgICAgIGNvbnN0IHVybCA9IGAke2Jhc2VVcmx9L2FwaS93ZWF0aGVyL2hpc3RvcmljYWw/bGF0PSR7bGF0LnRvRml4ZWQoNil9Jmxvbj0ke2xvbi50b0ZpeGVkKDYpfSZzdGFydERhdGU9JHtmb3JtYXR0ZWRTdGFydERhdGV9JmVuZERhdGU9JHtmb3JtYXR0ZWRFbmREYXRlfSZ1bml0cz0ke3VuaXRzfWA7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbd2VhdGhlckNoYXJ0VG9vbF0gQVBJIFVSTDonLCB1cmwpO1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnW3dlYXRoZXJDaGFydFRvb2xdIEFQSSByZXNwb25zZSBzdGF0dXM6JywgcmVzcG9uc2Uuc3RhdHVzKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yVGV4dCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdbd2VhdGhlckNoYXJ0VG9vbF0gQVBJIGVycm9yOicsIGVycm9yVGV4dCk7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZmV0Y2ggd2VhdGhlciBkYXRhOiAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHdlYXRoZXJEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1t3ZWF0aGVyQ2hhcnRUb29sXSBXZWF0aGVyIGRhdGE6Jywgd2VhdGhlckRhdGEpO1xuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHR5cGU6ICd3ZWF0aGVyQ2hhcnQnLFxuICAgICAgICAgICAgICAgIHByb3BzOiB7XG4gICAgICAgICAgICAgICAgICAgIGxhdCxcbiAgICAgICAgICAgICAgICAgICAgbG9uLFxuICAgICAgICAgICAgICAgICAgICB1bml0cyxcbiAgICAgICAgICAgICAgICAgICAgaW5pdGlhbERhdGE6IHdlYXRoZXJEYXRhXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1t3ZWF0aGVyQ2hhcnRUb29sXSBFcnJvcjonLCBlcnJvcik7XG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgfVxuICAgIH1cbn0pO1xuXG4vLyBFeHBvcnQgYWxsIHRvb2xzIHdpdGggdGhlaXIgbmFtZXNcbmV4cG9ydCBjb25zdCB0b29scyA9IHtcbiAgICBidWRnZXRTZWxlY3RvcjogYnVkZ2V0U2VsZWN0b3JUb29sLFxuICAgIHByZWZlcmVuY2VTZWxlY3RvcjogcHJlZmVyZW5jZVNlbGVjdG9yVG9vbCxcbiAgICBkYXRlUGlja2VyOiBkYXRlUGlja2VyVG9vbCxcbiAgICBsYW5ndWFnZVNlbGVjdG9yOiBsYW5ndWFnZVNlbGVjdG9yVG9vbCxcbiAgICB0cmFuc3BvcnRTZWxlY3RvcjogdHJhbnNwb3J0U2VsZWN0b3JUb29sLFxuICAgIHBsYWNlQ2FyZDogcGxhY2VDYXJkVG9vbCxcbiAgICBjYXJvdXNlbDogY2Fyb3VzZWxUb29sLFxuICAgIGRldGFpbHNDYXJkOiBkZXRhaWxzQ2FyZFRvb2wsXG4gICAgd2VhdGhlckNoYXJ0OiB3ZWF0aGVyQ2hhcnRUb29sXG59O1xuIl0sIm5hbWVzIjpbInRvb2wiLCJjcmVhdGVUb29sIiwieiIsInNlYXJjaFBsYWNlQnlUZXh0Iiwic2VhcmNoTXVsdGlwbGVQbGFjZXNCeVRleHQiLCJidWRnZXRTZWxlY3RvclRvb2wiLCJkZXNjcmlwdGlvbiIsInBhcmFtZXRlcnMiLCJvYmplY3QiLCJjdXJyZW50QnVkZ2V0IiwiZW51bSIsIm9wdGlvbmFsIiwiZXhlY3V0ZSIsInR5cGUiLCJwcm9wcyIsInByZWZlcmVuY2VTZWxlY3RvclRvb2wiLCJjdXJyZW50UHJlZmVyZW5jZXMiLCJhcnJheSIsImRhdGVQaWNrZXJUb29sIiwic3RhcnREYXRlIiwic3RyaW5nIiwiZW5kRGF0ZSIsImRhdGVzIiwibGFuZ3VhZ2VTZWxlY3RvclRvb2wiLCJjdXJyZW50TGFuZ3VhZ2UiLCJ0cmFuc3BvcnRTZWxlY3RvclRvb2wiLCJzZWxlY3RlZE1ldGhvZCIsInBsYWNlQ2FyZFRvb2wiLCJzZWFyY2hUZXh0IiwiZGVzY3JpYmUiLCJsb2NhdGlvbiIsImxhdGl0dWRlIiwibnVtYmVyIiwibG9uZ2l0dWRlIiwicGxhY2UiLCJjb25zb2xlIiwiZXJyb3IiLCJzaG93QWN0aW9ucyIsImNhcm91c2VsVG9vbCIsIm1heFJlc3VsdHMiLCJkZWZhdWx0IiwicGxhY2VzIiwibGVuZ3RoIiwiZGV0YWlsc0NhcmRUb29sIiwiY29udGVudCIsImRlc3RpbmF0aW9uIiwicHJlZmVyZW5jZXMiLCJidWRnZXQiLCJsYW5ndWFnZSIsInRyYW5zcG9ydCIsImRpbmluZyIsIndlYXRoZXJDaGFydFRvb2wiLCJsYXQiLCJtaW4iLCJtYXgiLCJsb24iLCJ0YXJnZXRNb250aCIsInVuaXRzIiwibm93IiwiRGF0ZSIsImxhc3RZZWFyIiwiZ2V0RnVsbFllYXIiLCJsb2ciLCJ0b0lTT1N0cmluZyIsImZvcm1hdHRlZFN0YXJ0RGF0ZSIsInNwbGl0IiwiZm9ybWF0dGVkRW5kRGF0ZSIsImJhc2VVcmwiLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfQkFTRV9VUkwiLCJ3aW5kb3ciLCJvcmlnaW4iLCJ1cmwiLCJ0b0ZpeGVkIiwicmVzcG9uc2UiLCJmZXRjaCIsInN0YXR1cyIsIm9rIiwiZXJyb3JUZXh0IiwidGV4dCIsIkVycm9yIiwic3RhdHVzVGV4dCIsIndlYXRoZXJEYXRhIiwianNvbiIsImluaXRpYWxEYXRhIiwidG9vbHMiLCJidWRnZXRTZWxlY3RvciIsInByZWZlcmVuY2VTZWxlY3RvciIsImRhdGVQaWNrZXIiLCJsYW5ndWFnZVNlbGVjdG9yIiwidHJhbnNwb3J0U2VsZWN0b3IiLCJwbGFjZUNhcmQiLCJjYXJvdXNlbCIsImRldGFpbHNDYXJkIiwid2VhdGhlckNoYXJ0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(middleware)/./ai/tools.ts\n");

/***/ })

});