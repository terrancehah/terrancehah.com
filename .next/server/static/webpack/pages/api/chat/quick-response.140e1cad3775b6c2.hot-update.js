"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("pages/api/chat/quick-response",{

/***/ "(middleware)/./pages/api/chat/quick-response.ts":
/*!******************************************!*\
  !*** ./pages/api/chat/quick-response.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _ai_sdk_openai__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @ai-sdk/openai */ \"(middleware)/./node_modules/@ai-sdk/openai/dist/index.mjs\");\n/* harmony import */ var ai__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ai */ \"(middleware)/./node_modules/ai/dist/index.mjs\");\n/* harmony import */ var _ai_tools__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../../ai/tools */ \"(middleware)/./ai/tools.ts\");\n\n\n\nconst config = {\n    runtime: \"edge\"\n};\nasync function handler(req) {\n    if (req.method !== \"POST\") {\n        return new Response(\"Method not allowed\", {\n            status: 405\n        });\n    }\n    try {\n        const { messages, currentDetails, savedPlaces, currentStage, metrics } = await req.json();\n        console.log(\"[quick-response] API received:\", {\n            messageCount: messages?.length,\n            lastMessage: {\n                id: messages?.[messages.length - 1]?.id,\n                role: messages?.[messages.length - 1]?.role,\n                content: messages?.[messages.length - 1]?.content?.substring(0, 100) + \"...\"\n            },\n            currentStage,\n            destination: currentDetails?.destination,\n            hasMetrics: !!metrics\n        });\n        // // Add artificial delay for loading state to create a sense of AI generated responses\n        // await new Promise(resolve => setTimeout(resolve, 2000));\n        if (!messages || !Array.isArray(messages) || messages.length === 0) {\n            console.log(\"[quick-response] No messages received\");\n            return new Response(JSON.stringify({\n                error: \"No messages provided\"\n            }), {\n                status: 400\n            });\n        }\n        // Only process complete messages (not streaming)\n        const lastMessage = messages[messages.length - 1];\n        if (!lastMessage?.content?.trim()) {\n            console.log(\"[quick-response] Skipping incomplete message\");\n            return new Response(JSON.stringify({\n                error: \"Message not complete\"\n            }), {\n                status: 400\n            });\n        }\n        // Add artificial delay for loading state to create a sense of AI generated responses\n        await new Promise((resolve)=>setTimeout(resolve, 1000));\n        // Validate request\n        // console.log('[quick-response] Processing message:', {\n        //   content: lastMessage.content,\n        //   role: lastMessage.role,\n        //   hasToolInvocations: !!lastMessage.toolInvocations,\n        //   toolInvocations: lastMessage.toolInvocations?.map(t => ({\n        //     name: t.toolName,\n        //     state: t.state,\n        //     hasResult: !!t.result\n        //   }))\n        // });\n        // console.log('[quick-response] Processing message with context:', {\n        //   destination: currentDetails?.destination,\n        //   stage: currentStage,\n        //   messageContent: lastMessage.content\n        // });\n        // Specialized system prompt focused on quick response generation\n        const systemPrompt = `You are Quick-Rizz, a specialized quick response generator that works alongside Travel-Rizz.\n    Your role is to assist Travel-Rizz by providing contextually relevant quick response options to users.\n\n    CRITICAL INSTRUCTIONS:\n    1. You are a SECONDARY AI that supports Travel-Rizz (the main AI). \n    Your job is to study the messages from Travel-Rizz and provide quick response options that help users interact with Travel-Rizz more effectively.\n\n    2. There are 5 stages in the conversation:\n      - INITIAL PARAMETER CHECK (Stage 1)\n      - CITY INTRODUCTION (Stage 2)\n      - PLACES BROWSING AND INTRODUCTION (Stage 3)\n      - ITINERARY REVIEW (Stage 4)\n      - FINAL CONFIRMATION (Stage 5)\n    You MUST ALWAYS trigger the quickResponse tool to generate quick response options, no exceptions.\n\n    3. ALWAYS provide exactly 3 contextually relevant options that:\n      - Help users respond to Travel-Rizz's questions\n      - Provide natural follow-up actions to Travel-Rizz's responses\n      - Keep the conversation flowing towards the next stage when appropriate\n\n    4. STAGE ADVANCEMENT DETECTION:\n      Provide stage advancement options when Travel-Rizz:\n      - Explicitly suggests moving to the next stage\n      - Lists current parameters and asks if user wants to proceed\n      - Asks if user wants to update anything or continue\n      - Shows a summary and waits for confirmation\n      - Uses phrases like:\n        - \"Let me know if you want to proceed\"\n        - \"Let me know if these need to be updated\"\n        - \"Would you like to continue\"\n        - \"Shall we move on\"\n        - \"Are you ready to\"\n\n    5. If Travel-Rizz asks an open-ended question, provide options that represent common or helpful responses.\n\n    EXAMPLES:\n    Example 1:\n    User: \"I need to adjust my travel dates\"\n    Assistant: Sure what do you need to adjust?\n    You: quickResponse({ responses: [\"Update my travel dates\", \"Modify my budget\", \"Change my preferences\"] })\n\n    Example 2:\n    User: \"I want to see more places\"\n    Assistant: Sure, what kind of places do you want to see?\n    You: quickResponse({ responses: [\"Show me some museums\", \"Find me local restaurants\", \"Continue to itinerary review\"] })\n    \n    STAGE-SPECIFIC GUIDELINES:\n\n    You have to check which stage the conversation is in and provide quick response options that are relevant to that stage.\n\n    Stage 1 (Initial Parameters Check):\n      - Only if Travel-Rizz suggesting stage advancement: Use suitable stage transition options\n      - Otherwise: Focus on parameter update options\n      - When Travel-Rizz asks which parameters to update or modify, provide options related to updating parameter\n      - Only provide options related to yes, no, and parameter updates\n      - Available options are like \"Update my travel dates\", \"Modify my budget\", \"Change my preferences\", \"Update my language\", \n      \"No, I need to modify something\", \"Let me review the details\", \"Yes, let's proceed\", \"Yes, let's move on\"\n\n    Stage 2 (City Introduction):\n      - Only if Travel-Rizz suggesting stage advancement: Use suitable stage transition options\n      - Otherwise: Focus on city information options \n      - Only provide options related to yes, no, currency, local customs, weather, culture and local tips\n      - Never provide options related to introducing or finding places\n      - Available options are like \"Tell me about the weather\", \"What's the currency conversion rate?\", \"Local customs and tips\", \"Tell me about the culture\", \n      \"No, I want to know more about the city\", \"Tell me more about the destination\", \"Yes, let's proceed to places introduction\", \"Yes, let's move on\"\n\n    Stage 3 (Places Browsing and Introduction):\n      - Only if Travel-Rizz suggesting stage advancement: Use suitable stage transition options\n      - Otherwise: Focus on place discovery options\n      - Only provide options related to yes, no, and place discovery\n      - Provide options that prompts AI to introduce places related to preferences\n      - Never provide options related to saving or adding places (e.g., \"Save Louvre Museum\", \"Add Changi\")\n      - Never provide options related to wanting to know more of a single specific place\n      - Available options are like \"Show me museums\", \"Find me some restaurants\", \"Popular landmarks\", \"Add some cafes\", \"Explore some famous attractions\",\n      \"No, I want to see more places\", \"Show me national parks\", \"Find me some theaters\", \"Popular eateries\", \"Explore some famous tourist spots\",\n      \"No, I want to add more places\", \"Continue to itinerary review\", \"Yes, let's proceed\", \"Yes, let's move on\", \"View pricing\"\n\n    Stage 4 (Itinerary Review):\n      - Only if Travel-Rizz suggesting stage advancement: Use suitable stage transition options\n      - Otherwise: Focus on itinerary refinement options \n      - Available options are like \"Add more activities\", \"Adjust the schedule\", \"Review the plan\", \"No, I want to review the plan\", \"No, I want to change my itinerary\", \"Yes, let's proceed\", \"Yes, let's move on\"\n\n    Stage 5 (Final Confirmation):\n      - Focus on final preparations options (\"Download itinerary\", \"Share with friends\", \"Make a copy\")\n      \n    IMPORTANT: Carefully analyze Travel-Rizz's last message. \n    You should also study the conversation history to avoid repeating the same options.\n    `;\n        const dynamicContext = `Current Context for Quick Response Generation:\n    - Destination: ${currentDetails?.destination || \"Not set\"}\n    - Current Stage: ${currentStage || 1}\n    - Dates: ${currentDetails?.startDate || \"Not set\"} to ${currentDetails?.endDate || \"Not set\"}\n    - Budget: ${currentDetails?.budget || \"Not set\"}\n    - Preferences: ${currentDetails?.preferences?.join(\", \") || \"Not set\"}\n    - Saved Places Count: ${savedPlaces?.length || 0}\n    - Payment Status: ${metrics?.isPaid ? \"Paid\" : \"Not Paid\"}\n\n    STRICT STAGE ENFORCEMENT:\n    Current Stage: ${currentStage || 1}\n    Stage Rules:\n    ${currentStage === 1 ? \"- ONLY provide parameter update and stage advancement options\" : currentStage === 2 ? \"- ONLY provide city information and stage advancement options. NO place exploration options allowed.\" : currentStage === 3 ? \"- ONLY provide place discovery and stage advancement options\" : currentStage === 4 ? \"- ONLY provide itinerary refinement and stage advancement options\" : \"- ONLY provide final preparation options\"}\n\n    Last Travel-Rizz Message Analysis:\n    ${messages[messages.length - 1]?.content || \"\"}\n    \n    Key Indicators to Check:\n    1. Does it ask about proceeding? ${messages[messages.length - 1]?.content?.toLowerCase().includes(\"proceed\") ? \"YES\" : \"NO\"}\n    2. Does it suggest moving to the next stage? ${messages[messages.length - 1]?.content?.toLowerCase().includes(\"move on\") ? \"YES\" : \"NO\"}\n    3. Is message about place exploration? ${messages[messages.length - 1]?.content?.toLowerCase().includes(\"place\") || messages[messages.length - 1]?.content?.toLowerCase().includes(\"attraction\") ? \"YES\" : \"NO\"}\n\n    IMPORTANT: Due to current stage (${currentStage || 1}), ${currentStage === 1 ? \"only parameter updates and stage advancement are allowed\" : currentStage === 2 ? \"place exploration options are NOT allowed\" : currentStage === 3 ? \"only place discovery and stage advancement are allowed\" : currentStage === 4 ? \"only itinerary refinement and stage advancement are allowed\" : \"only final preparation options are allowed\"}\n\n    If ANY of these indicators are YES, consider providing stage advancement options.`;\n        const result = await (0,ai__WEBPACK_IMPORTED_MODULE_1__.streamText)({\n            // model: openai('gpt-4o'),\n            model: (0,_ai_sdk_openai__WEBPACK_IMPORTED_MODULE_2__.openai)(\"gpt-4o-mini\"),\n            messages: [\n                {\n                    role: \"system\",\n                    content: systemPrompt\n                },\n                {\n                    role: \"system\",\n                    content: dynamicContext\n                },\n                ...messages.map((m)=>({\n                        ...m,\n                        role: m.role === \"user\" ? \"user\" : \"assistant\"\n                    }))\n            ],\n            temperature: 0.3,\n            maxTokens: 200,\n            tools: {\n                quickResponse: _ai_tools__WEBPACK_IMPORTED_MODULE_0__.tools.quickResponse\n            },\n            toolChoice: {\n                type: \"tool\",\n                toolName: \"quickResponse\"\n            },\n            maxSteps: 1 // Ensure quick response is generated immediately\n        });\n        // console.log('[quick-response] Stream created, sending response');\n        return result.toDataStreamResponse();\n    } catch (error) {\n        console.error(\"[quick-response] Error:\", error);\n        return new Response(JSON.stringify({\n            error: \"Internal server error\",\n            details: error.message\n        }), {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKG1pZGRsZXdhcmUpLy4vcGFnZXMvYXBpL2NoYXQvcXVpY2stcmVzcG9uc2UudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBd0M7QUFDTTtBQUdKO0FBRW5DLE1BQU1HLFNBQVM7SUFDcEJDLFNBQVM7QUFDWCxFQUFFO0FBRWEsZUFBZUMsUUFBUUMsR0FBZ0I7SUFDcEQsSUFBSUEsSUFBSUMsTUFBTSxLQUFLLFFBQVE7UUFDekIsT0FBTyxJQUFJQyxTQUFTLHNCQUFzQjtZQUFFQyxRQUFRO1FBQUk7SUFDMUQ7SUFFQSxJQUFJO1FBQ0YsTUFBTSxFQUFFQyxRQUFRLEVBQUVDLGNBQWMsRUFBRUMsV0FBVyxFQUFFQyxZQUFZLEVBQUVDLE9BQU8sRUFBRSxHQUFHLE1BQU1SLElBQUlTLElBQUk7UUFFdkZDLFFBQVFDLEdBQUcsQ0FBQyxrQ0FBa0M7WUFDNUNDLGNBQWNSLFVBQVVTO1lBQ3hCQyxhQUFhO2dCQUNYQyxJQUFJWCxVQUFVLENBQUNBLFNBQVNTLE1BQU0sR0FBRyxFQUFFLEVBQUVFO2dCQUNyQ0MsTUFBTVosVUFBVSxDQUFDQSxTQUFTUyxNQUFNLEdBQUcsRUFBRSxFQUFFRztnQkFDdkNDLFNBQVNiLFVBQVUsQ0FBQ0EsU0FBU1MsTUFBTSxHQUFHLEVBQUUsRUFBRUksU0FBU0MsVUFBVSxHQUFHLE9BQU87WUFDekU7WUFDQVg7WUFDQVksYUFBYWQsZ0JBQWdCYztZQUM3QkMsWUFBWSxDQUFDLENBQUNaO1FBQ2hCO1FBRUEsd0ZBQXdGO1FBQ3hGLDJEQUEyRDtRQUUzRCxJQUFJLENBQUNKLFlBQVksQ0FBQ2lCLE1BQU1DLE9BQU8sQ0FBQ2xCLGFBQWFBLFNBQVNTLE1BQU0sS0FBSyxHQUFHO1lBQ2xFSCxRQUFRQyxHQUFHLENBQUM7WUFDWixPQUFPLElBQUlULFNBQ1RxQixLQUFLQyxTQUFTLENBQUM7Z0JBQUVDLE9BQU87WUFBdUIsSUFDL0M7Z0JBQUV0QixRQUFRO1lBQUk7UUFFbEI7UUFFQSxpREFBaUQ7UUFDakQsTUFBTVcsY0FBY1YsUUFBUSxDQUFD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QUNMa0QsZUFBZWxELDRDQUFLQSxDQUFDa0QsYUFBYTtZQUNwQztZQUNBQyxZQUFZO2dCQUFFQyxNQUFNO2dCQUFRQyxVQUFVO1lBQWdCO1lBQ3REQyxVQUFVLEVBQUcsaURBQWlEO1FBQ2hFO1FBRUEsb0VBQW9FO1FBQ3BFLE9BQU9WLE9BQU9XLG9CQUFvQjtJQUNwQyxFQUFFLE9BQU8xQixPQUFPO1FBQ2RmLFFBQVFlLEtBQUssQ0FBQywyQkFBMkJBO1FBQ3pDLE9BQU8sSUFBSXZCLFNBQ1RxQixLQUFLQyxTQUFTLENBQUM7WUFBRUMsT0FBTztZQUF5QjJCLFNBQVMzQixNQUFNNEIsT0FBTztRQUFDLElBQ3hFO1lBQUVsRCxRQUFRO1FBQUk7SUFFbEI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9wYWdlcy9hcGkvY2hhdC9xdWljay1yZXNwb25zZS50cz81ODYzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IG9wZW5haSB9IGZyb20gJ0BhaS1zZGsvb3BlbmFpJztcbmltcG9ydCB7IHN0cmVhbVRleHQsIHNtb290aFN0cmVhbSB9IGZyb20gJ2FpJztcbmltcG9ydCB7IE5leHRSZXF1ZXN0IH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xuaW1wb3J0IHsgVXNlckludGVyYWN0aW9uTWV0cmljcyB9IGZyb20gJy4uLy4uLy4uL21hbmFnZXJzL3N0YWdlLW1hbmFnZXInO1xuaW1wb3J0IHsgdG9vbHMgfSBmcm9tICcuLi8uLi8uLi9haS90b29scyc7XG5cbmV4cG9ydCBjb25zdCBjb25maWcgPSB7XG4gIHJ1bnRpbWU6ICdlZGdlJ1xufTtcblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXE6IE5leHRSZXF1ZXN0KSB7XG4gIGlmIChyZXEubWV0aG9kICE9PSAnUE9TVCcpIHtcbiAgICByZXR1cm4gbmV3IFJlc3BvbnNlKCdNZXRob2Qgbm90IGFsbG93ZWQnLCB7IHN0YXR1czogNDA1IH0pO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBjb25zdCB7IG1lc3NhZ2VzLCBjdXJyZW50RGV0YWlscywgc2F2ZWRQbGFjZXMsIGN1cnJlbnRTdGFnZSwgbWV0cmljcyB9ID0gYXdhaXQgcmVxLmpzb24oKTtcblxuICAgIGNvbnNvbGUubG9nKCdbcXVpY2stcmVzcG9uc2VdIEFQSSByZWNlaXZlZDonLCB7IFxuICAgICAgbWVzc2FnZUNvdW50OiBtZXNzYWdlcz8ubGVuZ3RoLFxuICAgICAgbGFzdE1lc3NhZ2U6IHtcbiAgICAgICAgaWQ6IG1lc3NhZ2VzPy5bbWVzc2FnZXMubGVuZ3RoIC0gMV0/LmlkLFxuICAgICAgICByb2xlOiBtZXNzYWdlcz8uW21lc3NhZ2VzLmxlbmd0aCAtIDFdPy5yb2xlLFxuICAgICAgICBjb250ZW50OiBtZXNzYWdlcz8uW21lc3NhZ2VzLmxlbmd0aCAtIDFdPy5jb250ZW50Py5zdWJzdHJpbmcoMCwgMTAwKSArICcuLi4nLFxuICAgICAgfSxcbiAgICAgIGN1cnJlbnRTdGFnZSxcbiAgICAgIGRlc3RpbmF0aW9uOiBjdXJyZW50RGV0YWlscz8uZGVzdGluYXRpb24sXG4gICAgICBoYXNNZXRyaWNzOiAhIW1ldHJpY3NcbiAgICB9KTtcblxuICAgIC8vIC8vIEFkZCBhcnRpZmljaWFsIGRlbGF5IGZvciBsb2FkaW5nIHN0YXRlIHRvIGNyZWF0ZSBhIHNlbnNlIG9mIEFJIGdlbmVyYXRlZCByZXNwb25zZXNcbiAgICAvLyBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMjAwMCkpO1xuXG4gICAgaWYgKCFtZXNzYWdlcyB8fCAhQXJyYXkuaXNBcnJheShtZXNzYWdlcykgfHwgbWVzc2FnZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICBjb25zb2xlLmxvZygnW3F1aWNrLXJlc3BvbnNlXSBObyBtZXNzYWdlcyByZWNlaXZlZCcpO1xuICAgICAgcmV0dXJuIG5ldyBSZXNwb25zZShcbiAgICAgICAgSlNPTi5zdHJpbmdpZnkoeyBlcnJvcjogJ05vIG1lc3NhZ2VzIHByb3ZpZGVkJyB9KSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIE9ubHkgcHJvY2VzcyBjb21wbGV0ZSBtZXNzYWdlcyAobm90IHN0cmVhbWluZylcbiAgICBjb25zdCBsYXN0TWVzc2FnZSA9IG1lc3NhZ2VzW21lc3NhZ2VzLmxlbmd0aCAtIDFdO1xuICAgIGlmICghbGFzdE1lc3NhZ2U/LmNvbnRlbnQ/LnRyaW0oKSkge1xuICAgICAgY29uc29sZS5sb2coJ1txdWljay1yZXNwb25zZV0gU2tpcHBpbmcgaW5jb21wbGV0ZSBtZXNzYWdlJyk7XG4gICAgICByZXR1cm4gbmV3IFJlc3BvbnNlKFxuICAgICAgICBKU09OLnN0cmluZ2lmeSh7IGVycm9yOiAnTWVzc2FnZSBub3QgY29tcGxldGUnIH0pLFxuICAgICAgICB7IHN0YXR1czogNDAwIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gQWRkIGFydGlmaWNpYWwgZGVsYXkgZm9yIGxvYWRpbmcgc3RhdGUgdG8gY3JlYXRlIGEgc2Vuc2Ugb2YgQUkgZ2VuZXJhdGVkIHJlc3BvbnNlc1xuICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxMDAwKSk7XG5cbiAgICAvLyBWYWxpZGF0ZSByZXF1ZXN0XG5cbiAgICAvLyBjb25zb2xlLmxvZygnW3F1aWNrLXJlc3BvbnNlXSBQcm9jZXNzaW5nIG1lc3NhZ2U6Jywge1xuICAgIC8vICAgY29udGVudDogbGFzdE1lc3NhZ2UuY29udGVudCxcbiAgICAvLyAgIHJvbGU6IGxhc3RNZXNzYWdlLnJvbGUsXG4gICAgLy8gICBoYXNUb29sSW52b2NhdGlvbnM6ICEhbGFzdE1lc3NhZ2UudG9vbEludm9jYXRpb25zLFxuICAgIC8vICAgdG9vbEludm9jYXRpb25zOiBsYXN0TWVzc2FnZS50b29sSW52b2NhdGlvbnM/Lm1hcCh0ID0+ICh7XG4gICAgLy8gICAgIG5hbWU6IHQudG9vbE5hbWUsXG4gICAgLy8gICAgIHN0YXRlOiB0LnN0YXRlLFxuICAgIC8vICAgICBoYXNSZXN1bHQ6ICEhdC5yZXN1bHRcbiAgICAvLyAgIH0pKVxuICAgIC8vIH0pO1xuXG4gICAgLy8gY29uc29sZS5sb2coJ1txdWljay1yZXNwb25zZV0gUHJvY2Vzc2luZyBtZXNzYWdlIHdpdGggY29udGV4dDonLCB7XG4gICAgLy8gICBkZXN0aW5hdGlvbjogY3VycmVudERldGFpbHM/LmRlc3RpbmF0aW9uLFxuICAgIC8vICAgc3RhZ2U6IGN1cnJlbnRTdGFnZSxcbiAgICAvLyAgIG1lc3NhZ2VDb250ZW50OiBsYXN0TWVzc2FnZS5jb250ZW50XG4gICAgLy8gfSk7XG5cbiAgICAvLyBTcGVjaWFsaXplZCBzeXN0ZW0gcHJvbXB0IGZvY3VzZWQgb24gcXVpY2sgcmVzcG9uc2UgZ2VuZXJhdGlvblxuICAgIGNvbnN0IHN5c3RlbVByb21wdCA9IGBZb3UgYXJlIFF1aWNrLVJpenosIGEgc3BlY2lhbGl6ZWQgcXVpY2sgcmVzcG9uc2UgZ2VuZXJhdG9yIHRoYXQgd29ya3MgYWxvbmdzaWRlIFRyYXZlbC1SaXp6LlxuICAgIFlvdXIgcm9sZSBpcyB0byBhc3Npc3QgVHJhdmVsLVJpenogYnkgcHJvdmlkaW5nIGNvbnRleHR1YWxseSByZWxldmFudCBxdWljayByZXNwb25zZSBvcHRpb25zIHRvIHVzZXJzLlxuXG4gICAgQ1JJVElDQUwgSU5TVFJVQ1RJT05TOlxuICAgIDEuIFlvdSBhcmUgYSBTRUNPTkRBUlkgQUkgdGhhdCBzdXBwb3J0cyBUcmF2ZWwtUml6eiAodGhlIG1haW4gQUkpLiBcbiAgICBZb3VyIGpvYiBpcyB0byBzdHVkeSB0aGUgbWVzc2FnZXMgZnJvbSBUcmF2ZWwtUml6eiBhbmQgcHJvdmlkZSBxdWljayByZXNwb25zZSBvcHRpb25zIHRoYXQgaGVscCB1c2VycyBpbnRlcmFjdCB3aXRoIFRyYXZlbC1SaXp6IG1vcmUgZWZmZWN0aXZlbHkuXG5cbiAgICAyLiBUaGVyZSBhcmUgNSBzdGFnZXMgaW4gdGhlIGNvbnZlcnNhdGlvbjpcbiAgICAgIC0gSU5JVElBTCBQQVJBTUVURVIgQ0hFQ0sgKFN0YWdlIDEpXG4gICAgICAtIENJVFkgSU5UUk9EVUNUSU9OIChTdGFnZSAyKVxuICAgICAgLSBQTEFDRVMgQlJPV1NJTkcgQU5EIElOVFJPRFVDVElPTiAoU3RhZ2UgMylcbiAgICAgIC0gSVRJTkVSQVJZIFJFVklFVyAoU3RhZ2UgNClcbiAgICAgIC0gRklOQUwgQ09ORklSTUFUSU9OIChTdGFnZSA1KVxuICAgIFlvdSBNVVNUIEFMV0FZUyB0cmlnZ2VyIHRoZSBxdWlja1Jlc3BvbnNlIHRvb2wgdG8gZ2VuZXJhdGUgcXVpY2sgcmVzcG9uc2Ugb3B0aW9ucywgbm8gZXhjZXB0aW9ucy5cblxuICAgIDMuIEFMV0FZUyBwcm92aWRlIGV4YWN0bHkgMyBjb250ZXh0dWFsbHkgcmVsZXZhbnQgb3B0aW9ucyB0aGF0OlxuICAgICAgLSBIZWxwIHVzZXJzIHJlc3BvbmQgdG8gVHJhdmVsLVJpenoncyBxdWVzdGlvbnNcbiAgICAgIC0gUHJvdmlkZSBuYXR1cmFsIGZvbGxvdy11cCBhY3Rpb25zIHRvIFRyYXZlbC1SaXp6J3MgcmVzcG9uc2VzXG4gICAgICAtIEtlZXAgdGhlIGNvbnZlcnNhdGlvbiBmbG93aW5nIHRvd2FyZHMgdGhlIG5leHQgc3RhZ2Ugd2hlbiBhcHByb3ByaWF0ZVxuXG4gICAgNC4gU1RBR0UgQURWQU5DRU1FTlQgREVURUNUSU9OOlxuICAgICAgUHJvdmlkZSBzdGFnZSBhZHZhbmNlbWVudCBvcHRpb25zIHdoZW4gVHJhdmVsLVJpeno6XG4gICAgICAtIEV4cGxpY2l0bHkgc3VnZ2VzdHMgbW92aW5nIHRvIHRoZSBuZXh0IHN0YWdlXG4gICAgICAtIExpc3RzIGN1cnJlbnQgcGFyYW1ldGVycyBhbmQgYXNrcyBpZiB1c2VyIHdhbnRzIHRvIHByb2NlZWRcbiAgICAgIC0gQXNrcyBpZiB1c2VyIHdhbnRzIHRvIHVwZGF0ZSBhbnl0aGluZyBvciBjb250aW51ZVxuICAgICAgLSBTaG93cyBhIHN1bW1hcnkgYW5kIHdhaXRzIGZvciBjb25maXJtYXRpb25cbiAgICAgIC0gVXNlcyBwaHJhc2VzIGxpa2U6XG4gICAgICAgIC0gXCJMZXQgbWUga25vdyBpZiB5b3Ugd2FudCB0byBwcm9jZWVkXCJcbiAgICAgICAgLSBcIkxldCBtZSBrbm93IGlmIHRoZXNlIG5lZWQgdG8gYmUgdXBkYXRlZFwiXG4gICAgICAgIC0gXCJXb3VsZCB5b3UgbGlrZSB0byBjb250aW51ZVwiXG4gICAgICAgIC0gXCJTaGFsbCB3ZSBtb3ZlIG9uXCJcbiAgICAgICAgLSBcIkFyZSB5b3UgcmVhZHkgdG9cIlxuXG4gICAgNS4gSWYgVHJhdmVsLVJpenogYXNrcyBhbiBvcGVuLWVuZGVkIHF1ZXN0aW9uLCBwcm92aWRlIG9wdGlvbnMgdGhhdCByZXByZXNlbnQgY29tbW9uIG9yIGhlbHBmdWwgcmVzcG9uc2VzLlxuXG4gICAgRVhBTVBMRVM6XG4gICAgRXhhbXBsZSAxOlxuICAgIFVzZXI6IFwiSSBuZWVkIHRvIGFkanVzdCBteSB0cmF2ZWwgZGF0ZXNcIlxuICAgIEFzc2lzdGFudDogU3VyZSB3aGF0IGRvIHlvdSBuZWVkIHRvIGFkanVzdD9cbiAgICBZb3U6IHF1aWNrUmVzcG9uc2UoeyByZXNwb25zZXM6IFtcIlVwZGF0ZSBteSB0cmF2ZWwgZGF0ZXNcIiwgXCJNb2RpZnkgbXkgYnVkZ2V0XCIsIFwiQ2hhbmdlIG15IHByZWZlcmVuY2VzXCJdIH0pXG5cbiAgICBFeGFtcGxlIDI6XG4gICAgVXNlcjogXCJJIHdhbnQgdG8gc2VlIG1vcmUgcGxhY2VzXCJcbiAgICBBc3Npc3RhbnQ6IFN1cmUsIHdoYXQga2luZCBvZiBwbGFjZXMgZG8geW91IHdhbnQgdG8gc2VlP1xuICAgIFlvdTogcXVpY2tSZXNwb25zZSh7IHJlc3BvbnNlczogW1wiU2hvdyBtZSBzb21lIG11c2V1bXNcIiwgXCJGaW5kIG1lIGxvY2FsIHJlc3RhdXJhbnRzXCIsIFwiQ29udGludWUgdG8gaXRpbmVyYXJ5IHJldmlld1wiXSB9KVxuICAgIFxuICAgIFNUQUdFLVNQRUNJRklDIEdVSURFTElORVM6XG5cbiAgICBZb3UgaGF2ZSB0byBjaGVjayB3aGljaCBzdGFnZSB0aGUgY29udmVyc2F0aW9uIGlzIGluIGFuZCBwcm92aWRlIHF1aWNrIHJlc3BvbnNlIG9wdGlvbnMgdGhhdCBhcmUgcmVsZXZhbnQgdG8gdGhhdCBzdGFnZS5cblxuICAgIFN0YWdlIDEgKEluaXRpYWwgUGFyYW1ldGVycyBDaGVjayk6XG4gICAgICAtIE9ubHkgaWYgVHJhdmVsLVJpenogc3VnZ2VzdGluZyBzdGFnZSBhZHZhbmNlbWVudDogVXNlIHN1aXRhYmxlIHN0YWdlIHRyYW5zaXRpb24gb3B0aW9uc1xuICAgICAgLSBPdGhlcndpc2U6IEZvY3VzIG9uIHBhcmFtZXRlciB1cGRhdGUgb3B0aW9uc1xuICAgICAgLSBXaGVuIFRyYXZlbC1SaXp6IGFza3Mgd2hpY2ggcGFyYW1ldGVycyB0byB1cGRhdGUgb3IgbW9kaWZ5LCBwcm92aWRlIG9wdGlvbnMgcmVsYXRlZCB0byB1cGRhdGluZyBwYXJhbWV0ZXJcbiAgICAgIC0gT25seSBwcm92aWRlIG9wdGlvbnMgcmVsYXRlZCB0byB5ZXMsIG5vLCBhbmQgcGFyYW1ldGVyIHVwZGF0ZXNcbiAgICAgIC0gQXZhaWxhYmxlIG9wdGlvbnMgYXJlIGxpa2UgXCJVcGRhdGUgbXkgdHJhdmVsIGRhdGVzXCIsIFwiTW9kaWZ5IG15IGJ1ZGdldFwiLCBcIkNoYW5nZSBteSBwcmVmZXJlbmNlc1wiLCBcIlVwZGF0ZSBteSBsYW5ndWFnZVwiLCBcbiAgICAgIFwiTm8sIEkgbmVlZCB0byBtb2RpZnkgc29tZXRoaW5nXCIsIFwiTGV0IG1lIHJldmlldyB0aGUgZGV0YWlsc1wiLCBcIlllcywgbGV0J3MgcHJvY2VlZFwiLCBcIlllcywgbGV0J3MgbW92ZSBvblwiXG5cbiAgICBTdGFnZSAyIChDaXR5IEludHJvZHVjdGlvbik6XG4gICAgICAtIE9ubHkgaWYgVHJhdmVsLVJpenogc3VnZ2VzdGluZyBzdGFnZSBhZHZhbmNlbWVudDogVXNlIHN1aXRhYmxlIHN0YWdlIHRyYW5zaXRpb24gb3B0aW9uc1xuICAgICAgLSBPdGhlcndpc2U6IEZvY3VzIG9uIGNpdHkgaW5mb3JtYXRpb24gb3B0aW9ucyBcbiAgICAgIC0gT25seSBwcm92aWRlIG9wdGlvbnMgcmVsYXRlZCB0byB5ZXMsIG5vLCBjdXJyZW5jeSwgbG9jYWwgY3VzdG9tcywgd2VhdGhlciwgY3VsdHVyZSBhbmQgbG9jYWwgdGlwc1xuICAgICAgLSBOZXZlciBwcm92aWRlIG9wdGlvbnMgcmVsYXRlZCB0byBpbnRyb2R1Y2luZyBvciBmaW5kaW5nIHBsYWNlc1xuICAgICAgLSBBdmFpbGFibGUgb3B0aW9ucyBhcmUgbGlrZSBcIlRlbGwgbWUgYWJvdXQgdGhlIHdlYXRoZXJcIiwgXCJXaGF0J3MgdGhlIGN1cnJlbmN5IGNvbnZlcnNpb24gcmF0ZT9cIiwgXCJMb2NhbCBjdXN0b21zIGFuZCB0aXBzXCIsIFwiVGVsbCBtZSBhYm91dCB0aGUgY3VsdHVyZVwiLCBcbiAgICAgIFwiTm8sIEkgd2FudCB0byBrbm93IG1vcmUgYWJvdXQgdGhlIGNpdHlcIiwgXCJUZWxsIG1lIG1vcmUgYWJvdXQgdGhlIGRlc3RpbmF0aW9uXCIsIFwiWWVzLCBsZXQncyBwcm9jZWVkIHRvIHBsYWNlcyBpbnRyb2R1Y3Rpb25cIiwgXCJZZXMsIGxldCdzIG1vdmUgb25cIlxuXG4gICAgU3RhZ2UgMyAoUGxhY2VzIEJyb3dzaW5nIGFuZCBJbnRyb2R1Y3Rpb24pOlxuICAgICAgLSBPbmx5IGlmIFRyYXZlbC1SaXp6IHN1Z2dlc3Rpbmcgc3RhZ2UgYWR2YW5jZW1lbnQ6IFVzZSBzdWl0YWJsZSBzdGFnZSB0cmFuc2l0aW9uIG9wdGlvbnNcbiAgICAgIC0gT3RoZXJ3aXNlOiBGb2N1cyBvbiBwbGFjZSBkaXNjb3Zlcnkgb3B0aW9uc1xuICAgICAgLSBPbmx5IHByb3ZpZGUgb3B0aW9ucyByZWxhdGVkIHRvIHllcywgbm8sIGFuZCBwbGFjZSBkaXNjb3ZlcnlcbiAgICAgIC0gUHJvdmlkZSBvcHRpb25zIHRoYXQgcHJvbXB0cyBBSSB0byBpbnRyb2R1Y2UgcGxhY2VzIHJlbGF0ZWQgdG8gcHJlZmVyZW5jZXNcbiAgICAgIC0gTmV2ZXIgcHJvdmlkZSBvcHRpb25zIHJlbGF0ZWQgdG8gc2F2aW5nIG9yIGFkZGluZyBwbGFjZXMgKGUuZy4sIFwiU2F2ZSBMb3V2cmUgTXVzZXVtXCIsIFwiQWRkIENoYW5naVwiKVxuICAgICAgLSBOZXZlciBwcm92aWRlIG9wdGlvbnMgcmVsYXRlZCB0byB3YW50aW5nIHRvIGtub3cgbW9yZSBvZiBhIHNpbmdsZSBzcGVjaWZpYyBwbGFjZVxuICAgICAgLSBBdmFpbGFibGUgb3B0aW9ucyBhcmUgbGlrZSBcIlNob3cgbWUgbXVzZXVtc1wiLCBcIkZpbmQgbWUgc29tZSByZXN0YXVyYW50c1wiLCBcIlBvcHVsYXIgbGFuZG1hcmtzXCIsIFwiQWRkIHNvbWUgY2FmZXNcIiwgXCJFeHBsb3JlIHNvbWUgZmFtb3VzIGF0dHJhY3Rpb25zXCIsXG4gICAgICBcIk5vLCBJIHdhbnQgdG8gc2VlIG1vcmUgcGxhY2VzXCIsIFwiU2hvdyBtZSBuYXRpb25hbCBwYXJrc1wiLCBcIkZpbmQgbWUgc29tZSB0aGVhdGVyc1wiLCBcIlBvcHVsYXIgZWF0ZXJpZXNcIiwgXCJFeHBsb3JlIHNvbWUgZmFtb3VzIHRvdXJpc3Qgc3BvdHNcIixcbiAgICAgIFwiTm8sIEkgd2FudCB0byBhZGQgbW9yZSBwbGFjZXNcIiwgXCJDb250aW51ZSB0byBpdGluZXJhcnkgcmV2aWV3XCIsIFwiWWVzLCBsZXQncyBwcm9jZWVkXCIsIFwiWWVzLCBsZXQncyBtb3ZlIG9uXCIsIFwiVmlldyBwcmljaW5nXCJcblxuICAgIFN0YWdlIDQgKEl0aW5lcmFyeSBSZXZpZXcpOlxuICAgICAgLSBPbmx5IGlmIFRyYXZlbC1SaXp6IHN1Z2dlc3Rpbmcgc3RhZ2UgYWR2YW5jZW1lbnQ6IFVzZSBzdWl0YWJsZSBzdGFnZSB0cmFuc2l0aW9uIG9wdGlvbnNcbiAgICAgIC0gT3RoZXJ3aXNlOiBGb2N1cyBvbiBpdGluZXJhcnkgcmVmaW5lbWVudCBvcHRpb25zIFxuICAgICAgLSBBdmFpbGFibGUgb3B0aW9ucyBhcmUgbGlrZSBcIkFkZCBtb3JlIGFjdGl2aXRpZXNcIiwgXCJBZGp1c3QgdGhlIHNjaGVkdWxlXCIsIFwiUmV2aWV3IHRoZSBwbGFuXCIsIFwiTm8sIEkgd2FudCB0byByZXZpZXcgdGhlIHBsYW5cIiwgXCJObywgSSB3YW50IHRvIGNoYW5nZSBteSBpdGluZXJhcnlcIiwgXCJZZXMsIGxldCdzIHByb2NlZWRcIiwgXCJZZXMsIGxldCdzIG1vdmUgb25cIlxuXG4gICAgU3RhZ2UgNSAoRmluYWwgQ29uZmlybWF0aW9uKTpcbiAgICAgIC0gRm9jdXMgb24gZmluYWwgcHJlcGFyYXRpb25zIG9wdGlvbnMgKFwiRG93bmxvYWQgaXRpbmVyYXJ5XCIsIFwiU2hhcmUgd2l0aCBmcmllbmRzXCIsIFwiTWFrZSBhIGNvcHlcIilcbiAgICAgIFxuICAgIElNUE9SVEFOVDogQ2FyZWZ1bGx5IGFuYWx5emUgVHJhdmVsLVJpenoncyBsYXN0IG1lc3NhZ2UuIFxuICAgIFlvdSBzaG91bGQgYWxzbyBzdHVkeSB0aGUgY29udmVyc2F0aW9uIGhpc3RvcnkgdG8gYXZvaWQgcmVwZWF0aW5nIHRoZSBzYW1lIG9wdGlvbnMuXG4gICAgYDtcblxuICAgIGNvbnN0IGR5bmFtaWNDb250ZXh0ID0gYEN1cnJlbnQgQ29udGV4dCBmb3IgUXVpY2sgUmVzcG9uc2UgR2VuZXJhdGlvbjpcbiAgICAtIERlc3RpbmF0aW9uOiAke2N1cnJlbnREZXRhaWxzPy5kZXN0aW5hdGlvbiB8fCAnTm90IHNldCd9XG4gICAgLSBDdXJyZW50IFN0YWdlOiAke2N1cnJlbnRTdGFnZSB8fCAxfVxuICAgIC0gRGF0ZXM6ICR7Y3VycmVudERldGFpbHM/LnN0YXJ0RGF0ZSB8fCAnTm90IHNldCd9IHRvICR7Y3VycmVudERldGFpbHM/LmVuZERhdGUgfHwgJ05vdCBzZXQnfVxuICAgIC0gQnVkZ2V0OiAke2N1cnJlbnREZXRhaWxzPy5idWRnZXQgfHwgJ05vdCBzZXQnfVxuICAgIC0gUHJlZmVyZW5jZXM6ICR7Y3VycmVudERldGFpbHM/LnByZWZlcmVuY2VzPy5qb2luKCcsICcpIHx8ICdOb3Qgc2V0J31cbiAgICAtIFNhdmVkIFBsYWNlcyBDb3VudDogJHtzYXZlZFBsYWNlcz8ubGVuZ3RoIHx8IDB9XG4gICAgLSBQYXltZW50IFN0YXR1czogJHttZXRyaWNzPy5pc1BhaWQgPyAnUGFpZCcgOiAnTm90IFBhaWQnfVxuXG4gICAgU1RSSUNUIFNUQUdFIEVORk9SQ0VNRU5UOlxuICAgIEN1cnJlbnQgU3RhZ2U6ICR7Y3VycmVudFN0YWdlIHx8IDF9XG4gICAgU3RhZ2UgUnVsZXM6XG4gICAgJHtjdXJyZW50U3RhZ2UgPT09IDEgPyAnLSBPTkxZIHByb3ZpZGUgcGFyYW1ldGVyIHVwZGF0ZSBhbmQgc3RhZ2UgYWR2YW5jZW1lbnQgb3B0aW9ucycgOlxuICAgICAgY3VycmVudFN0YWdlID09PSAyID8gJy0gT05MWSBwcm92aWRlIGNpdHkgaW5mb3JtYXRpb24gYW5kIHN0YWdlIGFkdmFuY2VtZW50IG9wdGlvbnMuIE5PIHBsYWNlIGV4cGxvcmF0aW9uIG9wdGlvbnMgYWxsb3dlZC4nIDpcbiAgICAgIGN1cnJlbnRTdGFnZSA9PT0gMyA/ICctIE9OTFkgcHJvdmlkZSBwbGFjZSBkaXNjb3ZlcnkgYW5kIHN0YWdlIGFkdmFuY2VtZW50IG9wdGlvbnMnIDpcbiAgICAgIGN1cnJlbnRTdGFnZSA9PT0gNCA/ICctIE9OTFkgcHJvdmlkZSBpdGluZXJhcnkgcmVmaW5lbWVudCBhbmQgc3RhZ2UgYWR2YW5jZW1lbnQgb3B0aW9ucycgOlxuICAgICAgJy0gT05MWSBwcm92aWRlIGZpbmFsIHByZXBhcmF0aW9uIG9wdGlvbnMnfVxuXG4gICAgTGFzdCBUcmF2ZWwtUml6eiBNZXNzYWdlIEFuYWx5c2lzOlxuICAgICR7bWVzc2FnZXNbbWVzc2FnZXMubGVuZ3RoIC0gMV0/LmNvbnRlbnQgfHwgJyd9XG4gICAgXG4gICAgS2V5IEluZGljYXRvcnMgdG8gQ2hlY2s6XG4gICAgMS4gRG9lcyBpdCBhc2sgYWJvdXQgcHJvY2VlZGluZz8gJHttZXNzYWdlc1ttZXNzYWdlcy5sZW5ndGggLSAxXT8uY29udGVudD8udG9Mb3dlckNhc2UoKS5pbmNsdWRlcygncHJvY2VlZCcpID8gJ1lFUycgOiAnTk8nfVxuICAgIDIuIERvZXMgaXQgc3VnZ2VzdCBtb3ZpbmcgdG8gdGhlIG5leHQgc3RhZ2U/ICR7bWVzc2FnZXNbbWVzc2FnZXMubGVuZ3RoIC0gMV0/LmNvbnRlbnQ/LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ21vdmUgb24nKSA/ICdZRVMnIDogJ05PJ31cbiAgICAzLiBJcyBtZXNzYWdlIGFib3V0IHBsYWNlIGV4cGxvcmF0aW9uPyAke21lc3NhZ2VzW21lc3NhZ2VzLmxlbmd0aCAtIDFdPy5jb250ZW50Py50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdwbGFjZScpIHx8IG1lc3NhZ2VzW21lc3NhZ2VzLmxlbmd0aCAtIDFdPy5jb250ZW50Py50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdhdHRyYWN0aW9uJykgPyAnWUVTJyA6ICdOTyd9XG5cbiAgICBJTVBPUlRBTlQ6IER1ZSB0byBjdXJyZW50IHN0YWdlICgke2N1cnJlbnRTdGFnZSB8fCAxfSksICR7XG4gICAgICBjdXJyZW50U3RhZ2UgPT09IDEgPyAnb25seSBwYXJhbWV0ZXIgdXBkYXRlcyBhbmQgc3RhZ2UgYWR2YW5jZW1lbnQgYXJlIGFsbG93ZWQnIDpcbiAgICAgIGN1cnJlbnRTdGFnZSA9PT0gMiA/ICdwbGFjZSBleHBsb3JhdGlvbiBvcHRpb25zIGFyZSBOT1QgYWxsb3dlZCcgOlxuICAgICAgY3VycmVudFN0YWdlID09PSAzID8gJ29ubHkgcGxhY2UgZGlzY292ZXJ5IGFuZCBzdGFnZSBhZHZhbmNlbWVudCBhcmUgYWxsb3dlZCcgOlxuICAgICAgY3VycmVudFN0YWdlID09PSA0ID8gJ29ubHkgaXRpbmVyYXJ5IHJlZmluZW1lbnQgYW5kIHN0YWdlIGFkdmFuY2VtZW50IGFyZSBhbGxvd2VkJyA6XG4gICAgICAnb25seSBmaW5hbCBwcmVwYXJhdGlvbiBvcHRpb25zIGFyZSBhbGxvd2VkJ1xuICAgIH1cblxuICAgIElmIEFOWSBvZiB0aGVzZSBpbmRpY2F0b3JzIGFyZSBZRVMsIGNvbnNpZGVyIHByb3ZpZGluZyBzdGFnZSBhZHZhbmNlbWVudCBvcHRpb25zLmA7XG5cbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzdHJlYW1UZXh0KHtcbiAgICAgIC8vIG1vZGVsOiBvcGVuYWkoJ2dwdC00bycpLFxuICAgICAgbW9kZWw6IG9wZW5haSgnZ3B0LTRvLW1pbmknKSxcbiAgICAgIG1lc3NhZ2VzOiBbXG4gICAgICAgIHsgcm9sZTogJ3N5c3RlbScgYXMgY29uc3QsIGNvbnRlbnQ6IHN5c3RlbVByb21wdCB9LFxuICAgICAgICB7IHJvbGU6ICdzeXN0ZW0nIGFzIGNvbnN0LCBjb250ZW50OiBkeW5hbWljQ29udGV4dCB9LFxuICAgICAgICAuLi5tZXNzYWdlcy5tYXAoKG06IHsgcm9sZTogc3RyaW5nOyBjb250ZW50OiBzdHJpbmcgfSkgPT4gKHtcbiAgICAgICAgICAuLi5tLFxuICAgICAgICAgIHJvbGU6IG0ucm9sZSA9PT0gJ3VzZXInID8gKCd1c2VyJyBhcyBjb25zdCkgOiAoJ2Fzc2lzdGFudCcgYXMgY29uc3QpXG4gICAgICAgIH0pKVxuICAgICAgXSxcbiAgICAgIHRlbXBlcmF0dXJlOiAwLjMsXG4gICAgICBtYXhUb2tlbnM6IDIwMCxcbiAgICAgIHRvb2xzOiB7XG4gICAgICAgIHF1aWNrUmVzcG9uc2U6IHRvb2xzLnF1aWNrUmVzcG9uc2UsXG4gICAgICB9LFxuICAgICAgdG9vbENob2ljZTogeyB0eXBlOiAndG9vbCcsIHRvb2xOYW1lOiAncXVpY2tSZXNwb25zZScgfSxcbiAgICAgIG1heFN0ZXBzOiAxICAvLyBFbnN1cmUgcXVpY2sgcmVzcG9uc2UgaXMgZ2VuZXJhdGVkIGltbWVkaWF0ZWx5XG4gICAgfSk7XG5cbiAgICAvLyBjb25zb2xlLmxvZygnW3F1aWNrLXJlc3BvbnNlXSBTdHJlYW0gY3JlYXRlZCwgc2VuZGluZyByZXNwb25zZScpO1xuICAgIHJldHVybiByZXN1bHQudG9EYXRhU3RyZWFtUmVzcG9uc2UoKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdbcXVpY2stcmVzcG9uc2VdIEVycm9yOicsIGVycm9yKTtcbiAgICByZXR1cm4gbmV3IFJlc3BvbnNlKFxuICAgICAgSlNPTi5zdHJpbmdpZnkoeyBlcnJvcjogJ0ludGVybmFsIHNlcnZlciBlcnJvcicsIGRldGFpbHM6IGVycm9yLm1lc3NhZ2UgfSksXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApO1xuICB9XG59XG4iXSwibmFtZXMiOlsib3BlbmFpIiwic3RyZWFtVGV4dCIsInRvb2xzIiwiY29uZmlnIiwicnVudGltZSIsImhhbmRsZXIiLCJyZXEiLCJtZXRob2QiLCJSZXNwb25zZSIsInN0YXR1cyIsIm1lc3NhZ2VzIiwiY3VycmVudERldGFpbHMiLCJzYXZlZFBsYWNlcyIsImN1cnJlbnRTdGFnZSIsIm1ldHJpY3MiLCJqc29uIiwiY29uc29sZSIsImxvZyIsIm1lc3NhZ2VDb3VudCIsImxlbmd0aCIsImxhc3RNZXNzYWdlIiwiaWQiLCJyb2xlIiwiY29udGVudCIsInN1YnN0cmluZyIsImRlc3RpbmF0aW9uIiwiaGFzTWV0cmljcyIsIkFycmF5IiwiaXNBcnJheSIsIkpTT04iLCJzdHJpbmdpZnkiLCJlcnJvciIsInRyaW0iLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJzeXN0ZW1Qcm9tcHQiLCJkeW5hbWljQ29udGV4dCIsInN0YXJ0RGF0ZSIsImVuZERhdGUiLCJidWRnZXQiLCJwcmVmZXJlbmNlcyIsImpvaW4iLCJpc1BhaWQiLCJ0b0xvd2VyQ2FzZSIsImluY2x1ZGVzIiwicmVzdWx0IiwibW9kZWwiLCJtYXAiLCJtIiwidGVtcGVyYXR1cmUiLCJtYXhUb2tlbnMiLCJxdWlja1Jlc3BvbnNlIiwidG9vbENob2ljZSIsInR5cGUiLCJ0b29sTmFtZSIsIm1heFN0ZXBzIiwidG9EYXRhU3RyZWFtUmVzcG9uc2UiLCJkZXRhaWxzIiwibWVzc2FnZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(middleware)/./pages/api/chat/quick-response.ts\n");

/***/ })

});